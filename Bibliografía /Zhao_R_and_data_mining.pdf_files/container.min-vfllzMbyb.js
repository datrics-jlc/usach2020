define(["require","exports","tslib","prop-types","react","modules/clean/auth/login_or_register/types","modules/clean/react/file_viewer/file_viewer","modules/clean/open_in_app/actions","modules/clean/sharing/async_share_modal_util","modules/clean/viewer","modules/clean/react/file_viewer/conversions/conversion_utils","modules/clean/react/file_viewer/data/store","modules/clean/web_timing_logger","modules/clean/react/extensions/data/store","modules/clean/integrations/zoom_share_dialog/async_modal"],(function(e,t,o,n,i,r,a,s,l,d,u,c,p,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importDefault(n);var h=(function(t){function h(e){var o=t.call(this,e)||this,n=d.Viewer.get_viewer(),i=e.userId?n.get_user_by_id(e.userId):n.work_user||n.personal_user;o.state={user:i},p.log_js_modules_application_code_start();var r=e.file,a=c.getStoreForFileViewer();return c.hydrateFileViewerNamespace(a,{file:r},i),i&&_.initializeStore(i,[r]),o}return o.__extends(h,t),h.prototype.componentDidMount=function(){var t=this,n=this.props,a=n.shareEmail,d=n.file;if(a&&this.state.user)new Promise((function(t,o){e(["modules/clean/react/browse/models"],t,o)})).then(o.__importStar).then((function(e){var o=e.File;l.asyncShowPrefilledShareModal({user:t.state.user,sharePrefillEmails:[a],content:new o(t.props.file)})}));else if(this.props.authModalKind!==r.LoginOrRegisterKind.IMMEDIATE||this.state.user)this.props.presentInZoom&&this.state.user&&m.asyncShowModal(this.state.user.id,d.file_id,"file-viewer-modal-overlay","desktop");else{u.shouldShowPersistentHeader()||u.shouldShowPersistentFooter()||u.shouldNotShowInitialModal()||o.__awaiter(t,void 0,void 0,(function(){var t,n,a;return o.__generator(this,(function(s){switch(s.label){case 0:return[4,Promise.all([new Promise((function(t,o){e(["modules/clean/react/modal"],t,o)})).then(o.__importStar),new Promise((function(t,o){e(["modules/clean/auth/login_or_register/modal"],t,o)})).then(o.__importStar)])];case 1:return t=s.sent(),n=t[0].Modal,a=t[1].LoginOrRegisterModal,n.showInstance(i.default.createElement(a,{downloadAction:null,id:"shared-link-immediate-signup-modal",initialMode:r.Mode.REGISTER,kind:r.LoginOrRegisterKind.IMMEDIATE,onAuthenticateSuccess:function(){},onCancel:function(){},signup_tag:"shmodel_modal_register"})),[2]}}))}))}if(this.props.openImmediatelyInApp){var c=this.props.file;s.openImmediately(c.open_in_app_data)}},h.prototype.render=function(){var e=this.props,t=e.fileViewerProps,n=e.onCloseUrl,r=e.isEmbedded,s=e.brandingInfo,l=e.encryptionOptions,d=e.openInHelloSign,u=e.openInHelloSignSrc,c=e.sharedLinkInfo,p=e.shareToken,_=e.sharePermission,m=e.LoggedOutUXGoogleVariant,h=e.LoggedOutUXPaperVariant,f=i.default.createElement(a.FileViewer,o.__assign({},t,{fileCount:1,fileIndex:0,titleBarCloseUrl:n,sharedLinkInfo:c,brandingInfo:s,openInHelloSign:d,openInHelloSignSrc:u,shareToken:p,sharePermission:_,user:this.state.user,transparentBackground:!1,LoggedOutUXGoogleVariant:m,LoggedOutUXPaperVariant:h,encryptionOptions:l}));return r?i.default.createElement("div",{className:"embedded"},f):f},h.prototype.getChildContext=function(){return{authModalKind:this.props.authModalKind}},h.childContextTypes={authModalKind:n.default.oneOf(["download","immediate",null])},h})((i=o.__importDefault(i)).default.Component);t.FileViewerContainer=h}));
//# sourceMappingURL=container.min.js-vflqCU53Q.map