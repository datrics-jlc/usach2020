define("modules/clean/react/growth_pages/promo/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.NOT_APPLICABLE=0]="NOT_APPLICABLE",e[e.EXTRA_TIME_MONTHS=1]="EXTRA_TIME_MONTHS",e[e.EXPERIMENTAL_PLAN=2]="EXPERIMENTAL_PLAN",e[e.PERCENT_DISCOUNT_PRETAX=3]="PERCENT_DISCOUNT_PRETAX",e[e.TRIAL=4]="TRIAL"})(t.PromoSpecType||(t.PromoSpecType={}))})),define("modules/clean/react/payments/buy/components/plan/exp_plan_selection",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/analytics","modules/constants/trademark"],(function(e,t,a,r,n,o,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPlanChange=function(e,a,r){var n=e.currentTarget;r=r||n.value,t.handlePlanChange(parseInt(r,10))},t.onPlanLabelClick=function(e){t.handlePlanChange(e)},t}return a.__extends(t,e),t.prototype.handlePlanChange=function(e){if(e!==this.props.productPlanType){var t=e===o.ProductPlanType.PROFESSIONAL&&!0===this.props.showTrialVersion;this.props.actions.updateSelectedPlan(e,t),this.props.updateHistory(2,e,void 0,t),i.ProEventsLogger.log(i.ProEventNames.BUY_TRY_PAGE_CHECKOUT,{type:"QuotaSwitch",selectedPlanType:e})}},t.prototype.renderPlusPlanBlock=function(){var e=this,t=this.props,a=t.showPlanNameUnderRadio,n=t.productPlanType,i=t.quotaStrings,u=r.default.createElement("span",{id:"plan-info__label--plus",className:"plan-info__label plan-info__label--bold plan-info__label--plus",onClick:function(){return e.onPlanLabelClick(o.ProductPlanType.PLUS)},"aria-hidden":"true"},i.plus),c="Dropbox "+l.TRADEMARK_PLUS;return r.default.createElement("div",{className:"plan-info__choice plan-info__plus"},r.default.createElement(s.LabeledRadioInput,{name:"plan_id",inputId:"plan-info__radio--plus",ariaLabelId:"plan-info__label--plus",className:"plan-info__radio",labelClassName:"plan-info__container",value:o.ProductPlanType.PLUS.toString(),checked:n===o.ProductPlanType.PLUS,labelSpan:u,onClickOrChange:this.onPlanChange}),r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--plus"},a&&c))},t.prototype.renderProfessionalPlanBlock=function(){var e=this,t=this.props,a=t.showPlanNameUnderRadio,i=t.productPlanType,u=t.quotaStrings,c=t.showTrialVersion,p=r.default.createElement("span",{id:"plan-info__label--pro",className:"plan-info__label plan-info__label--bold plan-info__label--pro",onClick:function(){return e.onPlanLabelClick(o.ProductPlanType.PROFESSIONAL)},"aria-hidden":"true"},u.professional),d="Dropbox "+l.TRADEMARK_PROFESSIONAL,m=n.intl.formatMessage({defaultMessage:"With <showcase>Dropbox Showcase</showcase>"},{showcase:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("a",{className:"plan-info__subtitle--underline",href:"/showcase"},e)}}),f=n.intl.formatMessage({defaultMessage:"Try free for {pro_trial_days} days"},{pro_trial_days:this.props.proTrialDays});return r.default.createElement("div",{className:"plan-info__choice plan-info__pro"},r.default.createElement(s.LabeledRadioInput,{name:"plan_id",inputId:"plan-info__radio--pro",ariaLabelId:"plan-info__label--pro",className:"plan-info__radio",labelClassName:"plan-info__container",value:o.ProductPlanType.PROFESSIONAL.toString(),checked:i===o.ProductPlanType.PROFESSIONAL,labelSpan:p,onClickOrChange:this.onPlanChange}),r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--pro"},a?d:m),c&&r.default.createElement("div",{className:"plan-info__subtitle plan-info__subtitle--green"},f))},t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container plan-info"},this.renderPlusPlanBlock(),r.default.createElement("div",{className:"plan-info__spacer"}),this.renderProfessionalPlanBlock())},t})((r=a.__importDefault(r)).default.Component);t.ExpPlanSelection=u})),define("modules/clean/react/payments/buy/components/buy_purchase_form",["require","exports","tslib","react","react-intl","classnames","modules/core/i18n","modules/clean/raf_throttle","modules/clean/auth/common/recaptcha","modules/clean/web_timing_logger","modules/clean/analytics","modules/clean/react/payments/buy/components/account/new_account_input","modules/clean/react/payments/buy/components/plan/schedule_selection","modules/clean/react/payments/buy/components/payments/buy_payment_info_section","modules/clean/react/payments/buy/components/payments/order_summary","modules/clean/react/payments/buy/components/payments/worldpay_entity_info","modules/clean/react/payments/buy/components/plan/exp_plan_selection","modules/clean/react/async/loadable","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form/actions/actions","modules/core/exception"],(function(e,t,a,r,n,o,s,i,l,u,c,p,d,m,f,h,y,g,_,v,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importDefault(o),u=a.__importStar(u),S=a.__importStar(S);var C=g.Loadable({loader:function(){return new Promise((function(t,a){e(["modules/clean/react/payments/buy/components/account/user_selector"],t,a)})).then(a.__importStar).then((function(e){return e.UserSelectorPanel}))}}),b=(function(e){function t(t){var a=e.call(this,t)||this;if(a.paymentSection=r.default.createRef(),a.variant="row",a.setCaptchaComponent=function(e){a.captchaComponent=e},a.submitForm=function(e){var t,r=((t={})[_.PaymentMethod.CreditCard]="/pro/ajax_buy",t[_.PaymentMethod.PayPal]="/pro/ajax_paypal_buy",t[_.PaymentMethod.DirectDeposit]="/payments/ajax_sepa_buy",t[_.PaymentMethod.Ideal]="/payments/ajax_ideal_buy",t);a.onSubmitProBuyForm({trigger:e,url:r[a.props.formData.paymentMethod.formattedValue],useSelectedUser:a.shouldUseSelectedUser()})},a.handleSubmitTryForm=function(e){e.preventDefault(),a.onSubmitFormWithCaptchaScore()},a.submitTryForm=function(e){var t;c.ProEventsLogger.log("clicked_start_free_trial_cta_"+a.props.planName.toLowerCase());var r=((t={})[_.PaymentMethod.CreditCard]="/pro/ajax_try",t[_.PaymentMethod.PayPal]="/pro/ajax_paypal_try",t);a.onSubmitProBuyForm({trigger:e,url:r[a.props.formData.paymentMethod.formattedValue],useSelectedUser:!1})},a.onSubmitProBuyForm=function(e){var t=e.trigger,r=e.url,n=e.useSelectedUser,o=a.props.promoSpec,s={cont:a.props.continueURI,is_pro_buy_form:!0};a.saveState(),o&&(s.is_pro_buy_form=!1,s.promo_ids=o.id,o.cashCode&&(s.code=o.cashCode)),a.props.actions.submitProBuyForm({additionalData:s,allowSubmitWithoutTOS:!1,captchaComponentRef:a.captchaComponent,handle3DsMessage:a.paymentInfoSection.getCreditCardFrame().handle3DsMessage,enableBinRouting:!0,prepareForSubmission:a.prepareForSubmission.bind(a),showCpf:a.props.showCpf,showCpfName:a.props.showCpfName,trigger:t,url:r,useSelectedUser:n,psd2AddressFields:a.props.experiments.psd2AddressFields,webPlusDirect:!!a.props.experiments.webPlusDirect,paymentPayPalV2Flow:a.props.experiments.paymentPayPalV2Flow})},a.onSubmitFormWithCaptchaScore=function(){a.captchaComponent&&a.captchaComponent.getWrappedComponent().submit()},a.resubmitForm=function(e){void 0===e&&(e=v.SubmitFormTriggerType.ButtonClick),a.props.showTrialVersion?a.submitTryForm(e):a.submitForm(e)},a.handleChange=function(){var e="none";if(window.innerWidth>=736){var t=a.state.elementPositions,r=window.pageYOffset||document.documentElement.scrollTop,n=t.columnTop-a.stickyColumnBuffer,o=t.paymentSectionTop-a.stickyColumnBuffer;e=r>=n&&r<=o?"fixed":r>o?"flex-end":"flex-start"}a.state.stickyElementState!==e&&a.setState({stickyElementState:e})},a.handleResize=function(){a.getElementPositions()},a.getElementPositions=function(){var e=a.paymentSection;if(e&&e.current){var t=a.summaryColumn.getBoundingClientRect(),r=a.stickyElement.getBoundingClientRect(),n=e.current.getBoundingClientRect(),o={columnTop:t.top+window.pageYOffset,columnLeft:t.left+window.pageXOffset,columnWidth:t.width,paymentSectionTop:n.top+window.pageYOffset,stickyElementHeight:r.height,windowWidth:document.documentElement.clientWidth};a.setState({elementPositions:o},a.handleChange)}},a.onLoginClick=function(){c.GrowthEventsLogger.log("buy_checkout_sign_in_modal",{action:"click",location:"in_product"}),a.props.actions.toggleExistingAccount()},a.onCreateClick=function(e){return function(){e&&c.GrowthEventsLogger.log(e,{action:"click",location:"in_product"}),a.props.actions.toggleNewAccount()}},a.handlePress=function(e){!a.props.pageState.isPaymentOptionsSurveyOpen&&"Enter"===e.key&&e.target instanceof Element&&("INPUT"===e.target.tagName||"SELECT"===e.target.tagName)&&(e.preventDefault(),a.onSubmitFormWithCaptchaScore())},a.updateSelectedUser=function(e,t){c.GrowthEventsLogger.log("buy_checkout_choose_user",{action:t,location:"in_product"}),a.props.actions.updateSelectedUser(e)},a.getCreateAccountLinkProps=function(){var e=a,t=e.onCreateClick,r=e.onLoginClick,o=e.props.pageState,s=o.preauthUser,i=o.showCreateAccount,l=s?i?"choose an account":"create an account":"use existing Dropbox account";return{onClick:s?t(i?"buy_checkout_toggle_choose_account":"buy_checkout_toggle_create_account"):r,linkKey:"create_account",linkText:n.defineMessage({defaultMessage:"or <create_account>{create_link_text}</create_account>"}),otherFormatters:{create_link_text:l}}},a.scrollThrottle=new i.RafThrottle(a.handleChange),a.resizeThrottle=new i.RafThrottle(a.handleResize),a.stickyColumnBuffer=50,a.state={stickyElementState:"flex-start",elementPositions:{columnTop:250,columnLeft:45,columnWidth:500,paymentSectionTop:900,stickyElementHeight:550,windowWidth:1e3},hasLoadedSubChangePlans:!1},a.props.showTrialVersion){var o=a.props.pageState.paymentFormSpec;a.props.actions.updatePaymentMethod(o.default_payment_method())}return a.variant=a.props.variant?a.props.variant:"row",a}return a.__extends(t,e),t.prototype.prepareForSubmission=function(){return this.paymentInfoSection.prepareForSubmission()},t.prototype.shouldUseSelectedUser=function(){return"V1"===this.props.experiments.subgrowthBuyUniversalPreauth&&null!=this.props.pageState.suggestedUser&&!this.props.pageState.showCreateAccount||"V1"===this.props.experiments.subgrowthProBuyPreauthAccountChooser&&null!=this.props.pageState.preauthUser&&!this.props.pageState.showCreateAccount},t.prototype.getValue=function(e,t){var a=sessionStorage.getItem(e);return null!=a?a:t},t.prototype.loadState=function(){try{if(!this.props.experiments.cachePaymentUIFields)return;if(void 0===sessionStorage)return;this.props.actions.updateFirstName(this.getValue("firstName",this.props.formData.firstName.rawValue)),this.props.actions.updateLastName(this.getValue("lastName",this.props.formData.lastName.rawValue)),this.props.actions.updateEmail(this.getValue("email",this.props.formData.email.rawValue)),this.props.actions.updateZipCode(this.getValue("zipCode",this.props.formData.zipCode.rawValue));var e=this.getValue("countryCode",this.props.formData.countryCode.rawValue);this.props.actions.updateCountryCode(e);var t=Number(this.getValue("paymentMethod",""+this.props.formData.paymentMethod.rawValue));this.props.pageState.paymentFormSpec.available_payment_methods_for_country(e).includes(t)&&this.props.actions.updatePaymentMethod(t),this.props.experiments.psd2AddressFields&&(this.props.actions.updateAddress(this.getValue("address",this.props.formData.address.rawValue)),this.props.actions.updateCity(this.getValue("city",this.props.formData.city.rawValue)),this.props.actions.updateName(this.getValue("name",this.props.formData.name.rawValue)))}catch(e){S.reportException({err:new Error("Error loading payment state"+e.message),severity:S.SEVERITY.NONCRITICAL})}},t.prototype.saveState=function(){try{if(!this.props.experiments.cachePaymentUIFields)return;if(void 0===sessionStorage)return;sessionStorage.setItem("firstName",this.props.formData.firstName.rawValue),sessionStorage.setItem("lastName",this.props.formData.lastName.rawValue),sessionStorage.setItem("email",this.props.formData.email.rawValue),sessionStorage.setItem("zipCode",this.props.formData.zipCode.rawValue),sessionStorage.setItem("countryCode",this.props.formData.countryCode.rawValue),sessionStorage.setItem("paymentMethod",""+this.props.formData.paymentMethod.rawValue),this.props.experiments.psd2AddressFields&&(sessionStorage.setItem("address",""+this.props.formData.address.rawValue),sessionStorage.setItem("city",""+this.props.formData.city.rawValue),sessionStorage.setItem("name",""+this.props.formData.name.rawValue))}catch(e){S.reportException({err:new Error("Error saving payment state"+e.message),severity:S.SEVERITY.NONCRITICAL})}},t.prototype.componentDidMount=function(){u.mark_time_to_interactive(),this.getElementPositions(),window.addEventListener("resize",this.resizeThrottle.request),"row"===this.variant&&window.addEventListener("scroll",this.scrollThrottle.request),"orientation"in window&&window.addEventListener("orientationchange",this.resizeThrottle.request),this.loadState()},t.prototype.componentDidUpdate=function(e,t){var a=this.props.pricingState;!this.state.hasLoadedSubChangePlans&&a.currentTransitionPrices.totalPrice&&(this.handleResize(),this.setState({hasLoadedSubChangePlans:!0}))},t.prototype.componentWillUnmount=function(){window.removeEventListener("scroll",this.scrollThrottle.request),window.removeEventListener("resize",this.resizeThrottle.request)},t.prototype.renderPaymentForm=function(){var e,t=this,o=this.props,i=o.ccIframeUrl,l=o.countryList,u=o.experiments,c=o.idealBanks,f=o.initialPricingStrings,h=o.locale,g=o.formData,_=o.pageState,v=o.pricingState,S=o.showTrialVersion,b=o.isFromLowSpace,E=o.trialLength,M=o.quotaStrings,N=o.updateHistory,T=o.useAUTaxInclusivePricing,k=o.showPlusTryRedesign,V=function(e){return void 0===e&&(e=!0),e?n.defineMessage({defaultMessage:"{index}. Choose your space"}):s.intl.formatMessage({defaultMessage:"Choose your space"})},x=function(e){return void 0===e&&(e=!0),e?n.defineMessage({defaultMessage:"{index}. Choose your billing cycle"}):s.intl.formatMessage({defaultMessage:"Choose your billing cycle"})},I=function(e){return void 0===e&&(e=!0),e?n.defineMessage({defaultMessage:"{index}. Create your account"}):s.intl.formatMessage({defaultMessage:"Create your account"})},D=function(e){return void 0===e&&(e=!0),e?n.defineMessage({defaultMessage:"{index}. Choose account"}):s.intl.formatMessage({defaultMessage:"Choose account"})},B=function(e){return void 0===e&&(e=!0),e?n.defineMessage({defaultMessage:"{index}. Enter payment details"}):s.intl.formatMessage({defaultMessage:"Enter payment details"})};_.showPlanSwitchRadios&&(e=function(e,a){return r.default.createElement(P,{index:e,key:"choose-space-section-"+e,modifier:"plan-selection",title:V(a)},r.default.createElement(y.ExpPlanSelection,{actions:t.props.actions,productPlanType:g.productPlanType.rawValue,proTrialDays:E,quotaStrings:M,updateHistory:N,showTrialVersion:"ON"===u.ujProfessionalTrial,showPlanNameUnderRadio:b}))});var L,U=r.default.createElement(d.ScheduleSelection,{actions:this.props.actions,displayPrices:v.displayPrices,formData:g,initialPricingStrings:f,locale:h,useAUTaxInclusivePricing:T,showTrialVersion:S,showPlusTryRedesign:k,trialLength:E}),O=_.suggestedUser&&"V1"===u.subgrowthBuyUniversalPreauth;if(!_.userInfo.email||_.preauthUser){if(!_.preauthUser){var A=r.default.createElement(w,{onClick:O?this.onCreateClick():this.onLoginClick,linkKey:"existing_account",linkText:O?n.defineMessage({defaultMessage:"or <existing_account>choose an account</existing_account>"}):n.defineMessage({defaultMessage:"or <existing_account>use existing Dropbox account</existing_account>"})});L=function(e,a){return r.default.createElement(F,{index:e,key:"create-account-section-"+e,link:A,title:I(a)},r.default.createElement(p.NewAccountInput,{actions:t.props.actions,pageState:_,formData:g,paymentFormErrorsExperiment:u.paymentFormErrorsExperiment}))}}if(O&&_.suggestedUser&&!_.showCreateAccount){var R=r.default.createElement(w,{onClick:this.onCreateClick(),linkKey:"create_account",linkText:n.defineMessage({defaultMessage:"or <create_account>create an account</create_account>"})});L=function(e,a){return r.default.createElement(F,{index:e,key:"create-account-section-"+e,link:R,title:D(a)},r.default.createElement(C,{users:[_.suggestedUser],selected:g.selectedUser.hasSelection?g.selectedUser.rawValue:void 0,onClickUser:t.updateSelectedUser,onDeselect:t.updateSelectedUser,onClickLogin:t.onLoginClick,error:g.selectedUser.showError?s.intl.formatMessage({defaultMessage:"Please select or create an account to upgrade."}):void 0}))}}"V1"===u.subgrowthProBuyPreauthAccountChooser&&(L=function(e,n){return r.default.createElement(F,{index:e,key:"create-account-section-"+e,link:r.default.createElement(w,a.__assign({},t.getCreateAccountLinkProps())),title:_.preauthUser&&!_.showCreateAccount?D(n):I(n)},_.preauthUser&&!_.showCreateAccount?r.default.createElement(C,{users:[_.preauthUser],selected:g.selectedUser.hasSelection?g.selectedUser.rawValue:void 0,onClickUser:t.updateSelectedUser,onDeselect:t.updateSelectedUser,onClickLogin:t.onLoginClick,error:g.selectedUser.showError?s.intl.formatMessage({defaultMessage:"Please select or create an account to upgrade."}):void 0,isPreauth:!0}):r.default.createElement(p.NewAccountInput,{actions:t.props.actions,pageState:_,formData:g,paymentFormErrorsExperiment:u.paymentFormErrorsExperiment}))})}var q=r.default.createElement(m.PaymentInfoSection,{paymentSpec:_.paymentFormSpec,iframeUrl:i,idealBanks:c,countryList:l,formData:g,productPlanType:this.props.productPlanType,showCpf:this.props.showCpf,showCpfName:this.props.showCpfName,psd2AddressFields:this.props.experiments.psd2AddressFields,optimizeCpf:_.optimizeCpf,actions:this.props.actions,ref:function(e){t.paymentInfoSection=e},showTrialVersion:S,hidePaymentMethodSelector:!1,enableIdealReact:!1,userInfo:this.props.pageState.userInfo,submitForm:this.resubmitForm,paymentOptionsExperiment:u.paymentOptionsExperiment,isPaymentOptionsSurveyOpen:this.props.pageState.isPaymentOptionsSurveyOpen,paymentFormErrorsExperiment:u.paymentFormErrorsExperiment,paymentPayPalV2Flow:u.paymentPayPalV2Flow,braintreeClientToken:this.props.braintreeClientToken}),W=[e,function(e,t){return r.default.createElement(P,{index:e,key:"billing-schedule-section-"+e,modifier:"schedule-selection",title:x(t)},U)},L,function(e,a){return r.default.createElement(P,{forwardRef:t.paymentSection,index:e,key:"payment-section-"+e,modifier:"billing",title:B(a)},q)}],H=!0;if(k){W=[L,function(e,a){return r.default.createElement(P,{forwardRef:t.paymentSection,key:"plus-try-redesign-section-"+e,modifier:"billing",title:n.defineMessage({defaultMessage:"Add your billing info for later"})},U,q)}],H=!1}var z=W.filter(Boolean).map((function(e,t){return e(t+1,H)}));return r.default.createElement("form",{className:"payment-form grid__container",method:"post",onKeyPress:this.handlePress},z)},t.prototype.renderOrderSummary=function(){var e=this.props,t=e.actions,a=e.buyLink,n=e.experiments,o=e.formData,s=e.pageState,i=e.planName,l=e.planNamePrefixedWithDropbox,u=e.pricingState,c=e.productPlanType,p=e.promoSpec,d=e.trialLength,m=e.showTrialVersion,h=e.taxNamesByCountry,y=e.showPlusTryRedesign;return r.default.createElement("div",{className:"grid__item"},r.default.createElement(f.OrderSummary,{actions:t,buyLink:a,formVariant:this.variant,formData:o,currentTransitionPrices:u.currentTransitionPrices,loadingPrices:u.loadingPrices,onClick:this.onSubmitFormWithCaptchaScore,onTryClick:this.handleSubmitTryForm,pageState:s,planName:i,planNamePrefixedWithDropbox:l,productPlanType:c,taxNamesByCountry:h,showTrialVersion:m,promoSpec:p,paymentFormErrorsExperiment:n.paymentFormErrorsExperiment,showPlusTryRedesign:y,trialLength:d}))},t.prototype.renderIncludedFeatures=function(){var e=this.props.includedFeaturesContent,t=this.props.experiments;if(e){var a="ON"===t.subgrowthProBuyFeaturesMobile,n=o.default({"included-features":!0,grid__container:!0,"included-features--show-on-mobile":a});return r.default.createElement("div",{className:n},r.default.createElement("p",{className:"included-features__title grid__item"},e.title),r.default.createElement("ul",{className:"included-features__list grid__container"},e.items.map((function(e,t){return r.default.createElement("li",{className:"included-features__feature grid__item--1-2",key:"included-"+t},e.text)}))))}},t.prototype.renderWorldpayEntityText=function(){return-1===t.excludeWorldpayEntityTextForCountry.indexOf(this.props.formData.countryCode.formattedValue)?r.default.createElement(h.WorldPayEntityInfo,null):null},t.prototype.render=function(){var e,t,n=this,s=this.state,i=s.elementPositions,u=s.stickyElementState,c="flex-start",p={msFlexAlign:"start"};if("flex-end"===u&&(c="flex-end",p={msFlexAlign:"end"}),"none"!==u){var d=i.paymentSectionTop-i.columnTop+i.stickyElementHeight;t=a.__assign({height:d,alignItems:c},p)}else t={alignItems:c,width:i.windowWidth,maxWidth:i.windowWidth};var m={};"fixed"===u&&(m={position:"fixed",top:this.stickyColumnBuffer,left:i.columnLeft,width:i.columnWidth});var f="column"===this.variant;return r.default.createElement("div",{className:o.default("PurchaseForm","grid__container",(e={},e["PurchaseForm--column"]=f,e))},r.default.createElement("div",{className:o.default("grid__item",{"grid__item--medium--11-24":!f})},this.renderPaymentForm()),!f&&r.default.createElement("div",{className:"grid__item--medium--1-12"}),r.default.createElement("div",{className:o.default("grid__item","PurchaseForm__summary-col",{"grid__item--medium--11-24":!f,"PurchaseForm__summary-col--full":f}),style:t,ref:function(e){n.summaryColumn=e}},r.default.createElement("div",{className:"grid__item",style:m,ref:function(e){n.stickyElement=e}},this.renderOrderSummary(),this.renderIncludedFeatures())),r.default.createElement("div",{className:"grid__item"},this.renderWorldpayEntityText()),r.default.createElement(l.Recaptcha,{ref:this.setCaptchaComponent,source:"BUY_PURCHASE_FORM",onSubmit:this.resubmitForm,email:this.props.pageState.userInfo.email||this.props.formData.email.formattedValue}))},t.excludeWorldpayEntityTextForCountry=["US","CA","MX"],t})(r.default.Component);t.BuyPurchaseForm=b;var E=function(){return r.default.createElement("hr",{"aria-hidden":"true",className:"payment-form__divider grid__item payment-form__divider"})},P=function(e){var t=e.children,n=e.forwardRef,o=e.index,i=e.modifier,l=e.title,u=a.__assign({className:"payment-form__section--"+i+" grid__item"},n?{ref:n}:{});return r.default.createElement("section",a.__assign({},u),r.default.createElement(E,null),r.default.createElement("div",{className:"payment-form__header grid__item"},"string"==typeof l?l:s.intl.formatMessage(l,{index:o})),t)},F=function(e){var t=e.index,a=e.link,n=e.title,o=e.children;return r.default.createElement("section",{className:"payment-form__section grid__item"},r.default.createElement(E,null),r.default.createElement("div",{className:"payment-form__header grid__container grid--x-bookend"},r.default.createElement("div",{className:"payment-form__header--account"},"string"==typeof n?n:s.intl.formatMessage(n,{index:t})),a),o)},w=function(e){var t,n=e.linkText,o=e.linkKey,i=e.onClick,l=e.otherFormatters,u=void 0===l?{}:l;return r.default.createElement("div",{className:"payment-form__login"},s.intl.formatMessage(n,a.__assign(((t={})[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("button",{"aria-label":"",key:"account-toggle",className:"account-toggle button--as-link",onClick:i,type:"button"},e)},t),u)))}})),define("modules/clean/react/payments/buy/components/account/new_account_input",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/web_timing_logger"],(function(e,t,a,r,n,o,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),o=a.__importStar(o);var u=(function(t){function u(){var e=null!==t&&t.apply(this,arguments)||this;return e.onFirstNameChanged=function(t){e.props.actions.updateFirstName(t.value)},e.onFirstNameBlur=function(t){"ON"===e.props.paymentFormErrorsExperiment&&e.props.actions.showFormFieldErrors(["firstName"],"FirstNameBlur")},e.onLastNameChanged=function(t){e.props.actions.updateLastName(t.value)},e.onLastNameBlur=function(t){"ON"===e.props.paymentFormErrorsExperiment&&e.props.actions.showFormFieldErrors(["lastName"],"LastNameBlur")},e.onEmailChanged=function(t){e.props.actions.updateEmail(t.value)},e.onEmailBlur=function(t){"ON"!==e.props.paymentFormErrorsExperiment?""!==t.value&&e.props.actions.showFormFieldErrors(["email"],"EmailBlur"):e.props.actions.showFormFieldErrors(["email"],"EmailBlur")},e.onPasswordChanged=function(t){e.props.actions.updatePassword(t.value)},e.onPasswordBlur=function(t){e.props.actions.showFormFieldErrors(["password"],"PasswordBlur")},e.toggleExistingAccount=function(){e.props.actions.toggleExistingAccount(!1)},e}return a.__extends(u,t),u.prototype.firstNameErrorString=function(){var e=this.props.formData.firstName;return e.showError&&!s.FormValueHelper.isValid(e)?n.intl.formatMessage({defaultMessage:"Please enter a valid first name."}):""},u.prototype.lastNameErrorString=function(){var e=this.props.formData.lastName;return e.showError&&!s.FormValueHelper.isValid(e)?n.intl.formatMessage({defaultMessage:"Please enter a valid last name."}):""},u.prototype.emailErrorMessage=function(){var e=this,t=this.props.formData.email;if(t.showError)switch(t.errorState){case o.EmailErrorState.Empty:return n.intl.formatMessage({defaultMessage:"Please enter an email address."});case o.EmailErrorState.NoAt:return n.intl.formatMessage({defaultMessage:"An email address must contain a single @"});case o.EmailErrorState.BadUsername:var a=t.formattedValue.split("@")[0];return n.intl.formatMessage({defaultMessage:"The username portion of the email address is invalid (the portion before the @: {username})."},{username:a});case o.EmailErrorState.BadDomain:var s=t.formattedValue.split("@")[1];return""===s?n.intl.formatMessage({defaultMessage:"The domain portion of the email address is invalid (the portion after the @)."}):n.intl.formatMessage({defaultMessage:"The domain portion of the email address is invalid (the portion after the @: {domain})."},{domain:s});case o.EmailErrorState.TakenWarning:return r.default.createElement("span",null,n.intl.formatMessage({defaultMessage:"This e-mail is already taken."}));case o.EmailErrorState.TakenError:return r.default.createElement("span",null,n.intl.formatMessage({defaultMessage:"This e-mail is already taken. <a_signin>Sign in</a_signin> or <a_forgot>reset your password</a_forgot>."},{a_signin:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{key:"a-signin",className:"login-register-switch-link",onClick:e.toggleExistingAccount},t)},a_forgot:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("a",{key:"a-forgot",href:"/forgot"},e)}}))}return""},u.prototype.passwordErrorString=function(){return this.props.formData.password.showError?n.intl.formatMessage({defaultMessage:"Passwords must be 6 characters or more."}):""},u.prototype.renderPasswordStrengthMeter=function(e){return this.state&&this.state.passwordStrengthMeter?r.default.createElement(this.state.passwordStrengthMeter,{password:e}):void 0},u.prototype.componentDidMount=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,l.waitForTTI()];case 1:return r.sent(),[4,new Promise((function(t,a){e(["modules/clean/components/password_strength_meter"],t,a)})).then(a.__importStar)];case 2:return t=r.sent().PasswordStrengthMeter,this.setState({passwordStrengthMeter:t}),[2]}}))}))},u.prototype.render=function(){var e=this.props,t=e.formData,a=e.pageState,o=n.intl.formatMessage({defaultMessage:"Email"}),s=n.intl.formatMessage({defaultMessage:"Password"});return r.default.createElement("div",{className:"grid__item account-info grid__item--large--11-12"},r.default.createElement("div",{className:"account-info__name grid__container grid--x-bookend grid--y-top"},r.default.createElement(i.LabeledTextInput,{name:"fname",autocomplete:a.autocomplete?"given-name":"off",labelText:n.intl.formatMessage({defaultMessage:"First name"}),containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:t.firstName.rawValue,onBlur:this.onFirstNameBlur,onChange:this.onFirstNameChanged,errorText:this.firstNameErrorString()}),r.default.createElement(i.LabeledTextInput,{name:"lname",autocomplete:a.autocomplete?"family-name":"off",labelText:n.intl.formatMessage({defaultMessage:"Last name"}),containerClassName:"grid__item--fluid",value:t.lastName.rawValue,onBlur:this.onLastNameBlur,onChange:this.onLastNameChanged,errorText:this.lastNameErrorString()})),r.default.createElement("div",{className:"account-info__cred grid__container grid--x-bookend grid--y-top"},r.default.createElement(i.LabeledTextInput,{name:"account-email",autocomplete:a.autocomplete?"email":"off",type:"email",labelText:o,containerClassName:"grid__item--fluid grid__item--margin-right--1-24",value:t.email.rawValue,onBlur:this.onEmailBlur,onChange:this.onEmailChanged,errorText:this.emailErrorMessage()}),r.default.createElement("div",{className:"account-info__password grid__item--fluid"},this.renderPasswordStrengthMeter(t.password.rawValue),r.default.createElement(i.LabeledTextInput,{name:"password",type:"password",autocomplete:"new-password",labelText:s,containerClassName:"grid__item",value:t.password.rawValue,onChange:this.onPasswordChanged,onBlur:this.onPasswordBlur,errorText:this.passwordErrorString()}))))},u})(r.default.Component);t.NewAccountInput=u})),define("modules/clean/react/payments/buy/components/plan/schedule_selection",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/payments/skus/constants","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,a,r,n,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onScheduleChange=function(e,a,r){var n=e.currentTarget;r=r||n.value;var o=parseInt(r,10);o!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(o)},t.onPlanLabelClick=function(e){e!==t.props.formData.scheduleId.formattedValue&&t.props.actions.updateSchedule(e)},t.getFreeForTrialDaysThenPriceSubtitle=function(e){return o.intl.formatMessage({defaultMessage:"{count, plural, one{<free>Free</free> for {count} day,{br}then {price}} other{<free>Free</free> for {count} days,{br}then {price}}}",description:'This is shown under the radio buttons for users to select payment schedule. It tells users thatthey can try the Dropbox Plus product for free for trial_length days; "then" is followed by price based on the selected schedule. E.g. Free for 14 days, then ¥14,400 / year'},{free:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"plan-info__savings plan-info__savings--zeromargin"},e)},count:t.props.trialLength,br:r.default.createElement("br",null),price:e})},t}return a.__extends(t,e),t.prototype.getPricingStrings=function(){var e,t,a,r,n,s,i,l=this.props.initialPricingStrings;if(l)e=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:l.yearlyPrice}),r=o.intl.formatMessage({defaultMessage:"{price} per year. Save {savings}"},{price:l.yearlyPrice,savings:l.yearlySavings}),t=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:l.monthlyPrice}),n=o.intl.formatMessage({defaultMessage:"{price} per month"},{price:l.monthlyPrice}),a=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:l.yearlyWithoutSavings}),s=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:l.annualPriceAsMonthly}),i=o.intl.formatMessage({defaultMessage:"{price} per month when billed yearly"},{price:l.annualPriceAsMonthly});else{var u=this.props.displayPrices,c=u.yearlyPrice,p=u.monthlyPrice,d=u.yearlySavings,m=u.taxInclusiveYearlyPrice,f=u.taxInclusiveMonthlyPrice,h=u.taxInclusiveYearlySavings;this.props.useAUTaxInclusivePricing?(e=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:m?m.formatCurrency():""}),r=o.intl.formatMessage({defaultMessage:"{price} per year. Save {savings}. Prices include GST"},{price:m?m.formatCurrency():"",savings:h?h.formatCurrency():""}),t=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:f?f.formatCurrency():""}),n=o.intl.formatMessage({defaultMessage:"{price} per month. Includes GST"},{price:f?f.formatCurrency():""}),a=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:f?f.multiply(12).formatCurrency():""}),s=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:m?m.divide(12).formatCurrency():""}),i=o.intl.formatMessage({defaultMessage:"{price} per month when billed yearly"},{price:m?m.divide(12).formatCurrency():""})):(e=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:c?c.formatCurrency():""}),r=o.intl.formatMessage({defaultMessage:"{price} per year. Save {savings}"},{price:c?c.formatCurrency():"",savings:d?d.formatCurrency():""}),t=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:p?p.formatCurrency():""}),n=o.intl.formatMessage({defaultMessage:"{price} per month"},{price:p?p.formatCurrency():""}),a=o.intl.formatMessage({defaultMessage:"{price} / year"},{price:p?p.multiply(12).formatCurrency():""}),s=o.intl.formatMessage({defaultMessage:"{price} / month"},{price:c?c.divide(12).formatCurrency():""}),i=o.intl.formatMessage({defaultMessage:"{price} per month when billed yearly"},{price:c?c.divide(12).formatCurrency():""}))}return{yearlyPrice:e,yearlyPriceAx:r,monthlyPrice:t,monthlyPriceAx:n,yearlyPriceNoSavings:a,yearlyGstIncluded:o.intl.formatMessage({defaultMessage:"(prices include GST)"}),monthlyGstIncluded:o.intl.formatMessage({defaultMessage:"(includes GST)"}),yearlyPricePerMonth:s,yearlyPricePerMonthAx:i}},t.prototype.renderYearlyPlanBlock=function(){var e=this,t=this.props.formData.scheduleId.formattedValue,a=this.getPricingStrings(),l=a.yearlyPrice,u=a.yearlyPriceAx,c=a.yearlyPriceNoSavings,p=a.yearlyGstIncluded,d=a.yearlyPricePerMonth,m=a.yearlyPricePerMonthAx,f=a.monthlyGstIncluded,h=n.default({"plan-info__savings":!0,"plan-info__savings--strike":"en"===this.props.locale}),y="en"===this.props.locale?c:o.intl.formatMessage({defaultMessage:"(includes 2 free months)"}),g=this.props.formData.productPlanType.rawValue===s.ProductPlanType.PLUS&&!this.props.showTrialVersion&&!this.props.showServerViewVersion,_=r.default.createElement("span",{id:"plan-info__label--yearly",className:"plan-info__label plan-info__label--yearly",onClick:function(){return e.onPlanLabelClick(s.ScheduleId.YEARLY)},"aria-hidden":"true"},o.intl.formatMessage({defaultMessage:"Billed Yearly"})),v=g?d:l;return this.props.showPlusTryRedesign&&(v=this.getFreeForTrialDaysThenPriceSubtitle(l),h=n.default({"plan-info__subtitle":!0,"plan-info__savings--strike":"en"===this.props.locale})),r.default.createElement("div",{className:"plan-info__choice plan-info__yearly"},r.default.createElement(i.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--yearly",ariaLabelId:"plan-info__label--yearly",className:"plan-info__radio",labelClassName:"plan-info__container",value:s.ScheduleId.YEARLY.toString(),checked:t===s.ScheduleId.YEARLY,labelSpan:_,onClickOrChange:this.onScheduleChange}),r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},v),r.default.createElement("span",{className:"ax-visually-hidden"},g?m:u),!g&&r.default.createElement("div",{"aria-hidden":"true",className:h},y),this.props.useAUTaxInclusivePricing&&r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},g?f:p))},t.prototype.renderMonthlyPlanBlock=function(){var e=this,t=this.props.formData.scheduleId.formattedValue,a=this.getPricingStrings(),n=a.monthlyPrice,l=a.monthlyPriceAx,u=a.monthlyGstIncluded,c=r.default.createElement("span",{id:"plan-info__label--monthly",className:"plan-info__label plan-info__label--monthly",onClick:function(){return e.onPlanLabelClick(s.ScheduleId.MONTHLY)},"aria-hidden":"true"},o.intl.formatMessage({defaultMessage:"Billed Monthly"})),p=n;return this.props.showPlusTryRedesign&&(p=this.getFreeForTrialDaysThenPriceSubtitle(n)),r.default.createElement("div",{className:"plan-info__choice plan-info__monthly"},r.default.createElement(i.LabeledRadioInput,{name:"schedule_id",inputId:"plan-info__radio--monthly",ariaLabelId:"plan-info__label--monthly",className:"plan-info__radio",labelClassName:"plan-info__container",value:s.ScheduleId.MONTHLY.toString(),checked:t===s.ScheduleId.MONTHLY,labelSpan:c,onClickOrChange:this.onScheduleChange}),r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},p),r.default.createElement("span",{className:"ax-visually-hidden"},l),this.props.useAUTaxInclusivePricing&&r.default.createElement("div",{className:"plan-info__subtitle","aria-hidden":"true"},u))},t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container plan-info"},this.renderYearlyPlanBlock(),r.default.createElement("div",{className:"plan-info__spacer"}),this.renderMonthlyPlanBlock())},t})(r.default.Component);t.ScheduleSelection=l})),define("modules/clean/react/payments/buy/components/payments/cpf_tooltip",["require","exports","tslib","react","modules/core/i18n"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=n.intl.formatMessage({defaultMessage:"The Cadastro de Pessoas Físicas (CPF) is the the Brazilian individual taxpayer registry identification number. It has 11 digits and can be found on your CPF card. It consists of numbers, dots and a dash, as in the following example: 100.001.101-00."}),t=n.intl.formatMessage({defaultMessage:"The Cadastro Nacional da Pessoa Jurídica, or most commonly known as CNPJ, is a number that identifies legal entities and other legal arrangements at the Federal Revenue Service of Brazil. It has functions similar to those of the CPF, the only difference being that it is unique to the use of legal entities. It is a 14-digit number with a certain format, like in the following example: 00.000.000/0001-00"});return r.default.createElement("div",{className:"cpf-tooltip-contents"},r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({defaultMessage:"What is CPF?"})),r.default.createElement("p",null,e),r.default.createElement("p",{className:"cpf-tooltip-contents__header"},n.intl.formatMessage({defaultMessage:"What is CNPJ?"})),r.default.createElement("p",null,t))},t})((r=a.__importDefault(r)).default.Component);t.CPFTooltip=o})),define("modules/clean/react/payments/buy/components/payments/buy_payment_info_section",["require","exports","tslib","react","classnames","modules/clean/react/tooltip","modules/clean/react/image","modules/clean/static_urls","modules/clean/analytics","modules/clean/payments/payment_form/payment_form_spec","modules/clean/payments/skus/constants","modules/clean/payments/validation","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/buy/components/payments/ideal_form","modules/clean/react/payments/buy/components/payments/payment_method_selector","modules/clean/react/payments/buy/components/payments/payment_method_survey","modules/clean/react/payments/buy/components/payments/cpf_tooltip","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/checkout/components/payment_method_form/address_form","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_purchase_full_name","modules/clean/react/payments/common/constants","modules/core/exception"],(function(e,t,a,r,n,o,s,i,l,u,c,p,d,m,f,h,y,g,_,v,S,C,b,E,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),P=a.__importStar(P);var F=(function(t){function F(){var n=null!==t&&t.apply(this,arguments)||this;return n.createPaypalBtn=function(){var t=n.props.braintreeClientToken?n.props.braintreeClientToken:"",r=n.props.actions.updatePayPalNonce;Promise.all([new Promise((function(t,a){e(["braintree-web-client"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["braintree-web-paypal"],t,a)})).then(a.__importStar),new Promise((function(t,a){e(["paypal-api-checkout"],t,a)})).then(a.__importStar)]).then((function(e){var a=e[0],n=e[1],o=e[2].default;a.create({authorization:t},(function(e,t){if(e)P.reportException({err:new Error("Error creating Braintree client: "+e),severity:P.SEVERITY.CRITICAL});else{var a=o;n.create({client:t},(function(e,t){e?P.reportException({err:new Error("Error creating PayPal Checkout: "+e),severity:P.SEVERITY.CRITICAL}):a.Button.render({env:"production",style:{color:"gold",height:35,label:"paypal",shape:"rect",size:"responsive",tagline:!1},funding:{allowed:[a.FUNDING.CARD],disallowed:[a.FUNDING.CREDIT]},payment:function(){return t.createPayment({flow:"vault",enableShippingAddress:!1})},onAuthorize:function(e,a){return t.tokenizePayment(e,(function(e,t){r(t.nonce,t.details.email)}))},onCancel:function(e){},onError:function(e){P.reportException({err:new Error("PayPal Checkout error: "+e),severity:P.SEVERITY.CRITICAL})}},"#paypal-button").then((function(){}))}))}}))}))},n.clearPayPalNonce=function(e){e.preventDefault(),n.props.actions.updatePayPalNonce("","")},n.onCpfNameChange=function(e){n.props.actions.updateCpfName(e.value)},n.onVatBlur=function(e){"ON"===n.props.paymentFormErrorsExperiment&&n.props.actions.showFormFieldErrors(["vat"],"VatBlur"),n.props.actions.blurVat(e.value)},n.onVatChange=function(e){n.props.actions.updateVat(e.value)},n.onCpfBlur=function(e){"ON"===n.props.paymentFormErrorsExperiment&&n.props.actions.showFormFieldErrors(["cpf"],"CpfBlur"),n.props.actions.blurCpf(e.value)},n.onCpfChange=function(e){n.props.actions.updateCpf(e.value)},n.renderPaymentMethodSurvey=function(){var e=n.props.paymentSpec.paymentMethodSurveyOptions(n.props.formData.countryCode.rawValue,n.props.paymentOptionsExperiment);return 0===e.length||void 0===n.props.isPaymentOptionsSurveyOpen||void 0===n.props.actions.openSurvey||void 0===n.props.actions.cancelSurvey||void 0===n.props.actions.submitSurvey?null:r.default.createElement(g.PaymentMethodSurvey,{isSurveyModalOpen:n.props.isPaymentOptionsSurveyOpen,surveyOptions:e,openSurvey:n.props.actions.openSurvey,cancelSurvey:n.props.actions.cancelSurvey,submitSurvey:n.props.actions.submitSurvey})},n}return a.__extends(F,t),F.prototype.componentDidMount=function(){var e=this.props.formData.countryCode.formattedValue,t=this.props.showServerViewVersion;l.ProEventsLogger.log("uj-billing-country",{country:e},void 0,t),"BR"===e&&this.props.showCpf&&l.ProEventsLogger.log("uj-cpf-viewed-field",{},void 0,t),this.props.actions.updateHistory&&this.props.actions.updateHistory(),"ON"===this.props.paymentPayPalV2Flow&&this.props.braintreeClientToken&&this.createPaypalBtn()},F.prototype.prepareForSubmission=function(){return this.props.formData.paymentMethod.formattedValue===u.PaymentMethod.CreditCard?this.creditCardFrame.tokenize():Promise.resolve(!0)},F.prototype.getCreditCardFrame=function(){return this.creditCardFrame},F.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!f.FormValueHelper.isValid(e)&&e.showError?d.intl.formatMessage({defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:p.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},F.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!f.FormValueHelper.isValid(e)&&e.showError?d.intl.formatMessage({defaultMessage:"Please enter a valid CPF number."}):""},F.prototype.renderLocationFields=function(){return r.default.createElement("div",{className:"grid__item"},r.default.createElement(C.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList,psd2AddressFields:this.props.psd2AddressFields,showCpf:this.props.showCpf,showServerViewVersion:this.props.showServerViewVersion,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}),this.renderVatFields(),this.renderCpfInput())},F.prototype.renderVatFields=function(){var e=null;if(this.props.paymentSpec.should_show_vat_for_country(this.props.formData.countryCode.formattedValue)&&this.props.productPlanType===c.ProductPlanType.PROFESSIONAL){var t=this.props.formData.vat.errorState&&this.props.formData.vat.showError,a=p.getVatPrefix(this.props.formData.countryCode.formattedValue),o=n.default({"payment-info__vat-input":!0,"payment-info__vat-input--valid":""!==this.props.formData.vat.formattedValue&&f.FormValueHelper.isValid(this.props.formData.vat)}),s=void 0;"ON"===this.props.paymentFormErrorsExperiment&&(s=this.vatErrorString()),e=r.default.createElement(m.LabeledTextInput,{className:"payment-info__vat",inputClassName:o,containerClassName:"grid__item vat-container",name:"vat",labelText:d.intl.formatMessage({defaultMessage:"VAT number (optional)"}),placeholder:a,hasError:Boolean(t),value:this.props.formData.vat.rawValue,onBlur:this.onVatBlur,onChange:this.onVatChange,errorText:s})}return e},F.prototype.renderCpfInput=function(){var e=null;if(this.props.showCpf&&this.props.paymentSpec.should_require_cpf(this.props.formData.countryCode.formattedValue,this.props.formData.paymentMethod.formattedValue)){var t=this.props.formData.cpf.errorState&&this.props.formData.cpf.showError,a=n.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==this.props.formData.cpf.formattedValue&&f.FormValueHelper.isValid(this.props.formData.cpf)}),l=void 0,u=void 0;this.props.optimizeCpf?(l=r.default.createElement("span",null,d.intl.formatMessage({defaultMessage:"CPF/CNPJ"}),r.default.createElement(o.Tooltip,{position:o.TooltipPosition.RIGHT,tooltip_contents:r.default.createElement(_.CPFTooltip,null),is_focusable:!0},r.default.createElement(s.Image,{className:"cpf-tooltip-icon",src:i.static_url("/static/images/payments/buy/rebrand-info-vflRPzJtZ.png"),srcHiRes:i.static_url("/static/images/payments/buy/rebrand-info@2x-vflc1SGxi.png"),alt:d.intl.formatMessage({defaultMessage:"More information"}),width:15,height:15}))),u=d.intl.formatMessage({defaultMessage:"e.g. 100.001.101-00",description:"This is being used as a placeholder value for a Brazilian payment form field"})):l=d.intl.formatMessage({defaultMessage:"CPF/CNPJ"});var c=void 0;"ON"===this.props.paymentFormErrorsExperiment&&(c=this.cpfErrorString()),e=r.default.createElement("div",{className:"grid__item"},r.default.createElement(m.LabeledTextInput,{className:"",inputClassName:a,containerClassName:"grid__item payment-info__cpf",name:"cpf",labelText:l,hasError:Boolean(t),value:this.props.formData.cpf.rawValue,onBlur:this.onCpfBlur,onChange:this.onCpfChange,placeholder:u,errorText:c}),this.props.showCpfName&&r.default.createElement(m.LabeledTextInput,{className:"",containerClassName:"grid__item",name:"cpf_name",labelText:d.intl.formatMessage({defaultMessage:"Name"}),value:this.props.formData.cpfName.rawValue,onChange:this.onCpfNameChange}))}return e},F.prototype.showPSD2FieldsToUser=function(){return!0===this.props.psd2AddressFields&&this.props.formData.paymentMethod.formattedValue===u.PaymentMethod.CreditCard&&this.props.paymentSpec.should_show_PSD2_address_fields_for_country(this.props.formData.countryCode.formattedValue)},F.prototype.renderPaymentMethodSelector=function(){var e=this.props,t=e.paymentSpec,a=e.formData,n=e.showTrialVersion,o=this.renderPaymentMethodSurvey();return r.default.createElement(r.default.Fragment,null,r.default.createElement(y.PaymentMethodSelector,{paymentSpec:t,paymentMethod:a.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:a.countryCode.rawValue,zipCode:a.zipCode.rawValue,showTrialVersion:n,fullWidth:null!==o}),o)},F.prototype.renderErrors=function(){var e=this.props,t=e.formData,a=e.paymentSpec,n=[];if("ON"===this.props.paymentFormErrorsExperiment)return null;t.nonce.showError&&t.paymentMethod.formattedValue===u.PaymentMethod.CreditCard&&(t.nonce.isCCNValid||n.push(d.intl.formatMessage({defaultMessage:"Please enter a valid credit card number."})),t.nonce.isCCodeValid||n.push(d.intl.formatMessage({defaultMessage:"Please enter a valid CVV."})),t.nonce.isCCExpValid||n.push(d.intl.formatMessage({defaultMessage:"Please enter a valid expiration date."}))),a.showPSD2FieldsToUser(t.paymentMethod.formattedValue,t.countryCode.formattedValue,!!this.props.psd2AddressFields)&&(t.address.errorState&&t.address.showError&&n.push(E.AddressErrorMessage),t.name.errorState&&t.name.showError&&n.push(E.NameErrorMessage),t.city.errorState&&t.city.showError&&n.push(E.CityErrorMessage)),t.paymentMethod.formattedValue===u.PaymentMethod.DirectDeposit&&(t.accountHolderName.errorState&&t.accountHolderName.showError&&n.push(d.intl.formatMessage({defaultMessage:"Please enter the account holder’s name."})),t.iban.errorState&&t.iban.showError&&n.push(d.intl.formatMessage({defaultMessage:"Please enter a valid bank account number."}))),t.paymentMethod.formattedValue===u.PaymentMethod.Ideal&&t.idealBankId.errorState&&t.idealBankId.showError&&n.push(d.intl.formatMessage({defaultMessage:"Please select your bank."}));var o=E.ZipCodeErrorMessage;return!f.FormValueHelper.isValid(t.zipCode)&&t.zipCode.showError&&n.push(o),a.should_show_vat_for_country(t.countryCode.formattedValue)&&t.vat.errorState&&n.push(this.vatErrorString()),t.cpf.errorState&&n.push(this.cpfErrorString()),n.length>0?r.default.createElement("div",{className:"payment-info__errors"},n.map((function(e){return r.default.createElement("div",{key:e},e)}))):null},F.prototype.render=function(){var e=this,t=this.props,n=t.actions,o=t.formData,s=t.idealBanks,i=t.hidePaymentMethodSelector,l=this.renderLocationFields(),c=l;o.paymentMethod.formattedValue===u.PaymentMethod.DirectDeposit?c=r.default.createElement(S.DirectDebitForm,{locationFields:l,formData:o,actions:n,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}):o.paymentMethod.formattedValue===u.PaymentMethod.Ideal&&(c=r.default.createElement(h.IdealForm,{locationFields:l,formData:o,actions:n,idealBanks:s,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}));var p,m="payment-info grid__container",f="grid__item grid__item--large--3-4";return"ON"===this.props.paymentFormErrorsExperiment&&(m="payment-info grid__container inline-errors",f="grid__item grid__item--large--11-12"),"ON"===this.props.paymentPayPalV2Flow&&(p=r.default.createElement("span",{className:"paypal-button-container",hidden:o.paymentMethod.formattedValue!==u.PaymentMethod.PayPal},r.default.createElement("span",{className:"paypal-button-start",hidden:""!==o.payPalNonce.formattedValue},r.default.createElement("label",{className:"input__label"},d.intl.formatMessage({defaultMessage:"Sign into PayPal to continue with this payment method:"})),r.default.createElement("div",{id:"paypal-button"})),r.default.createElement("span",{className:"paypal-button-end",hidden:""===o.payPalNonce.formattedValue},r.default.createElement("span",{id:"paypal-button-account-email"},o.payPalNonce.email),r.default.createElement("br",null),r.default.createElement("a",{href:"#",onClick:this.clearPayPalNonce},d.intl.formatMessage({defaultMessage:"Change PayPal account"}))),r.default.createElement("span",{hidden:!1===o.payPalNonce.showError},r.default.createElement("label",{className:"input__label--error"},d.intl.formatMessage({defaultMessage:"Please select your PayPal account."}))))),r.default.createElement("div",{className:m},!i&&this.renderPaymentMethodSelector(),r.default.createElement("div",{className:f},r.default.createElement(b.CreditCardPurchaseFullNameIfPsd2,a.__assign({},this.props)),r.default.createElement(v.CreditCardFrame,{iframeUrl:this.props.iframeUrl,hidden:o.paymentMethod.formattedValue!==u.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(t){e.creditCardFrame=t},nonce:o.nonce,bin:o.bin,showServerViewVersion:this.props.showServerViewVersion,submitForm:this.props.submitForm,getHeightFromIframe:"ON"===this.props.paymentFormErrorsExperiment,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}),p,c),this.renderErrors())},F})(r.default.Component);t.PaymentInfoSection=F})),define("modules/clean/react/payments/buy/components/payments/order_summary",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/payments/buy/components/payments/tos","modules/clean/react/rebrand/elements/rebrand_buttons","spectrum/button","modules/core/browser","modules/clean/analytics","modules/clean/payments/skus/constants","modules/clean/payments/skus/constants","modules/clean/payments/cash"],(function(e,t,a,r,n,o,s,i,l,u,c,p,d,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),u=a.__importStar(u);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickRedirectToBuy=function(){var e=t.props.showServerViewVersion;c.ProEventsLogger.log("clicked_buy_directly_cta",{},void 0,e),u.redirect(t.props.buyLink)},t}return a.__extends(t,e),t.prototype.getFormattedTaxLines=function(){var e=this.props.currentTransitionPrices,t=e.taxPercentage,a=e.taxAmount;if(a&&a.amount&&t&&t>0){var r=this.getTaxNameForCountry(),n=o.intl.formatNumber(t/100,{style:"percent",maximumFractionDigits:2});return[{taxName:r,formattedAmount:a.toString(),formattedPercent:n}]}return[]},t.prototype.getTaxNameForCountry=function(){return this.props.taxNamesByCountry?this.props.taxNamesByCountry[this.props.currentTransitionPrices.taxCountryCode||"null"]:o.intl.formatMessage({defaultMessage:"Tax"})},t.prototype.renderTaxElement=function(){var e=this.props.showTrialVersion?"order-summary__strike":"";return this.getFormattedTaxLines().map((function(t){return r.default.createElement("div",{key:t.taxName,className:"order-summary__tax grid__item"},o.intl.formatMessage({defaultMessage:"{tax_name} ({tax_percent}):"},{tax_name:t.taxName,tax_percent:t.formattedPercent})," ",r.default.createElement("span",{className:e},o.intl.formatMessage({defaultMessage:"{tax_amount}"},{tax_amount:t.formattedAmount})))}))},t.prototype.renderWithheldTaxElement=function(){var e=this.props.currentTransitionPrices,t=e.withheldTaxAmount,a=e.withheldTaxPercentage,n=this.getTaxNameForCountry();if(t&&t.amount&&a&&a>0){var s=t.toString();return r.default.createElement("div",{className:"order-summary__withheld_tax grid__item"},o.intl.formatMessage({defaultMessage:"Withheld {tax_name} ({tax_percent, number, ::percent .##}): {tax_amount}"},{tax_name:n,tax_percent:a/100,tax_amount:s}))}},t.prototype.renderTotalPriceElement=function(e){var t=this.props.showPlusTryRedesign,n=e.toString(),s=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({defaultMessage:"Billed Now: {total_price}"},{total_price:n})),i={strike:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"order-summary__strike order-summary__padding-left"},e)},free:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",{className:"order-summary__free-price order-summary__padding-left"},e)}},l=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({defaultMessage:"Charged Now: <strike>{total_price}</strike> <free>FREE</free>"},a.__assign(a.__assign({},i),{total_price:n})));return t&&(l=r.default.createElement("div",{className:"order-summary__price grid__item"},o.intl.formatMessage({defaultMessage:"Billed now: <free>{free_price}</free>"},a.__assign(a.__assign({},i),{free_price:new m.Cash(0,e.currency).toString()})))),this.props.showTrialVersion?l:s},t.prototype.renderCTA=function(){var e=this.props,t=e.loadingPrices,a=e.pageState,s=e.showTrialVersion,u=e.showServerViewVersion,c=e.showPlusTryRedesign,p=e.trialLength,d=e.onTryClick,m=e.onClick,f=t||a.submitting,h=n.default({"button--submit":!0,"button--loading":f,grid__item:!0,"order-summary__button":!0}),y=s?o.intl.formatMessage({defaultMessage:"Start your free trial"}):o.intl.formatMessage({defaultMessage:"Buy now"});u&&!s&&(y=o.intl.formatMessage({defaultMessage:"Get {plan} now"},{plan:this.props.planNamePrefixedWithDropbox})),c&&(y=o.intl.formatMessage({defaultMessage:"Try free for {trialLength} days"},{trialLength:p}));var g=y;f&&(g=r.default.createElement("div",{className:"loader"},r.default.createElement("span",{className:"loader__dot"}),r.default.createElement("span",{className:"loader__dot"}),r.default.createElement("span",{className:"loader__dot"})));var _=s?d:m;return u?r.default.createElement(l.Button,{"aria-label":y,variant:"primary",size:"default",type:"submit",className:h,onClick:_,disabled:f,"data-uxa-log":"order-summary-submit-button"},g):r.default.createElement(i.RebrandButton,{ariaLabel:y,importance:"primary",size:"medium",type:"submit",className:h,onClick:_,disabled:f,"data-uxa-log":"order-summary-submit-button"},g)},t.prototype.renderError=function(){var e=this.props.pageState.hasFormError;"ON"===this.props.paymentFormErrorsExperiment&&(e=!!this.props.pageState.showBuyClickError);var t=n.default({"form-error":!0,"form-error--enabled":e});return r.default.createElement("p",{className:t,"aria-live":"assertive"},o.intl.formatMessage({defaultMessage:"Please correct the form errors and try again"}))},t.prototype.render=function(){var e,t,a=this.props,i=a.actions,u=a.formData,c=a.showServerViewVersion,m=a.promoSpec,f=this.props.currentTransitionPrices.totalPrice,h=this.props.currentTransitionPrices.currency;f&&(e=this.renderTotalPriceElement(f),t=f.formatCurrency());var y,g=this.renderTaxElement(),_=this.renderWithheldTaxElement();h&&t&&(y=r.default.createElement(s.TermsOfService,{actions:i,currency:h,formData:u,totalPrice:t,showTrialVersion:this.props.showTrialVersion,showServerViewVersion:c||!1,paymentFormErrorsExperiment:this.props.paymentFormErrorsExperiment}));var v=this.props.loadingPrices||this.props.pageState.submitting,S=n.default({"button-as-link":!0,"order-summary__button":!0,"order-summary__buy-button":!0,grid__item:!0,"order-summary__buy-button-disabled":v,"ProTryServerView__secondary-button":this.props.showServerViewVersion}),C=r.default.createElement("button",{className:S,onClick:this.onClickRedirectToBuy,"data-uxa-log":"order-summary-go-to-buy"},o.intl.formatMessage({defaultMessage:"Or buy {plan} now"},{plan:this.props.planNamePrefixedWithDropbox}));this.props.showServerViewVersion&&(C=r.default.createElement(l.Button,{variant:"borderless",className:"ProTryServerView__secondary-button",onClick:this.onClickRedirectToBuy},o.intl.formatMessage({defaultMessage:"Buy {plan} now"},{plan:this.props.planNamePrefixedWithDropbox})));var b=n.default({"ProTryServerView__order-summary":c,"order-summary":!0,grid__container:!0}),E=n.default({"ProTryServerView__order-card":c,"order-summary__card":!this.props.formVariant||"row"===this.props.formVariant,"order-summary__card-no-border":"column"===this.props.formVariant,grid__item:!0}),P="blue";this.props.productPlanType===d.ProductPlanType.PLUS&&(P="black");var F="column"===this.props.formVariant||c?null:r.default.createElement("div",{className:"card-top card-top--"+P+" grid__item"}),w=m&&m.freeMonths&&u.scheduleId.formattedValue===p.ScheduleId.YEARLY?r.default.createElement("div",{className:"promo-highlight"},o.intl.formatMessage({defaultMessage:"<span>+ {free_months} months free</span> with your first year"},{free_months:m.freeMonths,span:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("span",null,e)}})):null;return r.default.createElement("div",{className:b},F,r.default.createElement("div",{className:E},r.default.createElement("div",{className:"order-summary__plan-name grid__item"},this.props.planNamePrefixedWithDropbox),r.default.createElement("div",{className:"order-summary__line-items grid__item"},g,_,e,w),y,this.renderCTA(),this.props.showTrialVersion?C:void 0,this.renderError()))},t})(r.default.Component);t.OrderSummary=f})),define("modules/clean/react/payments/buy/components/payments/worldpay_entity_info",["require","exports","tslib","react"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:"grid__container payment-entity-info__text"},r.default.createElement("p",null,"Dropbox International Unlimited Company",r.default.createElement("br",null),"One Park Place / Hatch Street Upper / Dublin 2 / Ireland"))},t})((r=a.__importDefault(r)).default.Component);t.WorldPayEntityInfo=n})),define("modules/clean/react/payments/buy/helpers/pricing_value_helper",["require","exports","modules/clean/payments/skus/constants"],(function(e,t,a){"use strict";function r(e,t,a,r){return e.filter((function(e){var n=e.finalSubState.plan,o=e.finalSubState.billingSchedule,s=!!e.finalSubState.addons.skus.length;return n&&n.productType===t&&o&&o.id===a&&s===r})).pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayPrices=function(e,t,n){var o,s,i,l,u,c;if(e){var p=r(e,t.productPlanType.formattedValue,a.ScheduleId.MONTHLY,!1),d=r(e,t.productPlanType.formattedValue,a.ScheduleId.YEARLY,!1),m=void 0,f=void 0;if(n?(d&&(o=(m=d.tvm).getTotalPrice(),l=m.getBilledPrice()),p&&(s=(f=p.tvm).getTotalPrice(),u=f.getBilledPrice())):(d&&(o=d.nextBillingSummary.base,l=d.nextBillingSummary.total),p&&(s=p.nextBillingSummary.base,u=p.nextBillingSummary.total)),o&&s){var h=s.multiply(12).subtract(o);i=h.amount>0?h:void 0}if(l&&u){var y=u.multiply(12).subtract(l);c=y.amount>0?y:void 0}}return{yearlyPrice:o,monthlyPrice:s,yearlySavings:i,taxInclusiveYearlyPrice:l,taxInclusiveMonthlyPrice:u,taxInclusiveYearlySavings:c}},t.getCurrentTransitionPrices=function(e,t){var a,n,o,s,i,l,u,c;if(e&&(a=r(e,t.productPlanType.formattedValue,t.scheduleId.formattedValue,!!t.evh.rawValue)),a&&a.tvm){var p=a.tvm;n=p.getTotalPrice(),o=p.getTaxCountryCode(),s=p.getTaxPercentage(),i=p.getTaxPrice(),l=p.getCurrency(),u=p.getTotalTaxWithheld(),c=p.getWithheldTaxPercentage()}return{totalPrice:n,taxCountryCode:o,taxPercentage:s,taxAmount:i,currency:l,withheldTaxAmount:u,withheldTaxPercentage:c}}})),define("modules/clean/react/payments/buy/components/payments/ideal_form",["require","exports","tslib","react","modules/clean/react/payments/buy/components/inputs/inputs","modules/core/i18n","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onIdealBankChange=function(e){var a=e.value,r=t.props.idealBanks[a];t.props.actions.updateIdealBank({bankId:a,bankName:r})},t.onIdealBankBlur=function(e){"ON"===t.props.paymentFormErrorsExperiment&&t.props.actions.showFormFieldErrors(["idealBankId"],"IdealBankBlur")},t.idealErrorString=function(){var e=t.props.formData.idealBankId;return!s.FormValueHelper.isValid(e)&&e.showError?o.intl.formatMessage({defaultMessage:"Please select your bank."}):""},t}return a.__extends(t,e),t.prototype.render=function(){var e,t=this.props,a=t.formData,s=t.idealBanks,i=o.intl.formatMessage({defaultMessage:"Note: We’ll use your bank information provided by iDEAL for all future billing cycles. If your bank is not listed, then please select a different payment method."}),l=a.idealBankId.errorState&&a.idealBankId.showError;return"ON"===this.props.paymentFormErrorsExperiment&&(e=this.idealErrorString()),r.default.createElement("div",{className:"ideal-container"},r.default.createElement("div",{className:"ideal-fields"},r.default.createElement(n.LabeledSelectInput,{name:"ideal_bank",labelText:o.intl.formatMessage({defaultMessage:"Bank"}),value:a.idealBankId.rawValue,onChange:this.onIdealBankChange,onBlur:this.onIdealBankBlur,hasError:Boolean(l),errorText:e},r.default.createElement("option",{value:"",key:"default","aria-selected":""===a.idealBankId.rawValue},o.intl.formatMessage({defaultMessage:"Select your bank..."})),Object.keys(s).map((function(e){return r.default.createElement("option",{value:e,key:e,"aria-selected":a.idealBankId.rawValue===e},s[e])})))),this.props.locationFields,r.default.createElement("div",{className:"ideal-note"},i))},t})((r=a.__importDefault(r)).default.Component);t.IdealForm=i})),define("modules/clean/react/payments/buy/components/payments/payment_method_input",["require","exports","tslib","react","classnames","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/inputs/inputs"],(function(e,t,a,r,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n);var i=(function(e){function t(t){var a=e.call(this,t)||this;return a.focus=function(){null!==a.labeledRadioInput.current&&a.labeledRadioInput.current.focus()},a.onChange=function(){a.props.onSelected(a.props.paymentMethod)},a.getPaymentMethodId=function(e){switch(e){case o.PaymentMethod.CreditCard:return"creditcard";case o.PaymentMethod.PayPal:return"paypal";case o.PaymentMethod.Ideal:return"ideal";case o.PaymentMethod.DirectDeposit:return"debit";default:return e}},a.labeledRadioInput=r.default.createRef(),a}return a.__extends(t,e),t.prototype.render=function(){var e=this.getPaymentMethodId(this.props.paymentMethod);return r.default.createElement("div",{className:n.default({"payment-info__option":!0,"full-width":this.props.fullWidth,"no-margin-bottom":this.props.noMarginBottom,"grid__item--expand":this.props.fullWidth,"grid__item--shrink":!this.props.fullWidth,"grid--y-middle":!0})},r.default.createElement(s.LabeledRadioInput,{ref:this.labeledRadioInput,name:this.props.name,className:"payment-info__payment",inputId:"payment-method-radio#"+e,ariaLabelId:"payment-method-label#"+e,value:this.props.paymentMethod.toString(),checked:this.props.selected,onClickOrChange:this.onChange,labelSpan:r.default.createElement(l,{id:e,textTitle:this.props.textTitle,title:this.props.title,icons:this.props.icons,onClick:this.onChange})}))},t})(r.default.Component);t.PaymentMethodInput=i;var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e,t=this;return r.default.createElement("span",{className:"payment-info__method-label",onClick:this.props.onClick},r.default.createElement("span",{id:"payment-method-label#"+this.props.id,"aria-hidden":"true",className:n.default((e={"ax-visually-hidden":this.props.icons},e[this.props.id]=!this.props.icons,e)),title:this.props.textTitle},this.props.title),this.props.icons&&this.props.icons.map((function(e){return r.default.createElement("span",{key:"payment-method-icon#"+e,className:e,title:t.props.icons&&t.props.icons.length>1?e:t.props.title})})))},t})(r.default.Component)})),define("modules/clean/react/payments/buy/components/payments/payment_method_selector",["require","exports","tslib","react","modules/core/i18n","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/buy/components/payments/payment_method_input"],(function(e,t,a,r,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onPaymentMethodSelected=function(e){t.props.updatePaymentMethod(e)},t}return a.__extends(t,e),t.prototype.getLabelForMethodId=function(e){if(e===o.PaymentMethod.CreditCard){var t=this.props.paymentSpec.supported_credit_cards_for_country(this.props.countryCode);return r.default.createElement(s.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.CreditCard,selected:this.props.paymentMethod===o.PaymentMethod.CreditCard,onSelected:this.onPaymentMethodSelected,icons:t,fullWidth:this.props.fullWidth,title:n.intl.formatMessage({defaultMessage:"Credit card. We accept {payment_methods}."},{payment_methods:t.join(", ").replace("_","-")})})}return e===o.PaymentMethod.PayPal?r.default.createElement(s.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.PayPal,selected:this.props.paymentMethod===o.PaymentMethod.PayPal,onSelected:this.onPaymentMethodSelected,icons:["paypal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({defaultMessage:"Paypal"})}):e===o.PaymentMethod.DirectDeposit?r.default.createElement(s.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.DirectDeposit,selected:this.props.paymentMethod===o.PaymentMethod.DirectDeposit,onSelected:this.onPaymentMethodSelected,title:n.intl.formatMessage({defaultMessage:"Direct Debit"}),fullWidth:this.props.fullWidth}):e===o.PaymentMethod.Ideal?r.default.createElement(s.PaymentMethodInput,{name:"payment_method",key:"payment-method#"+e,paymentMethod:o.PaymentMethod.Ideal,selected:this.props.paymentMethod===o.PaymentMethod.Ideal,onSelected:this.onPaymentMethodSelected,icons:["ideal"],fullWidth:this.props.fullWidth,title:n.intl.formatMessage({defaultMessage:"iDEAL"})}):null},t.prototype.render=function(){var e=this,t=this.props,a=t.countryCode,o=t.paymentSpec,s=(t.showTrialVersion?o.only_default_payment_methods():o.available_payment_methods_for_country(a)).map((function(t){return e.getLabelForMethodId(t)}));return r.default.createElement("div",{className:"payment-info__selector grid__container"},r.default.createElement("span",{className:"ax-visually-hidden"},n.intl.formatMessage({defaultMessage:"Select a payment method"})),s)},t})((r=a.__importDefault(r)).default.Component);t.PaymentMethodSelector=i})),define("modules/clean/react/payments/buy/components/payments/payment_method_survey",["require","exports","tslib","react","spectrum/modal","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/react/payments/buy/components/payments/payment_method_input","modules/clean/payments/payment_form/payment_form_spec"],(function(e,t,a,r,n,o,s,i,l){"use strict";var u,c;Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),(function(e){e[e.Icon=0]="Icon",e[e.Text=1]="Text",e[e.Other=2]="Other"})(c||(c={}));var p=((u={})[l.PaymentMethodSurveyOption.DirectDebit]={type:c.Icon,title:o.intl.formatMessage({defaultMessage:"Direct Debit"})},u[l.PaymentMethodSurveyOption.ApplePay]={type:c.Icon,title:o.intl.formatMessage({defaultMessage:"Apple Pay"})},u[l.PaymentMethodSurveyOption.GooglePay]={type:c.Icon,title:o.intl.formatMessage({defaultMessage:"Google Pay"})},u[l.PaymentMethodSurveyOption.ACH]={type:c.Text,title:o.intl.formatMessage({defaultMessage:"ACH / eCheck (Bank transfer)"}),textTitle:o.intl.formatMessage({defaultMessage:"Pay by bank transfer with your bank account and routing numbers."})},u[l.PaymentMethodSurveyOption.Other]={type:c.Other,title:o.intl.formatMessage({defaultMessage:"Other"})},u),d=(function(e){function t(t){var a=e.call(this,t)||this;return a.openSurvey=function(){a.props.openSurvey(a.props.surveyOptions[0])},a.closeSurvey=function(){a.state.isSurveySubmitted||a.props.cancelSurvey(a.props.surveyOptions[0])},a.submitSurvey=function(e,t){a.props.submitSurvey(a.props.surveyOptions[0],e,t),a.setState({isSurveySubmitted:!0})},a.state={isSurveySubmitted:!1},a}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:"survey-link-container grid__item--expand"},r.default.createElement(m,{isSurveySubmitted:this.state.isSurveySubmitted,openSurvey:this.openSurvey}),r.default.createElement(f,{isSurveyModalOpen:this.props.isSurveyModalOpen,surveyOptions:this.props.surveyOptions,closeSurvey:this.closeSurvey,submitSurvey:this.submitSurvey}))},t})(r.default.Component);t.PaymentMethodSurvey=d;var m=function(e){var t=e.isSurveySubmitted,a=e.openSurvey;return t?r.default.createElement("span",{className:"thanks-msg"},o.intl.formatMessage({defaultMessage:"Thanks for your feedback!"})):r.default.createElement("button",{className:"button-as-link",onClick:a,type:"button"},o.intl.formatMessage({defaultMessage:"Want another way to pay?"}))},f=(function(e){function t(t){var a=e.call(this,t)||this;return a.handlePress=function(e){"Enter"===e.key&&e.target instanceof Element&&"INPUT"===e.target.tagName&&(e.preventDefault(),a.submitSurvey())},a.focusOnRadioInput=function(){null!==a.paymentMethodInput.current&&a.paymentMethodInput.current.focus()},a.onModalReady=function(){a.focusOnRadioInput(),document.addEventListener("keypress",a.handlePress);var e=document.querySelector(".survey-modal-overlay .mc-util-modal-body");e instanceof HTMLElement&&(e.tabIndex=-1)},a.closeModal=function(){a.props.closeSurvey(),document.removeEventListener("keypress",a.handlePress)},a.onSelectedValueChange=function(e){a.setState({selectedValue:e})},a.onOtherValueChange=function(e){a.setState({otherValue:e.value})},a.onOtherValueFocus=function(e){a.setState({selectedValue:l.PaymentMethodSurveyOption.Other})},a.submitSurvey=function(){a.props.submitSurvey(a.state.selectedValue,a.state.otherValue)},a.paymentMethodInput=r.default.createRef(),a.state={selectedValue:t.surveyOptions[0],otherValue:""},a}return a.__extends(t,e),t.prototype.render=function(){var e=this;return r.default.createElement(n.UtilityModal,{appElement:document.body,ariaLabel:o.intl.formatMessage({defaultMessage:"Payment options feedback"}),displayCloseButton:!0,onPrimaryAction:this.submitSurvey,onReady:this.onModalReady,onRequestClose:this.closeModal,onSecondaryAction:this.closeModal,open:this.props.isSurveyModalOpen,overlayClassName:"survey-modal-overlay",overlayClickClose:!0,primaryAction:o.intl.formatMessage({defaultMessage:"Submit feedback"}),secondaryAction:o.intl.formatMessage({defaultMessage:"Cancel"}),shouldRequestCloseOnActions:!1,title:o.intl.formatMessage({defaultMessage:"We’d love your feedback!"})},r.default.createElement("p",null,o.intl.formatMessage({defaultMessage:"We’re working to add more payment options to Dropbox in the future. What method works best for you?"})),r.default.createElement("form",{className:"payment-info-survey"},this.props.surveyOptions.map((function(t){return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.PaymentMethodInput,{ref:e.state.selectedValue===t?e.paymentMethodInput:void 0,name:"payment_method_survey",key:"payment-method#"+t,paymentMethod:t,selected:e.state.selectedValue===t,onSelected:e.onSelectedValueChange,icons:p[t].type===c.Icon?[t]:void 0,title:p[t].title,fullWidth:!0,noMarginBottom:p[t].type===c.Other,textTitle:p[t].textTitle}),p[t].type===c.Other&&r.default.createElement("div",{className:"other-value-container"},r.default.createElement(s.LabeledTextInput,{containerClassName:"grid__container",className:"other-label",inputClassName:"other-input grid__item--expand grid__item--small--3-4 grid__item--medium--5-8",labelText:o.intl.formatMessage({defaultMessage:"Add your preferred payment method"}),name:"other_value",value:e.state.otherValue,onChange:e.onOtherValueChange,onFocus:e.onOtherValueFocus})))}))))},t})(r.default.Component)})),define("modules/clean/react/payments/buy/components/payments/tos",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/payments/buy/components/inputs/inputs","modules/clean/payments/skus/constants","modules/clean/server_side_client_view_bridge","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),i=a.__importStar(i);var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTermsAndServiceChange=function(e){t.props.actions.updateTermsAndService(Boolean(!e.checked))},t.onTermsAndServiceBlur=function(e){"ON"===t.props.paymentFormErrorsExperiment&&t.props.actions.showFormFieldErrors(["termsAndService"],"TermsAndServiceBlur")},t.onTOSLabelClick=function(e){var a=t.props.formData.termsAndService.formattedValue;t.props.actions.updateTermsAndService(Boolean(!a))},t.onLinkClick=function(e){t.props.showServerViewVersion&&(e.preventDefault(),e.stopPropagation(),i.OpenUncredentialedBrowserWithDropboxURL(e.currentTarget.getAttribute("href")))},t}return a.__extends(t,e),t.prototype.termsAndServiceErrorString=function(){var e=this.props.formData.termsAndService;return!l.FormValueHelper.isValid(e)&&e.showError?n.intl.formatMessage({defaultMessage:"Please agree to the terms of service."}):""},t.prototype.componentDidMount=function(){this.props.showServerViewVersion&&i.init()},t.prototype.renderLegalTermsBuy=function(){var e=this,t=this.props,a=t.currency,o=t.formData,i=t.totalPrice;return n.intl.formatMessage({defaultMessage:"You’ll be charged {total_price} {schedule} until you <link_cancel>cancel</link_cancel> your subscription. Previous charges <link_refund>won’t be refunded</link_refund> when you cancel <link_required>unless it’s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{total_price:i,schedule:o.scheduleId.rawValue===s.ScheduleId.MONTHLY?n.intl.formatMessage({defaultMessage:"monthly"}):n.intl.formatMessage({defaultMessage:"yearly"}),currency:a,link_cancel:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/158",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_refund:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_required:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/help/9069",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)}})},t.prototype.renderLegalTermsTrial=function(){var e=this,t=this.props,a=t.currency,o=t.formData,i=t.totalPrice;return n.intl.formatMessage({defaultMessage:"Your free trial ends on {trial_end_date}. If you don’t <link_cancel>cancel</link_cancel> your free trial by that date, we’ll charge you {total_price} {schedule} (taxes included) until you cancel your plan. Charges <link_refund>won’t be refunded</link_refund> when you cancel, <link_required>unless it’s legally required</link_required>. Your payment data is encrypted and secure. All amounts shown are in {currency}."},{trial_end_date:o.trialEndDate.rawValue,total_price:i,schedule:o.scheduleId.rawValue===s.ScheduleId.MONTHLY?n.intl.formatMessage({defaultMessage:"monthly"}):n.intl.formatMessage({defaultMessage:"yearly"}),link_cancel:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"cancel-article",key:"tos-cancel",href:"/help/space/cancel-plus",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_refund:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"refund-article",key:"tos-refund",href:"/help/billing/plus-refund",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},link_required:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__link","aria-label":"requirements-article",key:"tos-required",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},currency:a})},t.prototype.render=function(){var e=this,t=this.props.formData,a=this.props.showTrialVersion?this.renderLegalTermsTrial():this.renderLegalTermsBuy(),s=n.intl.formatMessage({defaultMessage:"I agree to the <link>Dropbox Terms</link>{br}and the <strong>Automatic Renewal Terms</strong> above"},{link:function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return r.default.createElement("a",{className:"terms-info__tos--terms-link","aria-label":"terms",key:"link_dbx",href:"/terms",target:"_blank",rel:"noopener noreferrer",onClick:e.onLinkClick},t)},br:r.default.createElement("br",null),strong:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.default.createElement("strong",null,e)}}),i=r.default.createElement("span",{className:"type--copy-small",onClick:this.onTOSLabelClick},s),l=r.default.createElement(o.LabeledCheckboxInput,{checked:t.termsAndService.rawValue,containerClassName:"grid__item terms-info__tos",className:"billing-terms-and-service",errorText:this.termsAndServiceErrorString(),labelText:i,name:"tos_agree",onClick:this.onTermsAndServiceChange,onBlur:this.onTermsAndServiceBlur});return r.default.createElement("div",{className:"terms-info"},r.default.createElement("p",{className:"terms-info__legal"},a),l)},t})(r.default.Component);t.TermsOfService=u})),define("modules/clean/react/payments/common/middleware/captcha_visibility_checker",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(e){var t=this;this.POLLING_FREQUENCY_MS=500,this.checkCaptchaVisibility=function(){t.isCheckingCaptchaVisibility&&(t.isCaptchaVisible=t.getCaptchaVisibility(),t.isCaptchaVisible?(t.isCheckingCaptchaVisibility=!1,t.onCaptchaVisibility(!0)):setTimeout(t.checkCaptchaVisibility,t.POLLING_FREQUENCY_MS))},this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1,this.onCaptchaVisibility=e,this.wasLastCaptchaSubmitVisible=!1}return e.prototype.triggerCaptcha=function(){this.isCheckingCaptchaVisibility=!0,this.checkCaptchaVisibility()},e.prototype.submitCaptcha=function(){this.isCaptchaVisible||this.onCaptchaVisibility(!1),this.wasLastCaptchaSubmitVisible=this.isCaptchaVisible,this.isCaptchaVisible=!1,this.isCheckingCaptchaVisibility=!1},e.prototype.getCaptchaVisibility=function(){var e=document.querySelector('iframe[src^="https://www.google.com/recaptcha/api2/bframe"]');return null!==e&&null!==e.parentElement&&null!==e.parentElement.parentElement&&"visible"===e.parentElement.parentElement.style.visibility},e})();t.CaptchaVisibilityChecker=a})),define("modules/clean/react/payments/common/middleware/payments_ux_logger",["require","exports","tslib","modules/clean/payments/three_ds_helper","modules/clean/payments/payment_form/payment_form_spec","modules/clean/logging/telemetry","modules/core/exception","modules/clean/logging/hive/schemas/web-payments_ux_analytics","modules/clean/react/payments/common/form_values","modules/clean/react/payments/common/form/actions/actions","modules/clean/react/payments/common/middleware/captcha_visibility_checker"],(function(e,t,a,r,n,o,s,i,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importStar(o),s=a.__importStar(s);var p=new Set(["BlurAccountHolderName","BlurAddress","BlurCity","BlurCpf","BlurIBAN","BlurName","BlurVat","BlurZipCode","UpdateCountryCode","UpdateIdealBank","UpdateMandateSigned","UpdatePaymentMethod"]),d=(function(){function e(e,t){var a=this;this.reduxMiddleware=function(e){return function(t){return function(r){var n=e.getState(),o=t(r);try{var i=e.getState();a.handleAction(r,i,n)}catch(e){s.reportException({err:e,severity:s.SEVERITY.CRITICAL,tags:["payments_ux_logger","payment"]})}return o}}},this.onCaptchaVisibility=function(e){var t={challenge_type:e?i.ChallengeType.ShownCaptcha:i.ChallengeType.SuppressedCaptcha,origin_submit_seq:a.originSubmitSeq.toString()};a.actionSeq++,a.logChallengeStart(t)},this.requestSeq=-1,this.actionSeq=-1,this.originSubmitSeq=0,this.requestId=e,this.logger=new o.HiveLogger,this.captchaVisibilityChecker=new c.CaptchaVisibilityChecker(this.onCaptchaVisibility),this.platform=t}return e.prototype.handleAction=function(e,t,a){var o,s,l,c;if(this.isPageView(e)){var p=((o={})[i.FormFields.CountryCode]=t.formData.countryCode.rawValue,o[i.FormFields.PaymentMethod]=n.PaymentMethod[t.formData.paymentMethod.rawValue],o);this.requestSeq++,this.actionSeq=0,this.logPageView(p)}else if(this.isFormFieldChange(e)){null!==(p=this.getFormFieldChangeDetails(e.type,t.formData,a.formData))&&(this.actionSeq++,this.logFormFieldChange(p))}else if(this.isCCFormFieldChange(e)){null!==(p=this.getCCFormFieldChangeDetails(e.creditCardIframeFields))&&(this.actionSeq++,this.logFormFieldChange(p))}else if(this.isShowFormFieldErrors(e)){if(this.isErrorFromSubmitForm(e)){p=this.getFormValidationErrorDetails(t.formData);this.actionSeq++,this.logFormValidationError(p)}}else if(this.isSubmitFormSuccess(e)){p=this.getFormSubmitEventDetails(u.SubmitFormTriggerType.ButtonClick,t.formData,a.pageState.submitSeq);this.actionSeq++,this.logFormSubmitSuccess(p)}else if(this.isSubmitFormStart(e)){p=this.getFormSubmitEventDetails(e.trigger,t.formData,a.pageState.submitSeq);this.actionSeq++,this.logFormSubmit(p)}else if(this.isTriggerCaptcha(e))this.captchaVisibilityChecker.triggerCaptcha();else if(this.isSubmitCaptcha(e)){this.captchaVisibilityChecker.submitCaptcha();p={challenge_type:this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?i.ChallengeType.ShownCaptcha:i.ChallengeType.SuppressedCaptcha,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(p)}else if(this.isTriggerThreeDsChallenge(e)){p={challenge_type:i.ChallengeType.ThreeDsChallenge,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(p)}else if(this.isTriggerThreeDsFingerprint(e)){p={challenge_type:i.ChallengeType.ThreeDsFingerprint,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeStart(p)}else if(this.isUpdateThreeDsData(e)){if(""!==e.value){var d=JSON.parse(e.value),m=void 0;if(d.resultType===r.ThreeDsResultType.IdentifyShopper)m=i.ChallengeType.ThreeDsFingerprint;else{if(d.resultType!==r.ThreeDsResultType.ChallengeShopper)return;m=i.ChallengeType.ThreeDsChallenge}p={challenge_type:m,origin_submit_seq:this.originSubmitSeq.toString()};this.actionSeq++,this.logChallengeSubmit(p)}}else if(this.isOpenSurvey(e)){p=((s={})[i.FormFields.CountryCode]=t.formData.countryCode.rawValue,s.defaultValue=e.defaultValue,s);this.actionSeq++,this.logOpenSurvey(p)}else if(this.isCancelSurvey(e)){p=((l={})[i.FormFields.CountryCode]=t.formData.countryCode.rawValue,l.defaultValue=e.defaultValue,l);this.actionSeq++,this.logCancelSurvey(p)}else if(this.isSubmitSurvey(e)){p=((c={})[i.FormFields.CountryCode]=t.formData.countryCode.rawValue,c.defaultValue=e.defaultValue,c.value=e.value,c.other=e.other,c.email=t.formData.email.rawValue,c);this.actionSeq++,this.logSubmitSurvey(p)}},e.prototype.logPageView=function(e){this.log(i.PaymentsUXEvent.PageView,e)},e.prototype.logFormFieldChange=function(e){this.log(i.PaymentsUXEvent.FormFieldChange,e)},e.prototype.logFormValidationError=function(e){this.log(i.PaymentsUXEvent.FormValidationError,e)},e.prototype.logFormSubmitSuccess=function(e){this.log(i.PaymentsUXEvent.FormSubmitSuccess,e)},e.prototype.logFormSubmit=function(e){this.log(i.PaymentsUXEvent.FormSubmit,e)},e.prototype.logChallengeStart=function(e){this.log(i.PaymentsUXEvent.ChallengeStart,e)},e.prototype.logChallengeSubmit=function(e){this.log(i.PaymentsUXEvent.ChallengeSubmit,e)},e.prototype.logOpenSurvey=function(e){this.log(i.PaymentsUXEvent.OpenSurvey,e)},e.prototype.logCancelSurvey=function(e){this.log(i.PaymentsUXEvent.CancelSurvey,e)},e.prototype.logSubmitSurvey=function(e){this.log(i.PaymentsUXEvent.SubmitSurvey,e)},e.prototype.log=function(e,t){this.logger.log(new i.PaymentsUXAnalyticsRow({event_name:e,event_details:t,request_id:this.requestId,request_seq:this.requestSeq,action_seq:this.actionSeq,platform:this.platform}))},e.prototype.isPageView=function(e){return"UpdateHistory"===e.type},e.prototype.isFormFieldChange=function(e){return p.has(e.type)},e.prototype.isShowFormFieldErrors=function(e){return"ShowFormFieldErrors"===e.type},e.prototype.isErrorFromSubmitForm=function(e){return"SubmitForm"===e.origin},e.prototype.isSubmitFormStart=function(e){return"SubmitFormStart"===e.type},e.prototype.isSubmitFormSuccess=function(e){return"SubmitFormSuccess"===e.type},e.prototype.isTriggerCaptcha=function(e){return"TriggerCaptcha"===e.type},e.prototype.isSubmitCaptcha=function(e){return"SubmitCaptcha"===e.type},e.prototype.isTriggerThreeDsChallenge=function(e){return"TriggerThreeDsChallenge"===e.type},e.prototype.isTriggerThreeDsFingerprint=function(e){return"TriggerThreeDsFingerprint"===e.type},e.prototype.isUpdateThreeDsData=function(e){return"UpdateThreeDsData"===e.type},e.prototype.isOpenSurvey=function(e){return"OpenSurvey"===e.type},e.prototype.isCancelSurvey=function(e){return"CancelSurvey"===e.type},e.prototype.isSubmitSurvey=function(e){return"SubmitSurvey"===e.type},e.prototype.isCCFormFieldChange=function(e){return"BlurCCField"===e.type},e.prototype.getFormFieldChangeDetails=function(e,t,a){switch(e){case"BlurAccountHolderName":return{field:i.FormFields.SepaAccountHolderName,value:t.accountHolderName.rawValue,error_state:l.InputErrorState[t.accountHolderName.errorState],show_error:t.accountHolderName.showError.toString()};case"BlurAddress":return{field:i.FormFields.Address,value:t.address.rawValue,error_state:l.InputErrorState[t.address.errorState],show_error:t.address.showError.toString()};case"BlurCity":return{field:i.FormFields.City,value:t.city.rawValue,error_state:l.InputErrorState[t.city.errorState],show_error:t.city.showError.toString()};case"BlurCpf":return{field:i.FormFields.Cpf,value:t.cpf.rawValue,error_state:l.InputErrorState[t.cpf.errorState],show_error:t.cpf.showError.toString()};case"BlurIBAN":return{field:i.FormFields.Iban,value:t.iban.rawValue,error_state:l.InputErrorState[t.iban.errorState],show_error:t.iban.showError.toString()};case"BlurName":return{field:i.FormFields.CardholderName,value:t.name.rawValue,error_state:l.InputErrorState[t.name.errorState],show_error:t.name.showError.toString()};case"BlurVat":return{field:i.FormFields.Vat,value:t.vat.rawValue,error_state:l.InputErrorState[t.vat.errorState],show_error:t.vat.showError.toString()};case"BlurZipCode":return{field:i.FormFields.ZipCode,value:t.zipCode.rawValue,error_state:l.InputErrorState[t.zipCode.errorState],show_error:t.zipCode.showError.toString()};case"UpdateCountryCode":return a.countryCode.rawValue!==t.countryCode.rawValue?{field:i.FormFields.CountryCode,value:t.countryCode.rawValue,error_state:l.InputErrorState[t.countryCode.errorState],show_error:t.countryCode.showError.toString()}:null;case"UpdateIdealBank":return a.idealBankId.rawValue!==t.idealBankId.rawValue?{field:i.FormFields.IdealBankId,value:t.idealBankId.rawValue,error_state:l.InputErrorState[t.idealBankId.errorState],show_error:t.idealBankId.showError.toString()}:null;case"UpdateMandateSigned":return a.mandateSigned.rawValue!==t.mandateSigned.rawValue?{field:i.FormFields.SepaMandateSigned,value:t.mandateSigned.rawValue.toString(),error_state:l.InputErrorState[t.mandateSigned.errorState],show_error:t.mandateSigned.showError.toString()}:null;case"UpdatePaymentMethod":return a.paymentMethod.rawValue!==t.paymentMethod.rawValue?{field:i.FormFields.PaymentMethod,value:n.PaymentMethod[t.paymentMethod.rawValue],error_state:l.InputErrorState[t.paymentMethod.errorState],show_error:t.paymentMethod.showError.toString()}:null;default:return null}},e.prototype.getCCFormFieldChangeDetails=function(e){return e.ccn?{field:i.FormFields.CreditCardNumber,error_state:l.InputErrorState[e.ccn.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccn.showError.toString()}:e.ccode?{field:i.FormFields.CreditCardCode,error_state:l.InputErrorState[e.ccode.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccode.showError.toString()}:e.ccexp?{field:i.FormFields.CreditCardExpDate,error_state:l.InputErrorState[e.ccexp.isValid?l.InputErrorState.Valid:l.InputErrorState.Invalid],show_error:e.ccexp.showError.toString()}:null},e.prototype.getFormValidationErrorDetails=function(e){var t={};return e.countryCode.showError&&(t[i.FormFields.CountryCode]=l.InputErrorState[e.countryCode.errorState]),e.paymentMethod.showError&&(t[i.FormFields.PaymentMethod]=l.InputErrorState[e.paymentMethod.errorState]),e.zipCode.showError&&(t[i.FormFields.ZipCode]=l.InputErrorState[e.zipCode.errorState]),e.vat.showError&&(t[i.FormFields.Vat]=l.InputErrorState[e.vat.errorState]),e.paymentMethod.formattedValue===n.PaymentMethod.CreditCard?(e.nonce.showError&&(e.nonce.isCCNValid||(t[i.FormFields.CreditCardNumber]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCodeValid||(t[i.FormFields.CreditCardCode]=l.InputErrorState[l.InputErrorState.Invalid]),e.nonce.isCCExpValid||(t[i.FormFields.CreditCardExpDate]=l.InputErrorState[l.InputErrorState.Invalid])),e.cpf.showError&&(t[i.FormFields.Cpf]=l.InputErrorState[e.cpf.errorState]),e.name.showError&&(t[i.FormFields.CardholderName]=l.InputErrorState[e.name.errorState]),e.address.showError&&(t[i.FormFields.Address]=l.InputErrorState[e.address.errorState]),e.city.showError&&(t[i.FormFields.City]=l.InputErrorState[e.city.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.DirectDeposit?(e.mandateSigned.showError&&(t[i.FormFields.SepaMandateSigned]=l.InputErrorState[e.mandateSigned.errorState]),e.accountHolderName.showError&&(t[i.FormFields.SepaAccountHolderName]=l.InputErrorState[e.accountHolderName.errorState]),e.iban.showError&&(t[i.FormFields.Iban]=l.InputErrorState[e.iban.errorState])):e.paymentMethod.formattedValue===n.PaymentMethod.Ideal&&e.idealBankId.showError&&(t[i.FormFields.IdealBankId]=l.InputErrorState[e.idealBankId.errorState]),t},e.prototype.getFormSubmitEventDetails=function(e,t,a){var r;switch(e){case u.SubmitFormTriggerType.ButtonClick:r=i.FormSubmitTrigger.ButtonClick,this.originSubmitSeq=a;break;case u.SubmitFormTriggerType.RecaptchaV2:r=this.captchaVisibilityChecker.wasLastCaptchaSubmitVisible?i.FormSubmitTrigger.ShownCaptcha:i.FormSubmitTrigger.SuppressedCaptcha;break;case u.SubmitFormTriggerType.ThreeDsFingerprint:r=i.FormSubmitTrigger.ThreeDsFingerprint;break;case u.SubmitFormTriggerType.ThreeDsChallenge:r=i.FormSubmitTrigger.ThreeDsChallenge;break;default:r=i.FormSubmitTrigger.Unknown}var o={origin_submit_seq:this.originSubmitSeq.toString(),submit_seq:a.toString(),trigger:r};return r===i.FormSubmitTrigger.ButtonClick&&(o[i.FormFields.CountryCode]=t.countryCode.rawValue,o[i.FormFields.PaymentMethod]=n.PaymentMethod[t.paymentMethod.rawValue],t.paymentMethod.rawValue===n.PaymentMethod.CreditCard&&(o.bin=t.bin.rawValue)),o},e})();t.PaymentsUXLogger=d})),define("modules/clean/logging/hive/schemas/web-payments_ux_analytics",["require","exports","tslib","modules/core/browser"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importStar(r),(function(e){e.PageView="page_view",e.FormFieldChange="form_field_change",e.FormValidationError="form_validation_error",e.FormSubmit="form_submit",e.ChallengeStart="challenge_start",e.ChallengeSubmit="challenge_submit",e.FormSubmitSuccess="form_submit_success",e.OpenSurvey="open_survey",e.CancelSurvey="cancel_survey",e.SubmitSurvey="submit_survey"})(t.PaymentsUXEvent||(t.PaymentsUXEvent={})),(function(e){e.Address="address",e.CardholderName="name",e.City="city",e.CountryCode="country_code",e.Cpf="cpf",e.CreditCardCode="cc_code",e.CreditCardExpDate="cc_exp_date",e.CreditCardNumber="cc_number",e.Iban="iban",e.IdealBankId="bank_id",e.PaymentMethod="payment_method",e.SepaAccountHolderName="owner_name",e.SepaMandateSigned="mandate_signed",e.Vat="vat",e.ZipCode="zip_code"})(t.FormFields||(t.FormFields={})),(function(e){e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint"})(t.ChallengeType||(t.ChallengeType={})),(function(e){e.ButtonClick="button_click",e.SuppressedCaptcha="suppressed_captcha",e.ShownCaptcha="shown_captcha",e.ThreeDsChallenge="three_ds_challenge",e.ThreeDsFingerprint="three_ds_fingerprint",e.Unknown="unknown"})(t.FormSubmitTrigger||(t.FormSubmitTrigger={})),(function(e){e.Legacy="legacy",e.RevenueAPI="revenue_api"})(t.PaymentsUxPlatform||(t.PaymentsUxPlatform={}));var n=function(e){this.category="web-payments_ux_analytics",this.session_id=null,this.user_id=null,this.team_id=null,this.anon_ip=null,this.country=null,this.locale_user_selected=null,this.locale_browser_header=null,this.user_agent=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_os_name=null,this.ua_os_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.event_name=e.event_name,this.event_details=e.event_details,this.url=r.get_href(),this.request_id=e.request_id,this.request_seq=e.request_seq,this.action_seq=e.action_seq,this.platform=e.platform,Object.seal(this)};t.PaymentsUXAnalyticsRow=n})),define("modules/clean/payments/skus/subscription_change_plan_set",["require","exports","modules/clean/payments/skus/constants","modules/clean/payments/skus/subscription_change_plan"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this._subChangePlans=e}return e.deserialize=function(t){return new e(t.map(r.SubscriptionChangePlan.deserialize))},Object.defineProperty(e.prototype,"plans",{get:function(){return this._subChangePlans.slice()},enumerable:!0,configurable:!0}),e.prototype.filter=function(t){return new e(this._subChangePlans.filter(t))},e.prototype.withProductPlanType=function(e){return this.filter((function(t){var a=t.finalSubState.plan;return!!a&&a.productType===e}))},e.prototype.withSchedule=function(e){return this.filter((function(t){var a=t.finalSubState.billingSchedule;return!!a&&a.id===e}))},e.prototype.withSku=function(e){return this.filter((function(t){return t.finalSubState.plan===e}))},e.prototype.monthly=function(){return this.withSchedule(a.ScheduleId.MONTHLY)},e.prototype.yearly=function(){return this.withSchedule(a.ScheduleId.YEARLY)},e})();t.SubscriptionChangePlanSet=n}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};define("modules/clean/react/payments/common/form/middleware/middleware",["require","exports","modules/core/browser","modules/core/notify","modules/clean/marketing_tracker"],(function(e,t,a,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitFormErrorMiddleware=function(t){return function(t){return function(n){if("SubmitFormError"!==n.type)return t(n);var o=t(n);return n.data.error_message&&r.Notify.error(n.data.error_message),n.data.redirect&&a.redirect(n.data.redirect),"payment_system_down_error"===n.data.error_type&&new Promise((function(t,a){e(["modules/clean/react/payments/checkout/components/payment_down_error_modal"],t,a)})).then(__importStar).then((function(e){e.PaymentDownErrorModalView.showInstance({isTrial:n.data.is_trial})})),o}}},t.marketingEventMiddleware=function(e){return function(t){return function(a){var r=a.additionalData;switch(a.type){case"SubmitFormStart":if(!r||!r.is_pro_buy_form)return t(a);var o={event:"conversionDataReady",tealium_event:"conversionDataReady",product:r.product,licenses:1,billing_cycle:r.billing_schedule,purchase_price:r.expected_price_amount,currency:r.currency,type:r.signup_type};n.MarketingTracker.pushWithDefaults(o);break;case"SubmitFormSuccess":var s=e.getState().pageState;if(s&&s.marketingTracker){var i=s.marketingTracker.onSubmitFormSuccess;i&&n.MarketingTracker.pushEvent(i)}}return t(a)}}}})),define("modules/clean/react/payments/common/form/reducers/reducers",["require","exports","tslib","redux","modules/clean/react/payments/common/form_values","modules/clean/payments/skus/constants","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_factory","modules/clean/react/payments/common/form_value_helpers"],(function(e,t,a,r,n,o,s,i,l){"use strict";function u(e){var t=s.fieldsToServerProps[e];return t?function(r){return function(n,o){switch(o.type){case"ShowFormFieldErrors":var s=o;if(n&&!l.FormValueHelper.isValid(n))for(var i=0,u=s.fieldNames;i<u.length;i++){var c=u[i];if(e===c)return a.__assign(a.__assign({},n),{showError:!0})}return n;case"SubmitFormError":var p=o;return p.data instanceof Object&&p.data.hasOwnProperty("error_fields")&&p.data.error_fields.hasOwnProperty(t)?a.__assign(a.__assign({},n),{showError:!0,serverError:p.data.error_fields[t]}):n;default:return r(n,o)}}}:function(e){return e}}function c(e){return function(t,a){return Object.assign({},t,e(t,a))}}function p(e,t){switch(t.type){case"SubmitFormError":var r=t;if(r.data instanceof Object&&r.data.hasOwnProperty("error_fields")&&r.data.error_fields.hasOwnProperty("email")){var o=r.data.error_fields.email,s=void 0;switch(o){case"empty":s=n.EmailErrorState.Empty;break;case"account":case"email-taken":s=n.EmailErrorState.TakenError;break;default:s=e?e.errorState:n.EmailErrorState.Valid}return a.__assign(a.__assign({},e),{showError:!0,serverError:o,errorState:s})}return r.data instanceof Object&&r.data.hasOwnProperty("error_type")&&"capturable_user"===r.data.error_type.toString()?a.__assign(a.__assign({},e),{showError:!1,isCapturable:!0}):e;case"ShowFormFieldErrors":var u=t;if(e&&!l.FormValueHelper.isValid(e))for(var c=0,p=u.fieldNames;c<p.length;c++){if("email"===p[c])return a.__assign(a.__assign({},e),{showError:!0})}return e;case"UpdateEmail":var d=t;return i.FormValueFactory.createEmail(d.value,e||void 0);default:return e||null}}function d(e,t){if(void 0===e&&(e=null),"SubmitFormSuccess"!==t.type)return null;var a=t;return a.data&&a.data.next_url?a.data.next_url:null}function m(e,t){switch(void 0===e&&(e=null),t.type){case"SubmitFormStart":return"submitting";case"SubmitFormSuccess":return"success";case"SubmitFormError":return"error";default:return e}}function f(e,t){return void 0===e&&(e=null),"SubmitFormStart"===t.type&&null!==e?e+1:e}function h(e,t){switch(void 0===e&&(e=!1),t.type){case"SubmitFormStart":return!0;case"SubmitFormSuccess":case"SubmitFormError":return!1;default:return e}}function y(e,t){switch(t.type){case"UpdateCpfName":return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:i.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})});case"UpdateFirstName":return e.formData.cpfName.manuallyEdited?e:a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:i.FormValueFactory.createCpfNamePrefill(t.value,e.formData.lastName.rawValue,e.pageState.userInfo.displayName)})});case"UpdateLastName":return e.formData.cpfName.manuallyEdited?e:a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{cpfName:i.FormValueFactory.createCpfNamePrefill(e.formData.firstName.rawValue,t.value,e.pageState.userInfo.displayName)})});default:return e}}function g(e,t){switch(t.type){case"SubmitFormError":var r=t,n="";return r.data&&r.data.error_fields&&(n=r.data.error_fields.product_plan_type),a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{productPlanType:a.__assign(a.__assign({},e.formData.productPlanType),{serverError:n,showError:!0})})});case"ShowFormFieldErrors":var s=t;if(e.formData.productPlanType&&!l.FormValueHelper.isValid(e.formData.productPlanType))for(var u=0,c=s.fieldNames;u<c.length;u++){if("productPlanType"===c[u])return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{productPlanType:a.__assign(a.__assign({},e.formData.productPlanType),{showError:!0})})})}return e;case"UpdateProductPlanType":var p=t,d=p.value,m=d===o.ProductPlanType.ADVANCED?e.pageState.advancedMinNumUsers:e.pageState.standardMinNumUsers,f=d===o.ProductPlanType.ADVANCED?e.pageState.advancedMaxNumUsers:e.pageState.standardMaxNumUsers;return void 0!==e.pageState.teamNumUsers&&(m=Math.max(m,e.pageState.teamNumUsers)),a.__assign(a.__assign({},e),{pageState:a.__assign(a.__assign({},e.pageState),{minNumUsers:m,maxNumUsers:f}),formData:a.__assign(a.__assign({},e.formData),{productPlanType:i.FormValueFactory.createProductPlanType(p.value,e.pricingState.subChangePlans,e.formData.productPlanType)})});default:return e}}function _(e,t){switch(t.type){case"SubmitFormError":var r=t,n="";return r.data&&r.data.error_fields&&(n=r.data.error_fields.team_num_users),a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:a.__assign(a.__assign({},e.formData.numberOfUsers),{serverError:n,showError:!0})})});case"ShowFormFieldErrors":var o=t;if(e.formData.numberOfUsers&&!l.FormValueHelper.isValid(e.formData.numberOfUsers))for(var s=0,u=o.fieldNames;s<u.length;s++){if("numberOfUsers"===u[s])return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:a.__assign(a.__assign({},e.formData.numberOfUsers),{showError:!0})})})}return e;case"UpdateNumberOfUsers":var c=t;return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),{numberOfUsers:i.FormValueFactory.createNumberOfUsers(c.value,e.pageState,e.formData.numberOfUsers,e.formData.numberOfUsers.minLicenseLimit,e.formData.emailsToInvite?e.formData.emailsToInvite.rawValue.length:0)})});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.companySize=u("companySize")((function(e,t){return"UpdateCompanySize"===t.type?i.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.email=p,t.emailsToInvite=u("emailsToInvite")((function(e,t){return"UpdateEmailsToInvite"===t.type?i.FormValueFactory.createEmailsToInvite(t.value,e||void 0):e||null})),t.firstName=u("firstName")((function(e,t){return"UpdateFirstName"===t.type?i.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.lastName=u("lastName")((function(e,t){return"UpdateLastName"===t.type?i.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.nextUrl=d,t.password=u("password")((function(e,t){return"UpdatePassword"===t.type?i.FormValueFactory.createPassword(t.value,e||void 0):e||null})),t.schedule=u("schedule")((function(e,t){return"UpdateSchedule"===t.type?i.FormValueFactory.createSchedule(t.value,e||void 0):e||null})),t.submitState=m,t.submitSeq=f,t.submitting=h,t.teamName=u("teamName")((function(e,t){return"UpdateTeamName"===t.type?i.FormValueFactory.createInput(t.value,e||void 0):e||null})),t.teamPhone=u("teamPhone")((function(e,t){return"UpdateTeamPhone"===t.type?i.FormValueFactory.createTeamPhone(t.value,e||void 0):e||null})),t.updateCpfName=y,t.updateProductPlanType=g,t.updateNumberOfUsers=_,t.FormReducer=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(a,r){return t(e(a,r),r)}}))})(y,g,_,r.combineReducers({pricingState:function(e,t){return void 0===e&&(e={}),e},pageState:c(r.combineReducers({nextUrl:d,submitState:m,submitting:h,submitSeq:f})),formData:c(r.combineReducers({companySize:t.companySize,email:p,emailsToInvite:t.emailsToInvite,firstName:t.firstName,lastName:t.lastName,password:t.password,schedule:t.schedule,teamName:t.teamName,teamPhone:t.teamPhone}))}))})),define("modules/clean/react/payments/common/payments/reducers/reducers",["require","exports","tslib","modules/clean/react/payments/business/state/business_state","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/common/form_value_factory"],(function(e,t,a,r,n,o){"use strict";function s(e,t){return a.__assign(a.__assign({},e),{formData:a.__assign(a.__assign({},e.formData),t)})}function i(e){var t=r.fieldsToServerProps[e];return t?function(r){return function(o,i){var l=o.formData[e];switch(i.type){case"ShowFormFieldErrors":for(var u=0,c=i.fieldNames;u<c.length;u++){if(c[u]===e&&void 0!==l&&!n.FormValueHelper.isValid(l)){var p={};return p[e]=a.__assign(a.__assign({},l),{showError:!0}),s(o,p)}}return o;case"SubmitFormError":var d=i;if(!d.data||!d.data.error_fields||!d.data.error_fields[t]||void 0===l)return o;var m={};return m[e]=a.__assign(a.__assign({},l),{showError:!0,serverError:d.data.error_fields[t]}),s(o,m);default:return r(o,i)}}}:function(e){return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePaymentMethod=i("paymentMethod")((function(e,t){if("UpdatePaymentMethod"!==t.type&&"UpdateCountryCode"!==t.type)return e;var a=e.formData,r=e.pageState,n="UpdatePaymentMethod"===t.type?t.value:a.paymentMethod.rawValue,i=a.countryCode.formattedValue;return s(e,{paymentMethod:o.FormValueFactory.createPaymentMethod(n,i,r.paymentFormSpec,a.paymentMethod)})})),t.updateCountryCode=i("countryCode")((function(e,t){return"UpdateCountryCode"!==t.type?e:s(e,{countryCode:o.FormValueFactory.createCountryCode(t.value,e.formData.countryCode)})})),t.updateZipCode=i("zipCode")((function(e,t){return"UpdateZipCode"!==t.type&&"UpdateCountryCode"!==t.type?e:s(e,{zipCode:o.FormValueFactory.createZipCode("UpdateZipCode"===t.type?t.value:e.formData.zipCode.rawValue,e.formData.countryCode.formattedValue,e.pageState.paymentFormSpec,e.formData.zipCode)})})),t.updateVat=i("vat")((function(e,t){return"UpdateVat"!==t.type&&"UpdateCountryCode"!==t.type?e:s(e,{vat:o.FormValueFactory.createVat("UpdateVat"===t.type?t.value.toUpperCase():e.formData.vat.rawValue,e.formData.countryCode.formattedValue,e.formData.vat)})})),t.updateCpf=i("cpf")((function(e,t){return"UpdateCpf"!==t.type&&"UpdateCountryCode"!==t.type?e:s(e,{cpf:o.FormValueFactory.createCpf("UpdateCpf"===t.type?t.value.toUpperCase():e.formData.cpf.rawValue,e.formData.cpf)})})),t.updatePhone=i("phone")((function(e,t){return"UpdatePhone"!==t.type?e:s(e,{phone:o.FormValueFactory.createPhone(t.value,e.formData.phone)})})),t.updateAddress=i("address")((function(e,t){return"UpdateAddress"!==t.type?e:s(e,{address:o.FormValueFactory.createAddress(t.value,e.formData.address)})})),t.updateName=i("name")((function(e,t){return"UpdateName"!==t.type?e:s(e,{name:o.FormValueFactory.createName(t.value,e.formData.name)})})),t.updateCity=i("city")((function(e,t){return"UpdateCity"!==t.type?e:s(e,{city:o.FormValueFactory.createCity(t.value,e.formData.city)})})),t.updateCpfName=i("cpfName")((function(e,t){return"UpdateCpfName"!==t.type?e:s(e,{cpfName:o.FormValueFactory.createCpfName(t.value,e.formData.cpfName)})})),t.updateNonce=i("nonce")((function(e,t){return"UpdateNonce"!==t.type?e:s(e,{nonce:o.FormValueFactory.createNonce(t.value,t.creditCardIframeFields,e.formData.nonce)})})),t.updatePayPalNonce=i("nonce")((function(e,t){return"UpdatePayPalNonce"!==t.type?e:s(e,{payPalNonce:o.FormValueFactory.createPayPalNonce(t.value,t.email,e.formData.payPalNonce)})})),t.updateAdyenEncryptedCard=i("adyenEncryptedCard")((function(e,t){return"UpdateAdyenEncryptedCard"!==t.type?e:s(e,{adyenEncryptedCard:o.FormValueFactory.createAdyenEncryptedCard(t.value,e.formData.adyenEncryptedCard)})})),t.updateEncryptedCardForNetworkToken=i("encryptedCardForNetworkToken")((function(e,t){return"UpdateEncryptedCardForNetworkToken"!==t.type?e:s(e,{encryptedCardForNetworkToken:o.FormValueFactory.createEncryptedCardForNetworkToken(t.cardType,t.encryptedCard,e.formData.encryptedCardForNetworkToken)})})),t.updateBIN=i("bin")((function(e,t){return"UpdateBIN"!==t.type?e:s(e,{bin:o.FormValueFactory.createBIN(t.value,e.formData.bin)})})),t.updateBrowserInfo=i("browserInfo")((function(e,t){return"UpdateBrowserInfo"!==t.type?e:s(e,{browserInfo:o.FormValueFactory.createBrowserInfo(t.value,e.formData.browserInfo)})})),t.updateThreeDsData=i("threeDsData")((function(e,t){return"UpdateThreeDsData"!==t.type?e:s(e,{threeDsData:o.FormValueFactory.createThreeDsData(t.value)})})),t.updateAccountHolderName=i("accountHolderName")((function(e,t){return"UpdateAccountHolderName"!==t.type?e:s(e,{accountHolderName:o.FormValueFactory.createInput(t.value,e.formData.accountHolderName)})})),t.updateIBAN=i("iban")((function(e,t){return"UpdateIBAN"!==t.type?e:s(e,{iban:o.FormValueFactory.createIBAN(t.value,e.formData.iban)})})),t.updateMandateSigned=i("mandateSigned")((function(e,t){return"UpdateMandateSigned"!==t.type?e:s(e,{mandateSigned:o.FormValueFactory.createCheckbox(t.value,e.formData.mandateSigned)})})),t.updateTermsAndService=i("termsAndService")((function(e,t){return"UpdateTermsAndService"!==t.type?e:s(e,{termsAndService:o.FormValueFactory.createCheckbox(t.value,e.formData.termsAndService)})})),t.updateIdealBank=(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return function(a,r){return t(e(a,r),r)}}))})(i("idealBankId")((function(e,t){return"UpdateIdealBank"!==t.type?e:s(e,{idealBankId:o.FormValueFactory.createIdealBankId(t.value.bankId,e.formData.idealBankId)})})),i("idealBankName")((function(e,t){return"UpdateIdealBank"!==t.type?e:s(e,{idealBankName:o.FormValueFactory.createIdealBankName(t.value.bankName,e.formData.idealBankName)})}))),t.PaymentMethodReducers=[t.updateCountryCode,t.updatePaymentMethod,t.updateZipCode,t.updateVat,t.updateCpf,t.updateCpfName,t.updateNonce,t.updateAdyenEncryptedCard,t.updateEncryptedCardForNetworkToken,t.updateBIN,t.updateBrowserInfo,t.updateThreeDsData,t.updateAccountHolderName,t.updateIBAN,t.updateMandateSigned,t.updateIdealBank,t.updateCity,t.updateAddress,t.updatePhone,t.updateName,t.updatePayPalNonce],t.TermsAndServiceReducers=[t.updateTermsAndService]})),define("modules/clean/react/payments/common/payments/state/store_creator",["require","exports","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/common/form_value_factory"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPaymentPricingState=function(e){return{countryCode:r.FormValueFactory.createCountryCode(e.countryCode).formattedValue,countryCodeLoading:void 0,hasCurrencyChanged:!1,hasTaxChangedWithinCountry:!1,loadingPrices:!1,recentLoadEvent:!1,requestToken:-1}},t.createPaymentPageState=function(e){return{paymentFormSpec:new a.PaymentFormSpec(e.serializedPaymentFormSpec),requestId:e.requestId,submitSeq:0,paypalEmail:""}},t.createPaymentFormData=function(e,t,a){var n=e.countryCode,o=e.userInfo,s=e.vat,i=t.paymentFormSpec.default_payment_method_for_country(n);return{city:r.FormValueFactory.createCity(""),phone:r.FormValueFactory.createPhone(""),name:r.FormValueFactory.createName(""),address:r.FormValueFactory.createAddress(""),paymentMethod:r.FormValueFactory.createPaymentMethod(i,n,t.paymentFormSpec),countryCode:r.FormValueFactory.createCountryCode(n),zipCode:r.FormValueFactory.createZipCode("",n,t.paymentFormSpec),vat:r.FormValueFactory.createVat(s||"",n),cpf:r.FormValueFactory.createCpf(""),cpfName:r.FormValueFactory.createCpfNamePrefill("","",o.displayName),nonce:r.FormValueFactory.createNonce(""),payPalNonce:r.FormValueFactory.createPayPalNonce("",""),adyenEncryptedCard:r.FormValueFactory.createAdyenEncryptedCard(""),encryptedCardForNetworkToken:r.FormValueFactory.createEncryptedCardForNetworkToken("",""),bin:r.FormValueFactory.createBIN(""),browserInfo:r.FormValueFactory.createBrowserInfo(""),threeDsData:r.FormValueFactory.createThreeDsData(""),accountHolderName:r.FormValueFactory.createInput(""),iban:r.FormValueFactory.createIBAN(""),mandateSigned:r.FormValueFactory.createCheckbox(!1),termsAndService:r.FormValueFactory.createCheckbox(!1),idealBankId:r.FormValueFactory.createIdealBankId(""),idealBankName:r.FormValueFactory.createIdealBankName("")}}})),define("modules/clean/react/payments/common/pricing/reducers/reducers",["require","exports","tslib","modules/clean/payments/skus/subscription_change_plan_set"],(function(e,t,a,r){"use strict";function n(e,t){if("PrepareToUpdateTransitions"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{loadingPrices:!0,recentLoadEvent:!0});return a.__assign(a.__assign({},e),{pricingState:r})}function o(e,t){if("UpdateRecentLoadEventStatus"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{recentLoadEvent:t.recentLoadEventStatus});return a.__assign(a.__assign({},e),{pricingState:r})}function s(e,t){if("UpdateTransitionsStart"!==t.type)return e;var r=a.__assign(a.__assign({},e.pricingState),{countryCodeLoading:e.formData.countryCode.formattedValue,loadingPrices:!0,recentLoadEvent:!0});return a.__assign(a.__assign({},e),{pricingState:r})}function i(e,t){if("UpdateTransitionsSuccess"!==t.type)return e;var n,o="N/A",s=!1,i=!1;if(t.subChangePlans&&(n=t.subChangePlans,e.pricingState.subChangePlans.plans.length>0)){var l=e.pricingState.subChangePlans.plans[0],u=n[0],c=l.tvm,p=u.tvm,d=c&&c.getCurrency(),m=p&&p.getCurrency();s=(o="N/A"===e.pricingState.originalCurrency?d:e.pricingState.originalCurrency)!==m;var f=l.nextBillingSummary.taxRate,h=f===u.nextBillingSummary.taxRate&&(0===f||d===m);i=e.pricingState.hasTaxChangedWithinCountry||!h,e.pricingState.countryCode!==e.pricingState.countryCodeLoading&&(i=!1)}var y=a.__assign(a.__assign({},e.pricingState),{countryCode:e.pricingState.countryCodeLoading,countryCodeLoading:void 0,hasCurrencyChanged:s,hasTaxChangedWithinCountry:i,loadingPrices:!1,originalCurrency:o,recentLoadEvent:!0,subChangePlans:new r.SubscriptionChangePlanSet(t.subChangePlans),baseSubChangePlans:new r.SubscriptionChangePlanSet(t.subChangePlans)});return a.__assign(a.__assign({},e),{pricingState:y})}Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionManagementReducers=[n,o,s,i],t.prepareToUpdateTransitions=n,t.updateRecentLoadEventStatus=o,t.updateTransitionsStart=s,t.updateTransitionsSuccess=i})),define("modules/clean/react/payments/pro/components/inputs/inputs",["require","exports","tslib","react","react-dom","classnames"],(function(e,t,a,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r),n=a.__importDefault(n),o=a.__importDefault(o);var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){var e=o.default({input__label:!0,"input__label--before":Boolean(!this.props.labelAfterElement),"input__label--errormodal":Boolean(this.props.errorText)},this.props.className),t=this.props.containerClassName,a=r.default.createElement("label",{className:e,htmlFor:this.props.htmlFor},this.props.labelText),n=null;this.props.labelAfterElement&&(n=a,a=null);var s,i=null;this.props.secondaryLabel&&(i=r.default.createElement("label",{className:"input__label input__label--secondary",htmlFor:this.props.htmlFor},this.props.secondaryLabel)),this.props.errorText&&(s=this.props.errorText);var l=r.default.createElement("label",{className:"input__label--error",htmlFor:this.props.htmlFor},s);return r.default.createElement("div",{className:t},a,this.props.children,n,i,l)},t})(r.default.Component);t.LabeledInput=s;var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t.onBlur=function(e){t.props.onBlur&&t.props.onBlur(n.default.findDOMNode(t.input))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.autocomplete,i=t.className,l=t.disabled,u=t.labelText,c=t.secondaryLabel,p=t.errorText,d=t.hasError,m=t.value,f=t.maxLength,h=t.containerClassName,y=t.placeholder,g=this.props.type||"text",_=o.default({input__text:!0,"input__text--error":Boolean(p)||d},this.props.inputClassName);return r.default.createElement(s,{className:i,containerClassName:h,labelText:u,htmlFor:a,errorText:p,secondaryLabel:c},r.default.createElement("input",{className:_,type:g,autoComplete:n,placeholder:y,name:a,id:a,ref:function(t){e.input=t},value:m,disabled:l,onChange:this.onChange,onBlur:this.onBlur,maxLength:f}))},t})(r.default.Component);t.LabeledTextInput=i;var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCheckboxChange=function(e){t.props.onClick&&("click"!==e.type&&"Enter"!==e.key&&13!==e.charCode||(t.props.onClick(n.default.findDOMNode(t.input)),e.preventDefault()))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onClick){var e=n.default.findDOMNode(this.input),t=e.checked;t&&t!==this.props.checked&&this.props.onClick(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.className,i=t.containerClassName,l=t.disabled,u=t.labelText,c=t.labelClassName,p=t.errorText,d=t.checked,m=o.default({input__checkbox:!0,"input__checkbox--valid":d,"input__checkbox--disabled":Boolean(l)},n);return r.default.createElement(s,{containerClassName:i,className:c,errorText:p,htmlFor:a,labelAfterElement:!0,labelText:u},r.default.createElement("div",{"aria-labelledby":a,tabIndex:0,role:"checkbox",className:m,onClick:this.handleCheckboxChange,onKeyUp:this.handleCheckboxChange}),r.default.createElement("input",{tabIndex:-1,checked:d,disabled:l,id:a,name:a,ref:function(t){e.input=t},type:"checkbox"}))},t})(r.default.Component);t.LabeledCheckboxInput=l;var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleRadioChange=function(e){t.props.disabled?e.stopPropagation():t.props.onClick&&("click"!==e.type&&"Enter"!==e.key&&13!==e.charCode||(t.props.onClick(e,t.props.name,t.props.value),e.preventDefault()))},t}return a.__extends(t,e),t.prototype.render=function(){var e,t=this.props,a=t.id,n=t.name,i=t.ariaLabel,l=t.disabled,u=t.value,c=t.checked,p=t.onChange,d=t.labelText,m=t.labelClassName,f=o.default({input__radio:!0,"input__radio--valid":Boolean(c),"input__radio--disabled":Boolean(l)},this.props.className),h=o.default(((e={})[this.props.containerClassName+"--valid"]=!!this.props.containerClassName&&Boolean(c),e),this.props.containerClassName);return r.default.createElement(s,{containerClassName:h,className:m,labelText:d,htmlFor:n,labelAfterElement:!0},r.default.createElement("div",{"aria-label":i||n,role:"radio",tabIndex:0,className:f,onClick:this.handleRadioChange,onKeyUp:this.handleRadioChange}),r.default.createElement("input",{id:a,tabIndex:-1,ref:"radio",type:"radio",name:n,value:u,checked:c,onChange:p,disabled:l}))},t})(r.default.Component);t.LabeledRadioInput=u;var c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){t.props.onChange&&t.props.onChange(n.default.findDOMNode(t.input))},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){if(this.props.onChange){var e=n.default.findDOMNode(this.input),t=e.value;t&&t!==this.props.value&&this.props.onChange(e)}},t.prototype.render=function(){var e=this,t=this.props,a=t.name,n=t.className,i=t.containerClassName,l=t.labelClassName,u=t.labelText,c=t.errorText,p=o.default({input__select:!0},n);return r.default.createElement(s,{containerClassName:i,className:l,errorText:c,htmlFor:a,labelText:u},r.default.createElement("select",{className:p,id:a,name:a,onChange:this.onChange,value:this.props.value,ref:function(t){e.input=t}},this.props.children))},t})(r.default.Component);t.LabeledSelectInput=c;var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return r.default.createElement("div",{className:this.props.className},this.props.children,this.props.errors&&this.props.errors.map((function(e){return r.default.createElement("div",{className:e.className},r.default.createElement("label",{className:"input__label--error",htmlFor:e.name},e.text))})))},t})(r.default.Component);t.LabeledInputRow=p}));
//# sourceMappingURL=pkg-purchase-form.min.js-vflx7tEyy.map