define(["require","exports","tslib","react","modules/core/i18n","dig-components/buttons","dig-components/tooltips","dig-components/icons/src","dig-components/modal","dig-components/typography","dig-components/icons","modules/clean/components/loading_indicator","modules/clean/react/css","modules/clean/teams/admin/widgets/groups/groups_typeahead","modules/clean/teams/admin/widgets/invite_modal/email_tokenizer","modules/clean/teams/admin/widgets/groups/create_group_modal","modules/clean/validators/email_validator"],(function(e,t,a,n,l,s,o,r,i,u,d,m,c,f,g,p,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=a.__importStar(n),v=a.__importDefault(v);var _={email:{title:n.default.createElement(u.Text,{isBold:!0},l.intl.formatMessage({defaultMessage:"Add email addresses"})),valid:function(e,t){return!t&&e.every((function(e){return v.default.validate(e).every((function(e){return e.valid}))}))},error:l.intl.formatMessage({defaultMessage:"Enter a valid email address"})},groups:{title:n.default.createElement("div",null,l.intl.formatMessage({defaultMessage:"<text>Add members to groups</text> <faint>(Optional)</faint>"},{text:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement(u.Text,{isBold:!0},e)},faint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.default.createElement(u.Text,{color:"faint"},e)}})),valid:function(e,t){return!t&&e.every((function(e){return"default"===e}))},error:l.intl.formatMessage({defaultMessage:"Group name incomplete"}),tooltip:n.default.createElement(o.Tooltip,{className:"group-row-tooltip",title:l.intl.formatMessage({defaultMessage:"Create groups to quickly give the right people access to files."})},n.default.createElement("div",{className:"group-row-tooltip__content"},n.default.createElement(d.UIIcon,{className:"middle-align",src:r.HelpFill})))}},E=function(e){var t=e.title,a=e.submitted,l=e.valid,s=e.values,o=e.error,r=e.children,i=e.input,d=e.tooltip;return n.default.createElement(n.default.Fragment,null,t,n.default.createElement("div",{className:"tooltip-container"},r,d),a&&!l(s,i)?n.default.createElement(u.Text,{className:"validation-msg",color:"error"},o):null)};t.GroupsInviteModal=c.requireCssWithComponent((function(e){var t,o=e.open,r=e.isSubmitting,d=void 0!==r&&r,c=e.memberList,v=e.handleOnClose,M=e.sendInvites,h=e.handleCSVImport,C="invite-modal-groups",y=n.useState({emails:[],groups:[]}),b=y[0],S=y[1],I=n.useState(),x=I[0],N=I[1],w=n.useState([]),B=w[0],T=w[1],k=n.useState(!1),G=k[0],L=k[1],q=n.useState(!1),A=q[0],O=q[1];n.useEffect((function(){S({emails:[],groups:[]}),o&&f.fetchGroups().then(T)}),[o]),n.useEffect((function(){d&&O(!0)}),[d]);var F=function(e){T((function(t){return a.__spreadArrays(t,[e])})),S(a.__assign(a.__assign({},b),{groups:a.__spreadArrays(b.groups,[e])}))};return G?n.default.createElement(p.CreateGroupModal,{open:G,handleOnClose:function(e){L(!1),e&&!f.groupExists(b.groups,e.group_name)&&F(e)}}):n.default.createElement(i.Modal,{open:o,className:C,overlayClassName:C+"__overlay",withCloseButton:l.intl.formatMessage({defaultMessage:"Close Modal"}),onRequestClose:function(){return v()}},n.default.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(u.Title,null,l.intl.formatMessage({defaultMessage:"Invite members to your team"}))),n.default.createElement(i.Modal.Body,{className:C+"__body"},n.default.createElement(E,a.__assign({},_.email,{values:b.emails,submitted:A}),n.default.createElement(g.EmailTokenizer,{placeholder:b.emails.length?void 0:l.intl.formatMessage({defaultMessage:"Email address"}),emails:b.emails,memberList:c,onChange:function(e){return S(a.__assign(a.__assign({},b),{emails:e}))}})),n.default.createElement(E,a.__assign({},_.groups,{input:x,values:b.groups.map((function(e){return e.variant})),submitted:A}),n.default.createElement(f.GroupsTypeahead,{selected:b.groups,groups:B,onCreate:F,onChange:function(e){return S(a.__assign(a.__assign({},b),{groups:e}))},onInputChange:function(e){return N(e)},handleCreateModal:function(e){return L(e)}}))),n.default.createElement(i.Modal.Footer,null,h&&n.default.createElement(s.Button,{variant:"transparent",onClick:function(){return h()}},l.intl.formatMessage({defaultMessage:"Import CSV"})),n.default.createElement(s.Button,{variant:"outline",onClick:function(){return v()}},l.intl.formatMessage({defaultMessage:"Cancel"})),n.default.createElement(s.Button,{variant:"primary",onClick:function(){return M(b.emails,b.groups.map((function(e){return e.group_id})))},disabled:!(null===(t=b.emails)||void 0===t?void 0:t.length)},l.intl.formatMessage({defaultMessage:"Send invites"}),d&&n.default.createElement(m.LoadingIndicator,{style:m.LoadingIndicator.LoadingIndicatorStyle.SPINNER}))))}),["/static/css/dig-components/index.web-vflAfUkoe.css","/static/css/teams/admin/widgets/invite_modal/invite_modal_groups-vfltdH1Q7.css"])}));
//# sourceMappingURL=invite_modal_groups.min.js-vfl4sffz8.map