define("modules/clean/groups/add_group_members_modal",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","jquery","modules/clean/ajax","modules/clean/analytics","modules/clean/groups/group_members_form","modules/clean/groups/utils","modules/clean/react/modal","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importStar(s),n=a.__importStar(n),i=a.__importDefault(i),l=a.__importStar(l),m=a.__importDefault(m),d=a.__importDefault(d);var _=c.Viewer.get_viewer(),h=o.default({displayName:"AddGroupMembersModal",propTypes:{group:n.object,insideAdminConsole:n.bool,onGroupChanged:n.func},getInitialState:function(){return{canProceed:!1,submitting:!1}},componentDidMount:function(){return i.default(".contacts-tokenizer-input").select()},_canProceed:function(){return(null!=this.refs.members?this.refs.members.areAllContactsValid():void 0)&&!(null!=this.refs.members?this.refs.members.isEmpty():void 0)},onClickAddMembers:function(e){var t=this;return e.preventDefault(),this.refs.members.getFinalData((function(e){var a=e.emails,o=t._canProceed();if(t.setState({canProceed:o}),o)return t.setState({submitting:!0}),l.WebRequest({url:"/groups_ajax/add_users_to_group",data:{members:JSON.stringify(a),group_id:t.props.group.id},subject_user:_.work_user,complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(e){return e=JSON.parse(e),f.Notify.success(g.intl.formatMessage({defaultMessage:"{count, plural, one{Adding member...} other{Adding members...}}"},{count:a.length})),p.Modal.close(),t.props.onGroupChanged(!0,null)},error:function(e){if(d.default.isGroupDeleted(e))return p.Modal.close(),d.default.redirectToGroupsPage(t.props.insideAdminConsole)}})}))},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},logWebTeamsEvent:function(){var e={group_owner_ids:this.props.group.users.filter((function(e){return e.is_owner})).map((function(e){return e.user_id})),team_id:this.props.group.team_id,team_type:_.team_type,group_id:this.props.group.id};return u.TeamsWebActionsLogger.log("groups_add_members_cancelled",e)},render:function(){return r.default.createElement(p.Modal,{title:g.intl.formatMessage({defaultMessage:"Add members to “{group_name}”"},{group_name:this.props.group.name}),className:"no-scroll-modal",id:"add-group-members-modal",acceptButtonText:g.intl.formatMessage({defaultMessage:"Add members"}),dismissButtonText:g.intl.formatMessage({defaultMessage:"Cancel"}),onAccept:this.onClickAddMembers,onDismiss:this.logWebTeamsEvent,acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,ref:"modal"},r.default.createElement(m.default,{ref:"members",group:this.props.group,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:g.intl.formatMessage({defaultMessage:"Add names or emails"}),disallowGroupMembers:!0}),s.label({},s.br({}),g.intl.formatMessage({defaultMessage:"Giving new members access to all of this group’s shared folders might take a little while."})))}});t.default=h})),define("modules/clean/teams/modals/create_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax","modules/clean/rondo/forms/index","modules/clean/react/tooltip","modules/clean/static_urls","modules/clean/groups/utils","spectrum/button"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c){"use strict";function g(e,t,a){return null==e&&(e=!1),null==t&&(t=!1),e||!t||!a}function f(e,t,a){return null==e&&(e=!1),null==t&&(t=!1),!e&&t&&a}Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),p=a.__importDefault(p),t.CreateGroupModal=function(e){var t=e.canHaveAdminUi,s=e.isLimitedTeam,i=e.groupNameField,l=e.radio,g=e.onPrimaryAction,f=void 0===g?function(){}:g,_=e.onSecondaryAction,h=e.onRequestClose,M=void 0===h?function(){}:h,b=n.intl.formatMessage({defaultMessage:"Create a new group"}),v=null;!s&&t&&(v=(function(e){return o.default.createElement("div",{className:"group-type"},o.default.createElement("span",{className:"tooltip-label group-kind-label"},n.intl.formatMessage({defaultMessage:"What kind of group is it?"}),o.default.createElement(m.Tooltip,{position:m.TooltipPosition.RIGHT,tooltip_contents:n.intl.formatMessage({defaultMessage:"In company-managed groups, admins are responsible for adding and removing members. In user-managed groups, users approve new members, and existing members can leave whenever they like."}),tooltip_classname:"group-kind-tooltip-bubble"},o.default.createElement("img",{src:d.static_url("/static/images/sprites/teams/tool_tip_icon-vflUvSKa8.png"),alt:n.intl.formatMessage({defaultMessage:"More information"})}))),o.default.createElement("div",{className:"group-type-selection"},o.default.createElement(u.RadioButton,a.__assign({className:"admin-managed-radio",value:"true",name:"group_type",id:"admin-managed-radio"},e),n.intl.formatMessage({defaultMessage:"Company-managed group"})),o.default.createElement("br",null),o.default.createElement(u.RadioButton,a.__assign({className:"member-managed-radio",value:"false",name:"group_type",id:"member-managed-radio"},e),n.intl.formatMessage({defaultMessage:"User-managed group"}))))})(l));var y=o.default.createElement("label",{className:"label-description",htmlFor:"group-name-input"},n.intl.formatMessage({defaultMessage:"Group name"})),w=i.fieldValue.length>0&&i.fieldValue.length<=p.default.MAX_GROUP_NAME_LEN;if(i.fieldValue.length>p.default.MAX_GROUP_NAME_LEN){y=o.default.createElement("div",{className:"text-input-error-wrapper"},n.intl.formatMessage({defaultMessage:"Group name"})," - ",n.intl.formatMessage({defaultMessage:"The group name should be under {max_len} characters"},{max_len:p.default.MAX_GROUP_NAME_LEN}))}var A=w?n.intl.formatMessage({defaultMessage:"Create"}):function(){return o.default.createElement(c.Button,{disabled:!0},n.intl.formatMessage({defaultMessage:"Create"}))};return o.default.createElement(r.ActionUtilityModal,{title:b,primaryAction:A,onPrimaryAction:f,onSecondaryAction:_,onRequestClose:M,id:"create-group-modal",shouldRequestCloseOnActions:!1,overlayClickClose:!0,className:"create-group-modal"},o.default.createElement("div",{className:"text-input"},y,o.default.createElement("div",{className:"text-input-wrapper"},o.default.createElement(u.Input,a.__assign({className:"text-input-input .group-name-input",id:"group-name-input",placeholder:n.intl.formatMessage({defaultMessage:"Marketing, Design, etc.",description:"These are example group names."}),onPrimaryAction:f},i)))),v)},t.CREATE_GROUP_URL="/groups_ajax/make_new_group_with_users",t.CreateGroupModalAction=function(e){var o=e.canHaveAdminUi,r=e.isLimitedTeam,s=a.__rest(e,["canHaveAdminUi","isLimitedTeam"]);return l.modalAjax({modal:t.CreateGroupModal,ajax:{url:t.CREATE_GROUP_URL,data:function(e){var t=e.groupNameField,a=e.radio;e.canBeAdminManaged;return{name:t,members:JSON.stringify([{name:i.Viewer.get_viewer().display_name,email:i.Viewer.get_viewer().work_email,is_owner:g(r,o,"true"===a)}]),is_admin_managed:f(r,o,"true"===a)}},subject_user:i.Viewer.get_viewer().work_user},autoCloseOnError:!1,fields:{groupNameField:{fieldValue:""},radio:{fieldValue:"true"}}})(a.__assign({canHaveAdminUi:o,isLimitedTeam:r},s))},t.showCreateGroupModal=function(e){return s.showModal(o.default.createElement(t.CreateGroupModalAction,a.__assign({},e)))}})),define("modules/clean/groups/switch_to_member_managed_group_modal",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","jquery","modules/clean/ajax","modules/clean/groups/group_members_form","modules/clean/groups/utils","modules/clean/react/modal","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importStar(s),n=a.__importStar(n),i=a.__importDefault(i),l=a.__importStar(l),u=a.__importDefault(u),m=a.__importDefault(m);var f=p.Viewer.get_viewer(),_=o.default({displayName:"SwitchToMemberManagedGroupModal",propTypes:{group:n.object,onMemberManaged:n.func,insideAdminConsole:n.bool},getInitialState:function(){return{canProceed:!0,submitting:!1}},componentDidMount:function(){return i.default(".contacts-tokenizer-input").select()},_canProceed:function(){return null!=this.refs.members?this.refs.members.areAllContactsValid():void 0},onSubmit:function(e){var t=this;return e.preventDefault(),this.refs.members.getFinalData((function(e){var a=e.emails,o=t._canProceed();if(t.setState({canProceed:o}),o){t.setState({submitting:!0});var r=t.props.group.name,s=t.props.onMemberManaged;return l.WebRequest({url:"/groups_ajax/change_to_member_managed_type",data:{new_owners:JSON.stringify(a),group_id:t.props.group.id},subject_user:f.work_user,complete:function(){if(t.isMounted())return t.setState({submitting:!1})},success:function(e){g.Notify.success(c.intl.formatMessage({defaultMessage:"{group_name} is now user-managed"},{group_name:r})),d.Modal.close();var t=Array.from(a).map((function(e){return e.email}));return s(t)},error:function(e){if(m.default.isGroupDeleted(e))return d.Modal.close(),m.default.redirectToGroupsPage(t.props.insideAdminConsole)}})}}))},onMembersFormChange:function(){return this.setState({canProceed:this._canProceed()})},render:function(){return r.default.createElement(d.Modal,{title:c.intl.formatMessage({defaultMessage:"Make user-managed?"}),id:"switch-to-member-managed-group-modal",acceptButtonText:c.intl.formatMessage({defaultMessage:"Make user-managed"}),dismissButtonText:c.intl.formatMessage({defaultMessage:"Cancel"}),acceptButtonDisabled:!this.state.canProceed,submitting:this.state.submitting,onAccept:this.onSubmit,ref:"modal"},s.label({className:"label-description"},c.intl.formatMessage({defaultMessage:"This will become a user-managed group, and the person you choose below will be responsible for approving new members. Group members can leave whenever they like."})),s.br({}),s.br({}),s.label({className:"label-description-secondary"},c.intl.formatMessage({defaultMessage:"Who should manage this group?"})),r.default.createElement(u.default,{ref:"members",group:this.props.group,onChange:this.onMembersFormChange,errorMessageSpaceFixed:!1,includeCustomMessage:!1,emailPlaceholder:c.intl.formatMessage({defaultMessage:"Name or email address"}),disallowGroupMembers:!1}))}});t.default=_})),define("modules/clean/teams/admin/modals/fetch_ui_data_and_show_modal",["require","exports","tslib","react","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/components/modals/show_modal","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,r,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),t.fetchUserUiDataAndShowModal=function(e,t,l,u){return a.__awaiter(this,void 0,void 0,(function(){var m,d,p;return a.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,(new r.default).userUiInfo(e)];case 1:for(p in m=c.sent(),d={},u)d[u[p]]=m[p];return s.showModal(o.default.createElement(t,a.__assign({},d,l))),[3,3];case 2:return c.sent(),i.Notify.error(n.intl.formatMessage({defaultMessage:"Failed to load modal"})),[3,3];case 3:return[2]}}))}))}})),define("modules/clean/teams/modals/delete_team_modal",["require","exports","tslib","react","prop-types","modules/clean/ajax","modules/clean/react/modal","modules/clean/viewer","modules/core/browser","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,r,s,n,i,l,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importStar(r),s=a.__importStar(s),l=a.__importStar(l);var d=i.Viewer.get_viewer(),p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={submitting:!1},t._teamDeleted=function(){return m.Notify.success(u.intl.formatMessage({defaultMessage:"You successfully deleted the team."})),l.redirect("/home")},t._onAccept=function(){return t.setState({submitting:!0}),s.WebRequest({url:"/team/manage/delete",data:{team_id:t.props.teamId,_subject_uid:d.work_user.id},complete:function(){return t._teamDeleted()},success:function(){return t._teamDeleted()}})},t}return a.__extends(t,e),t.prototype.render=function(){var e=u.intl.formatMessage({defaultMessage:"The {team_name} team will be permanently deleted and all members will be removed. Your team’s folders will be converted to shared folders, nested shared folders will be flattened and your {team_name} groups will be deleted. Every member’s account will be converted to a personal Dropbox."},{team_name:this.props.teamName});return o.default.createElement(n.Modal,{title:u.intl.formatMessage({defaultMessage:"Delete team?"}),acceptButtonText:u.intl.formatMessage({defaultMessage:"Delete"}),dismissButtonText:u.intl.formatMessage({defaultMessage:"Cancel"}),submitting:this.state.submitting,acceptButtonDisabled:this.state.submitting,dismissButtonDisabled:this.state.submitting,autoClose:!1,onAccept:this._onAccept},e)},t.displayName="DeleteTeamModal",t.propTypes={teamName:r.string.isRequired,teamId:r.number.isRequired},t})(o.default.Component);t.DeleteTeamModal=p})),define("modules/clean/teams/modals/sole_admin_warning_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/alert_utility_modal","modules/clean/components/modals/show_modal"],(function(e,t,a,o,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.SoleAdminWarningModal=function(e){var t=e.teamName,a=e.action,n=e.onPrimaryAction,i=void 0===n?function(){}:n,l=e.onRequestClose,u=void 0===l?function(){}:l,m=r.intl.formatMessage({defaultMessage:"You must give admin permissions to someone else"}),d=r.intl.formatMessage({defaultMessage:"I understand"}),p="leave"===a?r.intl.formatMessage({defaultMessage:"Since you’re the only admin of {team_name}, you need to give someone else on your team admin permissions before you leave the team. You can do this by clicking the gear icon to the right of a team member’s name and selecting “Give admin permissions”."},{team_name:t}):r.intl.formatMessage({defaultMessage:"In order to remove your admin permissions, you must first give admin permissions to someone else on your team. You can do this by clicking the gear icon to the right of a team member’s name and selecting “Give admin permissions”."});return o.default.createElement(s.AlertUtilityModal,{title:m,primaryAction:d,width:"698px",onPrimaryAction:i,onRequestClose:u},p)},t.showSoleAdminWarningModal=function(e){return n.showModal(t.SoleAdminWarningModal(a.__assign({},e)))}})),define("modules/clean/teams/modals/leave_team_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,r,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.LeaveLimitedTeamModal=function(e){e.userId;var t=e.teamName,a=e.canHaveAdminUi,s=e.onRequestClose,i=void 0===s?function(){}:s,l=e.onPrimaryAction,u=void 0===l?function(){}:l,m=e.onSecondaryAction,d=void 0===m?function(){}:m,p=n.intl.formatMessage({defaultMessage:"Leave team?"}),c=n.intl.formatMessage({defaultMessage:"Leave team"}),g="";return g=a?n.intl.formatMessage({defaultMessage:"You’ll lose access to all {team_name} groups. Your account will be converted to a personal Dropbox."},{team_name:t}):n.intl.formatMessage({defaultMessage:"You’ll lose access to the {team_name} team folder and all {team_name} groups. Your account will be converted to a personal Dropbox."},{team_name:t}),o.default.createElement(r.ActionUtilityModal,{title:p,primaryAction:c,onPrimaryAction:u,onSecondaryAction:d,onRequestClose:i},g)},t.LEAVE_TEAM_URL="/team/manage/leave",t.LeaveLimitedTeamModalAction=function(e){var o=e.userId,r=e.teamName,s=e.canHaveAdminUi,l=a.__rest(e,["userId","teamName","canHaveAdminUi"]);return i.modalAjax({modal:t.LeaveLimitedTeamModal,ajax:{url:t.LEAVE_TEAM_URL,data:{user_id:o}},notify:{successNotify:n.intl.formatMessage({defaultMessage:"You left the team."})}})(a.__assign({userId:o,teamName:r,canHaveAdminUi:s},l))},t.showLeaveLimitedTeamModal=function(e){return s.showModal(o.default.createElement(t.LeaveLimitedTeamModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/delete_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.DeleteGroupModal=function(e){e.groupId;var t=e.groupName,a=e.onRequestClose,s=void 0===a?function(){}:a,i=e.onPrimaryAction,l=void 0===i?function(){}:i,u=e.onSecondaryAction,m=void 0===u?function(){}:u,d=n.intl.formatMessage({defaultMessage:"Delete “{group_name}”?"},{group_name:t}),p=n.intl.formatMessage({defaultMessage:"Delete"}),c=n.intl.formatMessage({defaultMessage:"<paragraph>Deleting “{group_name}” will cause all of its members to lose access to folders that have been shared with the group. You will not be able to undo this.</paragraph> <paragraph>It might take a little while for deleted groups to be removed from all their shared folders.</paragraph> <paragraph>Are you sure you want to delete the group?</paragraph>"},{paragraph:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("p",null,e)},group_name:t});return o.default.createElement(r.ActionUtilityModal,{title:d,primaryAction:p,id:"delete-group-modal",onPrimaryAction:l,onSecondaryAction:m,onRequestClose:s},c)},t.DELETE_GROUP_URL="/groups_ajax/remove_group",t.DeleteGroupModalAction=function(e){var o=e.groupId,r=e.groupName,s=a.__rest(e,["groupId","groupName"]);return l.modalAjax({modal:t.DeleteGroupModal,ajax:{url:t.DELETE_GROUP_URL,data:{group_id:o},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:n.intl.formatMessage({defaultMessage:"Deleting group..."})}})(a.__assign({groupId:o,groupName:r},s))},t.showDeleteGroupModal=function(e){return s.showModal(o.default.createElement(t.DeleteGroupModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/remove_user_from_group_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.RemoveUserFromGroupModal=function(e){e.groupId;var t=e.groupName,a=(e.userId,e.userDisplayName),s=e.removeSelf,i=e.onRequestClose,l=void 0===i?function(){}:i,u=e.onPrimaryAction,m=void 0===u?function(){}:u,d=e.onSecondaryAction,p=void 0===d?function(){}:d,c=s?n.intl.formatMessage({defaultMessage:"Leave “{group_name}”?"},{group_name:t}):n.intl.formatMessage({defaultMessage:"Remove {name}?"},{name:a}),g=s?n.intl.formatMessage({defaultMessage:"Leave"}):n.intl.formatMessage({defaultMessage:"Remove"}),f=s?(function(e){return n.intl.formatMessage({defaultMessage:"<paragraph>Leaving “{group_name}” will cause you to lose access to folders that have been shared with the group.</paragraph> <paragraph>It might take a little while to remove you from all of the group’s shared folders.</paragraph> <paragraph>Are you sure you want to leave the group?</paragraph>"},{paragraph:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("p",null,e)},group_name:e})})(t):(function(e){return n.intl.formatMessage({defaultMessage:"<paragraph>Removing {name} will cause them to lose access to folders that have been shared with the group.</paragraph> <paragraph>It might take a little while to remove members from all of this group’s shared folders.</paragraph> <paragraph>Are you sure you want to do this?</paragraph>"},{paragraph:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("p",null,e)},name:e})})(a);return o.default.createElement(r.ActionUtilityModal,{title:c,id:"remove-user-from-group-modal",primaryAction:g,onPrimaryAction:m,onSecondaryAction:p,onRequestClose:l},f)},t.REMOVE_FROM_GROUP_URL="/groups_ajax/remove_user_from_group",t.RemoveUserFromGroupModalActionWithoutCSS=function(e){var o=e.groupId,r=e.groupName,s=e.userId,u=e.userDisplayName,m=e.removeSelf,d=a.__rest(e,["groupId","groupName","userId","userDisplayName","removeSelf"]);return l.modalAjax({modal:t.RemoveUserFromGroupModal,ajax:{url:t.REMOVE_FROM_GROUP_URL,data:{group_id:o,user_id:s},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:m?n.intl.formatMessage({defaultMessage:"Leaving group..."}):n.intl.formatMessage({defaultMessage:"Removing member..."})}})(a.__assign({groupId:o,groupName:r,userId:s,userDisplayName:u,removeSelf:m},d))},t.RemoveUserFromGroupModalAction=t.RemoveUserFromGroupModalActionWithoutCSS,t.showRemoveUserFromGroupModal=function(e){return s.showModal(o.default.createElement(t.RemoveUserFromGroupModalAction,a.__assign({},e)))}})),define("modules/clean/teams/modals/rename_group_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/groups/utils","modules/clean/rondo/forms/index","modules/clean/teams/admin/modals/modal_ajax","spectrum/label","spectrum/button","modules/clean/viewer"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),i=a.__importDefault(i),t.RenameGroupModal=function(e){var t=e.origGroupName,n=e.groupNameField,u=e.onRequestClose,p=void 0===u?function(){}:u,c=e.onPrimaryAction,g=void 0===c?function(){}:c,f=e.onSecondaryAction,_=void 0===f?function(){}:f,h=function(){return n&&n.fieldValue.length>i.default.MAX_GROUP_NAME_LEN},M=!h()?o.default.createElement(m.Label,{className:"label-group-name",htmlFor:"group-name-input"},r.intl.formatMessage({defaultMessage:"Group name"})):o.default.createElement(m.Label,{className:"label-group-name-error",htmlFor:"group-name-input"},r.intl.formatMessage({defaultMessage:"Group name"})," ","- ",h()?r.intl.formatMessage({defaultMessage:"Must be under 140 characters"}):"");return o.default.createElement(s.ActionUtilityModal,{title:r.intl.formatMessage({defaultMessage:"Edit ‘{group_name}’"},{group_name:t}),id:"rename-group-modal",primaryAction:function(){var e=!h();return o.default.createElement(d.Button,{onClick:g,disabled:!e},r.intl.formatMessage({defaultMessage:"Save changes"}))},onPrimaryAction:g,onSecondaryAction:_,onRequestClose:p,overlayClickClose:!0},o.default.createElement("div",{className:"update-group-modal-body"},o.default.createElement("div",null,M),o.default.createElement(l.Input,a.__assign({className:"group-name-input",id:"group-name-input",onPrimaryAction:g},n))))},t.RENAME_GROUP_URL="/groups_ajax/update_group",t.RenameGroupModalApp=function(e){var o=e.groupId,r=e.origGroupName,s=a.__rest(e,["groupId","origGroupName"]);return u.modalAjax({modal:t.RenameGroupModal,ajax:{url:t.RENAME_GROUP_URL,data:function(e){var t=e.groupNameField;return{group_id:o,new_name:t}},subject_user:p.Viewer.get_viewer().work_user},autoCloseOnError:!1,fields:{groupNameField:{fieldValue:r}}})(a.__assign({origGroupName:r},s))},t.showRenameGroupModal=function(e){return n.showModal(o.default.createElement(t.RenameGroupModalApp,a.__assign({},e)))}})),define("modules/clean/teams/modals/make_company_managed_modal",["require","exports","tslib","react","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/core/i18n","modules/clean/viewer","modules/clean/teams/admin/modals/modal_ajax"],(function(e,t,a,o,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.MakeCompanyManagedModal=function(e){e.groupId,e.groupName;var t=e.onRequestClose,a=void 0===t?function(){}:t,s=e.onPrimaryAction,i=void 0===s?function(){}:s,l=e.onSecondaryAction,u=void 0===l?function(){}:l,m=n.intl.formatMessage({defaultMessage:"Make company-managed?"}),d=n.intl.formatMessage({defaultMessage:"Make company-managed"}),p=n.intl.formatMessage({defaultMessage:"This will become a company-managed group, and admins will be responsible for adding and removing members."});return o.default.createElement(r.ActionUtilityModal,{title:m,primaryAction:d,onPrimaryAction:i,onSecondaryAction:u,onRequestClose:a},p)},t.MAKE_COMPANY_MANAGED_URL="/groups_ajax/change_to_admin_managed_type",t.MakeCompanyManagedModalAction=function(e){var o=e.groupId,r=e.groupName,s=a.__rest(e,["groupId","groupName"]);return l.modalAjax({modal:t.MakeCompanyManagedModal,ajax:{url:t.MAKE_COMPANY_MANAGED_URL,data:{group_id:o},subject_user:i.Viewer.get_viewer().work_user},notify:{successNotify:n.intl.formatMessage({defaultMessage:"{group_name} is now company-managed"},{group_name:r})}})(a.__assign({groupId:o,groupName:r},s))},t.showMakeCompanyManagedModal=function(e){return s.showModal(o.default.createElement(t.MakeCompanyManagedModalAction,a.__assign({},e)))}})),define("modules/clean/groups/group_members_form",["require","exports","tslib","classnames","create-react-class","react","react-dom-factories","prop-types","external/lodash","modules/clean/ajax","modules/clean/analytics","modules/clean/contacts/contact","modules/clean/contacts/contact_token_state","modules/clean/contacts/tokenizer","modules/clean/contacts/types","modules/clean/react/input","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g,f,_,h,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importDefault(s),n=a.__importStar(n),i=a.__importStar(i),l=a.__importStar(l),u=a.__importStar(u),g=a.__importDefault(g),f=a.__importStar(f);var b=_.Viewer.get_viewer(),v=r.default({displayName:"GroupMembersForm",propTypes:{group:i.object,populatedContacts:i.arrayOf(i.instanceOf(d.Contact)),customClass:i.string,onChange:i.func,emailPlaceholder:i.string,messagePlaceholder:i.string,errorMessageSpaceFixed:i.bool,emailCheckerStore:i.object,includeCustomMessage:i.bool,disallowGroupMembers:i.bool,disallowCurrentUser:i.bool},getDefaultProps:function(){return{customClass:"",populatedContacts:[],emailPlaceholder:h.intl.formatMessage({defaultMessage:"Name or email"}),messagePlaceholder:h.intl.formatMessage({defaultMessage:"Add a message (optional)"}),includeCustomMessage:!0,disallowGroupMembers:!1,disallowCurrentUser:!1}},getInitialState:function(){return{errorMessage:null,groupUsersEmails:Array.from(this.props.group.users).map((function(e){return e.email}))}},fetchEmailsOfUsersInGroup:function(){var e=this;return u.WebRequest({url:"/groups_ajax/get_emails_of_users_in_group",data:{group_id:this.props.group.id},subject_user:b.work_user,success:function(t){if(e.isMounted()&&(t=JSON.parse(t)).data.emails.length>0)return e.setState({groupUsersEmails:t.data.emails})},error:function(){return M.Notify.error(h.intl.formatMessage({defaultMessage:"There was a problem please reopen the add-member window"}))}})},componentWillMount:function(){if(this.fetchEmailsOfUsersInGroup(),this.props.populatedContacts.length>0)return this._updateErrorMessage()},getContacts:function(){return this.refs.tokenizer.getContacts()},getFinalData:function(e){var t;this.refs.tokenizer.tokenizeAll();var a=this.getContacts();this.props.includeCustomMessage&&(t=this.refs.message.getValue());var o=l.filter(a,(function(e){return e.type===g.default.EMAIL})),r=l.map(o,(function(e){return{email:e.email,is_owner:!1}}));return this._updateErrorMessage(),e({emails:r,custom_message:t})},areAllContactsValid:function(){var e=this,t=this.refs.tokenizer.serializeInputData().tokens;return 0===t.length||l.every(t,(function(t){return e._validateContact(t).state===p.ContactTokenState.ok}))},isEmpty:function(){var e=this.refs.tokenizer.serializeInputData(),t=e.tokens,a=e.value;return 0===t.length&&0===a.length},_validateContact:function(e){var t={state:p.ContactTokenState.ok};return e.invalid?t={state:p.ContactTokenState.invalid,msg:h.intl.formatMessage({defaultMessage:"One or more names or email addresses you entered are invalid."})}:this.props.disallowGroupMembers&&Array.from(this.state.groupUsersEmails).includes(e.email)?t={state:p.ContactTokenState.invalid,msg:h.intl.formatMessage({defaultMessage:"Member already exists in the group."})}:e.on_team||(t={state:p.ContactTokenState.invalid,msg:h.intl.formatMessage({defaultMessage:"This person isn’t on your team"})}),t},_updateErrorMessage:function(){for(var e=0,t=Array.from(this.refs.tokenizer.serializeInputData().tokens);e<t.length;e++){var a=t[e],o=this._validateContact(a),r=o.state,s=o.msg;if(r!==p.ContactTokenState.ok)return m.TeamsWebActionsLogger.log("groups_add_members_error",{error_reason:s}),void this.setState({errorMessage:s})}return this.setState({errorMessage:null})},onContentsChange:function(){return this._updateErrorMessage(),"function"==typeof this.props.onChange?this.props.onChange():void 0},render:function(){var e=this,t={"add-group-members-form":!0,"error-message-fixed":this.props.errorMessageSpaceFixed,"has-custom-message":this.props.includeCustomMessage};this.props.customClass&&(t[this.props.customClass]=!0);return n.div({className:o.default(t)},n.div({className:"error-message"},this.state.errorMessage),s.default.createElement(c.ContactsTokenizer,{ref:"tokenizer",user:b.work_user,placeholder:this.props.emailPlaceholder,onContentsChange:this.onContentsChange,autofocus:!0,populatedInputData:{tokens:this.props.populatedContacts,value:""},customContactValidator:this._validateContact,customContactFilter:function(t){var a=t.type===g.default.EMAIL&&t.team&&(t.dbx_team_id===b.team_dbtid||t.dbx_team_id===b.work_user.team_dbtid);return e.props.disallowGroupMembers&&(a=a&&!Array.from(e.state.groupUsersEmails).includes(t.email)),e.props.disallowCurrentUser&&(a=a&&t.email!==b.work_user.email),Boolean(a)}}),this.props.includeCustomMessage?s.default.createElement(f.textarea,{ref:"message",className:"custom-message","disable-errors":!0,"aria-label":"member emails",placeholder:this.props.messagePlaceholder}):void 0)}});t.default=v})),define("modules/clean/teams/admin/widgets/remove_user_for_limited_team_modal/remove_user_for_limited_team_modal",["require","exports","tslib","react","react-intl","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/teams/admin/modals/modal_ajax","modules/clean/teams/admin/modals/fetch_ui_data_and_show_modal"],(function(e,t,a,o,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.RemoveUserForLimitedTeamModal=function(e){var t=e.displayName,a=e.fName,i=e.teamName,l=e.email,u=e.isAdmin,m=e.isActive,d=e.onRequestClose,p=void 0===d?function(){}:d,c=e.onPrimaryAction,g=void 0===c?function(){}:c,f=e.onSecondaryAction,_=void 0===f?function(){}:f,h=m?s.intl.formatMessage({defaultMessage:"Remove member?"}):s.intl.formatMessage({defaultMessage:"Remove pending member?"}),M=s.intl.formatMessage(t?r.defineMessage({defaultMessage:"{display_name} ({email})"}):r.defineMessage({defaultMessage:"{email}"}),{display_name:t,email:l}),b=s.intl.formatMessage({defaultMessage:"Remove"}),v=s.intl.formatMessage((function(e,t){return t&&e?r.defineMessage({defaultMessage:"{id_string} will lose access to all {team_name} groups. {first_name}’s account will be converted to a personal Dropbox."}):t&&!e?r.defineMessage({defaultMessage:"{id_string} will lose access to the {team_name} team folder and be removed from all {team_name} groups. {first_name}’s account will be converted to a personal Dropbox."}):r.defineMessage({defaultMessage:"{id_string} will be removed from the members list. Any invitation or activation links you’ve sent will no longer work."})})(u,m),{id_string:M,team_name:i,first_name:a});return o.default.createElement(n.ActionUtilityModal,{title:h,primaryAction:b,onPrimaryAction:g,onSecondaryAction:_,onRequestClose:p},v)},t.REMOVE_USER_URL=function(e){return e?"/team/join_request/reject":"/team/manage/kick"},t.SUCCESS_NOTIFY=function(e){return e?s.intl.formatMessage({defaultMessage:"Member removed."}):s.intl.formatMessage({defaultMessage:"Pending member removed."})},t.RemoveUserForLimitedTeamModalAction=function(e){var o=e.userId,r=e.displayName,s=e.fName,n=e.teamName,l=e.email,u=e.isAdmin,m=e.isActive,d=e.joinRequestStatus,p=a.__rest(e,["userId","displayName","fName","teamName","email","isAdmin","isActive","joinRequestStatus"]);return i.modalAjax({modal:t.RemoveUserForLimitedTeamModal,ajax:{url:t.REMOVE_USER_URL(d),data:{user_id:o}},notify:{successNotify:t.SUCCESS_NOTIFY(m)}})(a.__assign({userId:o,displayName:r,fName:s,teamName:n,email:l,isAdmin:u,isActive:m,joinRequestStatus:d},p))},t.showRemoveUserForLimitedTeamModal=function(e){l.fetchUserUiDataAndShowModal(e.userId,t.RemoveUserForLimitedTeamModalAction,e,{fname:"fName"})}})),define("modules/clean/teams/modals/team_admin_roles_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/css","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/teams/admin/modals/modal_ajax","spectrum/button","modules/clean/rondo/forms/index","modules/clean/teams/constants","modules/clean/react/sprite","modules/clean/viewer"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=(function(e){function t(t){var s=e.call(this,t)||this;return s._getOptionForRole=function(e,t,r){var n=s._getAdminRoleName(e);return o.default.createElement("label",{htmlFor:"role_"+e},o.default.createElement("div",{className:"team-role-option"},o.default.createElement("div",{className:"team-role-input"},o.default.createElement(m.RadioButton,a.__assign({id:"role_"+e,className:"inputRadio"+e,value:e,name:"newAdminRole"},s.props.newAdminRole))),o.default.createElement("div",{className:"team-role-illustation"},o.default.createElement(p.Sprite,{group:"teams",name:t,alt:n})),o.default.createElement("div",{className:"team-role-desc"},o.default.createElement("span",{className:"team-role-title"},n),o.default.createElement("br",null),r)))},s._isSameRole=function(){return s.props.newAdminRole.fieldValue===s.origAdminRoleString},s._getRolesModalTitle=function(){return s.props.isAdmin?r.intl.formatMessage({defaultMessage:"Change admin permissions for {name}"},{name:s.props.displayName}):r.intl.formatMessage({defaultMessage:"Add admin permissions for {name}"},{name:s.props.displayName})},s._getAdminRolesModalBody=function(){return o.default.createElement("div",{className:"team-role-modal"},o.default.createElement("a",{href:"/help/9056",target:"_blank",rel:"noreferrer"},r.intl.formatMessage({defaultMessage:"Learn about the different admin roles"})),o.default.createElement("br",null),o.default.createElement("br",null),o.default.createElement("div",{className:"team-role-panel"},s._getOptionForRole(d.ADMIN_ROLE.SUPER.toString(),"team_admin",r.intl.formatMessage({defaultMessage:"Manage everything for all admins and members"})),o.default.createElement("div",{className:"team-role-divider"}),s._getOptionForRole(d.ADMIN_ROLE.USER_MANAGEMENT.toString(),"accounts_admin",r.intl.formatMessage({defaultMessage:"Add, remove, and manage member accounts"})),o.default.createElement("div",{className:"team-role-divider"}),s._getOptionForRole(d.ADMIN_ROLE.HELPDESK.toString(),"support_admin",r.intl.formatMessage({defaultMessage:"Help members with limited tasks, including password reset"}))))},s._getConfirmChangesModalTitle=function(){return s.props.isAdmin?s.props.newAdminRole.fieldValue===d.ADMIN_ROLE.NONE.toString()?r.intl.formatMessage({defaultMessage:"Remove admin permissions for {name}"},{name:s.props.displayName}):r.intl.formatMessage({defaultMessage:"Change admin permissions for {name}"},{name:s.props.displayName}):r.intl.formatMessage({defaultMessage:"Add admin permissions for {name}"},{name:s.props.displayName})},s._getConfirmChangesModalBodyText=function(){if(s.props.isAdmin)return s.props.newAdminRole.fieldValue===d.ADMIN_ROLE.NONE.toString()?r.intl.formatMessage({defaultMessage:"{name} won’t have access to the admin console and won’t be able to manage other accounts. Are you sure you want to continue?"},{name:s.props.displayName}):s._isSameRole()?r.intl.formatMessage({defaultMessage:"{name} is already a {new_role}."},{name:s.props.displayName,new_role:s._getAdminRoleName(s.props.newAdminRole.fieldValue)}):r.intl.formatMessage({defaultMessage:"Are you sure you want to change permissions for {name} from {old_role} to {new_role}?"},{name:s.props.displayName,old_role:s._getAdminRoleName(s.origAdminRoleString),new_role:s._getAdminRoleName(s.props.newAdminRole.fieldValue)});switch(s.props.newAdminRole.fieldValue){case d.ADMIN_ROLE.SUPER.toString():return r.intl.formatMessage({defaultMessage:"Team Admins can manage everything for all admins and members. Are you sure you want to continue?"});case d.ADMIN_ROLE.USER_MANAGEMENT.toString():return r.intl.formatMessage({defaultMessage:"User Management Admins can add, remove, and manage member accounts. Are you sure you want to continue?"});case d.ADMIN_ROLE.HELPDESK.toString():return r.intl.formatMessage({defaultMessage:"Support Admins can help members with limited tasks, including password reset. Are you sure you want to continue?"});default:return}},s._getConfirmChangesModalBody=function(){return o.default.createElement("div",null,o.default.createElement("p",null,s._getConfirmChangesModalBodyText()))},s._goToConfirmChanges=function(){s.setState({isRoleSelectionPage:!1})},s._onLinkClick=function(){s.props.newAdminRole.actionFieldChange(d.ADMIN_ROLE.NONE.toString()),s.setState({isRoleSelectionPage:!1})},s._roleSelectionActionButton=function(){return o.default.createElement(u.Button,{onClick:s._goToConfirmChanges},r.intl.formatMessage({defaultMessage:"Continue"}))},s._roleSelectionDismissButton=function(){return r.intl.formatMessage({defaultMessage:"Cancel"})},s._confirmChangesActionButton=function(){return s.props.isAdmin?s.props.newAdminRole.fieldValue===d.ADMIN_ROLE.NONE.toString()?r.intl.formatMessage({defaultMessage:"Remove admin permissions"}):s._isSameRole()?function(){return o.default.createElement("div",null)}:r.intl.formatMessage({defaultMessage:"Change admin permissions"}):r.intl.formatMessage({defaultMessage:"Add admin permissions"})},s._confirmChangesDismissButton=function(){return s._isSameRole()&&s.props.isAdmin?r.intl.formatMessage({defaultMessage:"Got it"}):r.intl.formatMessage({defaultMessage:"Cancel"})},s._linkButton=function(){return s.state.isRoleSelectionPage&&s.props.isAdmin?r.intl.formatMessage({defaultMessage:"Remove admin permissions"}):void 0},s.state={isRoleSelectionPage:!0},s.origAdminRoleString=s.props.origAdminRole.toString(),s}return a.__extends(t,e),t.prototype._getAdminRoleName=function(e){return d.ADMIN_ROLE_NAMES[Number(e)]},t.prototype.render=function(){var e=this,t=this.props,a=t.onPrimaryAction,r=t.onSecondaryAction,s=t.onRequestClose,i=this.state.isRoleSelectionPage,l=i?this._getRolesModalTitle():this._getConfirmChangesModalTitle(),u=i?this._getAdminRolesModalBody():this._getConfirmChangesModalBody(),m=i?function(){return e._roleSelectionActionButton()}:this._confirmChangesActionButton(),d=i?this._roleSelectionDismissButton():this._confirmChangesDismissButton(),p=this._linkButton();return o.default.createElement(n.ActionUtilityModal,{title:l,id:"team-admin-roles=modal",primaryAction:m,secondaryAction:d,onPrimaryAction:a,onSecondaryAction:r,onRequestClose:s,link:p,onLink:this._onLinkClick},u)},t})((o=a.__importDefault(o)).default.Component);t.TeamAdminRolesModal=g,t.CHANGE_ADMIN_ROLE_URL="/account/team/set_admin_status",t.TeamAdminRolesModalAppWithoutCSS=function(e){var o=e.userId,r=e.origAdminRole,s=a.__rest(e,["userId","origAdminRole"]);return l.modalAjax({modal:g,ajax:{url:t.CHANGE_ADMIN_ROLE_URL,data:function(e){var t=e.newAdminRole;return{user_id:o,on:t!==d.ADMIN_ROLE.NONE.toString()?"yes":"no",role:t}},subject_user:c.Viewer.get_viewer().work_user},fields:{newAdminRole:{fieldValue:r!==d.ADMIN_ROLE.NONE?r.toString():"0"}}})(a.__assign({userId:o,origAdminRole:r},s))},t.TeamAdminRolesModalApp=s.requireCssWithComponent(t.TeamAdminRolesModalAppWithoutCSS,["/static/css/teams/admin_team_modals-vflzyAU0s.css"]),t.showTeamAdminRolesModal=function(e){return i.showModal(o.default.createElement(t.TeamAdminRolesModalApp,a.__assign({},e)))}})),define("modules/clean/groups/single_group_page",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","modules/clean/ajax","modules/clean/analytics","modules/clean/avatar/group_avatar","modules/clean/css","modules/clean/groups/add_group_members_modal","modules/clean/groups/group_member_list","modules/clean/teams/modals/remove_user_from_group_modal","modules/clean/teams/modals/rename_group_modal","modules/clean/groups/switch_to_member_managed_group_modal","modules/clean/groups/utils","modules/clean/react/button","modules/clean/react/image","modules/clean/react/input","modules/core/browser","modules/clean/react/modal","modules/clean/static_urls","modules/clean/viewer","modules/core/i18n"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g,f,_,h,M,b,v,y,w,A,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importStar(s),n=a.__importStar(n),i=a.__importStar(i),u=a.__importDefault(u),m=a.__importStar(m),d=a.__importDefault(d),f=a.__importDefault(f),_=a.__importDefault(_),h=a.__importStar(h),b=a.__importStar(b),v=a.__importStar(v);var N=r.default.createElement,S=b.text,C=A.Viewer.get_viewer(),E=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showRenameGroupModal=function(){return g.showRenameGroupModal({groupId:t.props.group.id,origGroupName:t.props.group.name,success:function(){t.props.onGroupChanged(!0,null)},error:function(e,a){_.default.isGroupDeleted(e)&&(a(),_.default.redirectToGroupsPage(t.props.insideAdminConsole),t.props.onGroupChanged(!0,null))}})},t.showAddMembersModal=function(){return y.Modal.showInstance(r.default.createElement(d.default,{group:t.props.group,insideAdminConsole:t.props.insideAdminConsole,onGroupChanged:t.props.onGroupChanged}))},t.renderGroupInfo=function(){var e;if(t.props.group.is_team_group)e=R.intl.formatMessage({defaultMessage:"This group was created automatically and includes invited members. To change who’s in the group, admins can add or remove members of {team_name}"},{team_name:t.props.teamName});else{var a=void 0;if(t.props.group.is_admin_managed)a=t.props.teamName;else if(t.props.group.owners.length>0){for(var o=[],r=0,n=Array.from(t.props.group.owners);r<n.length;r++){var i=n[r];o.push(i.name)}a=o.join(", ")}else a="-";e=R.intl.formatMessage({defaultMessage:"Managed by "})+a}return t.props.insideAdminConsole?s.div({className:"current-location"},s.span({className:"group-info-container"},N(u.default,{group:t.props.group,dimension:48,optionalClass:"u-mar-right-s"})),s.span({className:"group-info"},s.span({className:"group-name-container"},s.span({className:"group-name"},t.props.group.name)),s.span({className:"group-managers"},e))):[s.h2({className:"group-name"},R.intl.formatMessage({defaultMessage:"Information"})),s.h3({className:"group-managers u-mar-bottom-xs"},e)]},t.onAdminManaged=function(){return t.props.onGroupChanged(!0,null)},t.onMemberManaged=function(e){var a=0;t.props.group.is_admin_managed=!1,t.props.group.owners=[];for(var o=0,r=Array.from(t.props.group.users);o<r.length;o++){var s=r[o];Array.from(e).includes(s.email)&&(s.is_owner=!0,t.props.group.owners.push(s),a+=1)}var n=a<e.length;return t.props.onGroupChanged(n,t.props.group)},t.showSwitchToMemberManagedGroupModal=function(){return y.Modal.showInstance(r.default.createElement(f.default,{group:t.props.group,onMemberManaged:t.onMemberManaged,insideAdminConsole:t.props.insideAdminConsole}))},t.renderNonOwnerMemberButtons=function(){return r.default.createElement(h.button,{className:"leave-group-button",importance:"tertiary",onClick:function(){return c.showRemoveUserFromGroupModal({groupId:t.props.group.id,groupName:t.props.group.name,userId:C.work_user.id,userDisplayName:C.work_user.display_name,removeSelf:!0,onPrimaryAction:function(){v.set_hash("groups")}})}},R.intl.formatMessage({defaultMessage:"Leave group"}))},t}return a.__extends(t,e),t.prototype.render=function(){return s.div({className:"single-group-header"},s.div({className:"group-header"},this.renderGroupInfo()))},t.displayName="SingleGroupHeader",t.propTypes={group:n.object,canHaveAdminUi:n.bool,teamName:n.string,onGroupChanged:n.func,groupControlledByAdmin:n.bool,isLimitedTeam:n.bool,insideAdminConsole:n.bool,isMaestroDesign:n.bool},t})(r.default.Component),D=o.default({displayName:"SingleGroupPage",propTypes:{groupId:n.string,canHaveAdminUi:n.bool,teamName:n.string,groupControlledByAdmin:n.bool,isLimitedTeam:n.bool,insideAdminConsole:n.bool,isMaestroDesign:n.bool,onNewGroupFetched:n.func},getInitialState:function(){return{group:void 0}},componentWillMount:function(){return this.fetchGroup(this.props.groupId)},componentWillReceiveProps:function(e){if(this.props.groupId!==e.groupId)return this.setState({group:void 0}),this.fetchGroup(e.groupId)},fetchGroup:function(e,t,a,o,r){var s=this;return void 0===t&&(t=0),void 0===a&&(a="display_name_lower"),void 0===o&&(o=1),void 0===r&&(r=null),this.setState({loading:!0,search_query:r}),i.WebRequest({url:"/groups_ajax/get_group_info",data:{group_id:e,offset:t,limit:_.default.MAX_ROWS_TO_FETCH_FROM_SERVER,sort_column:a,sort_direction:o,search_query:r},subject_user:C.work_user,success:function(e){if(s.isMounted()){if(e=JSON.parse(e),s.state.search_query!==r)return;return s.setState({group:e.data,loading:!1}),"function"==typeof s.props.onNewGroupFetched?s.props.onNewGroupFetched(e.data):void 0}},error:function(e){return _.default.redirectToGroupsPage(s.props.insideAdminConsole)}})},onUserTextChange:function(e){var t=this,a=e.target.value;return window.clearTimeout(this.searchTimeout),a.trim().length>0||0===a.length?this.searchTimeout=window.setTimeout((function(){return a.length>0?t.fetchGroup(t.props.groupId,0,null,null,a):t.fetchGroup(t.props.groupId)}),500):this.refs.memberSearchInput.setValue("")},renderSpinner:function(){return s.div({className:"groups-spinner"},r.default.createElement(M.Image,{src:w.static_url("/static/images/icons/ajax-loading-small-blue-vflVk_QNP.gif"),srcHiRes:w.static_url("/static/images/icons/ajax-loading-small-blue@2x-vfl14X6Ll.gif"),alt:R.intl.formatMessage({defaultMessage:"Loading"})}))},onGroupChanged:function(e,t,a,o){return void 0===a&&(a=null),void 0===o&&(o=null),e?this.fetchGroup(this.props.groupId,0,a,o,this.state.search_query):(this.setState({group:t}),"function"==typeof this.props.onNewGroupFetched?this.props.onNewGroupFetched(t):void 0)},showRenameGroupModal:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.showRenameGroupModal():void 0},showAddMembersModal:function(){var e={group_owner_ids:this.state.group.users.filter((function(e){return e.is_owner})).map((function(e){return e.user_id})),team_id:this.state.group.team_id,team_type:C.team_type,group_id:this.props.groupId};return l.TeamsWebActionsLogger.log("groups_add_members_clicked",e),null!=this.refs.single_group_header?this.refs.single_group_header.showAddMembersModal():void 0},showSwitchToMemberManagedGroupModal:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.showSwitchToMemberManagedGroupModal():void 0},onAdminManaged:function(){return null!=this.refs.single_group_header?this.refs.single_group_header.onAdminManaged():void 0},render:function(){return this.state.loading&&!this.state.group?this.renderSpinner():(m.require_css("/static/css/react/contacts_tokenizer-vfl6f1mr3.css"),s.div({className:"single-group-view"},r.default.createElement(E,{ref:"single_group_header",group:this.state.group,canHaveAdminUi:this.props.canHaveAdminUi,teamName:this.props.teamName,onGroupChanged:this.onGroupChanged,groupControlledByAdmin:this.props.groupControlledByAdmin,isLimitedTeam:this.props.isLimitedTeam,insideAdminConsole:this.props.insideAdminConsole,isMaestroDesign:this.props.isMaestroDesign}),s.span({className:"team-admin-maestro-search"},s.div({className:"maestro-search-outer-label"},R.intl.formatMessage({defaultMessage:"Search group members"})),s.span({className:"member-maestro-find-panel"},N(S,{name:"search-input",ref:"memberSearchInput",onChange:this.onUserTextChange,placeholder:R.intl.formatMessage({defaultMessage:"Name or email",description:"a placeholder in a search box, hints the user to search members by Name or email"}),"disable-errors":!0,compatiblePlaceholder:!0,className:"team-admin-text-input"}))),this.state.loading?this.renderSpinner():r.default.createElement(p.MemberList,{group:this.state.group,canHaveAdminUi:this.props.canHaveAdminUi,onGroupChanged:this.onGroupChanged,isMaestroDesign:!0,insideAdminConsole:this.props.insideAdminConsole,search_query:this.state.search_query})))}});t.default=D})),define("modules/clean/groups/group_member_list",["require","exports","tslib","classnames","create-react-class","react","react-dom-factories","prop-types","spectrum/overflow_button","modules/clean/ajax","modules/clean/avatar/avatar_with_default","modules/clean/avatar/initials_avatar","modules/clean/teams/modals/remove_user_from_group_modal","modules/clean/teams/modals/change_group_owner_modal","modules/clean/groups/utils","modules/clean/react/bubble_menu","modules/clean/react/button","modules/core/browser","modules/clean/react/dbox_app_promo","modules/clean/react/sprite","modules/clean/react/table","modules/clean/viewer","modules/core/i18n","modules/core/notify","modules/core/user_i18n"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g,f,_,h,M,b,v,y,w,A,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importDefault(s),n=a.__importStar(n),i=a.__importStar(i),u=a.__importStar(u),m=a.__importDefault(m),g=a.__importDefault(g),_=a.__importStar(_),h=a.__importStar(h),v=a.__importDefault(v),R=a.__importStar(R);var N=y.Viewer.get_viewer(),S=r.default({displayName:"MemberList",propTypes:{group:i.object,canHaveAdminUi:i.bool,onGroupChanged:i.func,isMaestroDesign:i.bool,insideAdminConsole:i.bool,search_query:i.string},viewerIsOwner:function(){return this.props.group.is_owner},canManageGroup:function(){return!this.props.group.is_team_group&&(this.props.canHaveAdminUi||this.viewerIsOwner())},onRemoveUserSuccess:function(e){var t,a,o=this.props.group.user_count+this.props.group.pending_req_count-1;return 0!=(t=o,a=g.default.MAX_ROWS_PER_PAGE,((t=+t)%(a=+a)+a)%a)||this.props.isMaestroDesign?this.refs.members.forceRefresh():this.props.onGroupChanged(!0,this.props.group)},onClickRemoveUser:function(e){var t=this,a=e.user_id===N.work_user.id;return p.showRemoveUserFromGroupModal({groupId:this.props.group.id,groupName:this.props.group.name,userId:e.user_id,userDisplayName:e.name?e.name:e.email,removeSelf:a,onPrimaryAction:function(){a?h.set_hash("groups"):t.onRemoveUserSuccess(e)}})},onClickApproveJoinReq:function(e){var t=this;return u.WebRequest({url:"/groups_ajax/approve",data:{group_id:this.props.group.id,requesting_user_id:e.user_id},subject_user:N.work_user,success:function(e){return A.Notify.success(w.intl.formatMessage({defaultMessage:"Request approved."})),t.refs.members.forceRefresh()},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickRemoveJoinReq:function(e){var t=this;return u.WebRequest({url:"/groups_ajax/remove",data:{group_id:this.props.group.id,requesting_user_id:e.user_id},subject_user:N.work_user,success:function(e){return A.Notify.success(w.intl.formatMessage({defaultMessage:"Request removed."})),t.refs.members.forceRefresh()},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickMakeGroupOwner:function(e){var t=this;return c.showChangeGroupOwnerModal({userId:e.user_id,userDisplayName:e.name,groupId:this.props.group.id,enableGroupOwnerPermissions:!0,success:function(a){e.is_owner=!0;var o={name:e.name,email:e.email};return t.props.group.owners.push(o),t.props.onGroupChanged(!1,t.props.group)},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},onClickRemoveGroupOwner:function(e){var t=this;return c.showChangeGroupOwnerModal({userId:e.user_id,userDisplayName:e.name,groupId:this.props.group.id,enableGroupOwnerPermissions:!1,success:function(a){return e.is_owner=!1,t.props.group.owners=t.props.group.owners.filter((function(t){return t.email!==e.email})),e.user_id===N.work_user.id&&(t.props.group.is_owner=!1),t.props.onGroupChanged(!1,t.props.group)},error:function(e){if(g.default.isGroupDeleted(e))return g.default.redirectToGroupsPage(t.props.insideAdminConsole)}})},renderSettingsForPendingMember:function(e){if(this.props.isMaestroDesign){var t=String.fromCharCode("176"),a=n.button({className:"settings-button"},t+t+t);return n.div({className:"approve-options-container u-mar-top-xxs"},s.default.createElement(_.button,{importance:"secondary",className:"approve-join-req-button",onClick:this.onClickApproveJoinReq.bind(this,e)},w.intl.formatMessage({defaultMessage:"Approve"})),s.default.createElement(f.BubbleMenu,{targetButton:a,position:f.BubbleMenu.POSITIONS.BOTTOM_LEFT,shouldShowArrow:!1,verticalDisplacement:-3,items:[s.default.createElement(f.BubbleMenuItem,{onClick:this.onClickRemoveJoinReq.bind(this,e)},w.intl.formatMessage({defaultMessage:"Remove request"}))]}))}var o=n.button({className:"remove-request-button",onClick:this.onClickRemoveJoinReq.bind(this,e)},n.img({src:"/static/images/x-vflYKfRuL.png",alt:w.intl.formatMessage({defaultMessage:"Remove join request"})}));return n.span({className:"pending-request-buttons"},s.default.createElement(M.Actionable,{handler:this.onClickApproveJoinReq.bind(this,e)},n.button({className:"button-secondary button-small action-button approve-join-req-button"},w.intl.formatMessage({defaultMessage:"Approve"}))),o)},renderSettingsForMember:function(e){if(this.props.group.is_admin_managed)return n.button({className:"remove-user-button",onClick:this.onClickRemoveUser.bind(this,e)},n.img({src:"/static/images/x-vflYKfRuL.png",alt:w.intl.formatMessage({defaultMessage:"Remove user"})}));var t=void 0;t=this.props.isMaestroDesign?s.default.createElement(l.OverflowButton,{className:"settings-button","aria-label":"More links"}):n.button({className:"settings-button"},s.default.createElement(b.Sprite,{group:"web",name:"gear",alt:w.intl.formatMessage({defaultMessage:"Member settings"})}));var a=[s.default.createElement(f.BubbleMenuItem,{onClick:this.onClickRemoveUser.bind(this,e)},w.intl.formatMessage({defaultMessage:"Remove user"}))];return e.is_owner?a.push(s.default.createElement(f.BubbleMenuItem,{onClick:this.onClickRemoveGroupOwner.bind(this,e)},w.intl.formatMessage({defaultMessage:"Remove manager permissions"}))):e.can_be_owner&&a.push(s.default.createElement(f.BubbleMenuItem,{onClick:this.onClickMakeGroupOwner.bind(this,e)},w.intl.formatMessage({defaultMessage:"Make manager"}))),s.default.createElement(f.BubbleMenu,{targetButton:t,position:f.BubbleMenu.POSITIONS.BOTTOM_LEFT,shouldShowArrow:!1,verticalDisplacement:-5,items:a})},columnTypes:{displayName:function(e){var t=this;return{field:"display_name",header:w.intl.formatMessage({defaultMessage:"Name"}),classes:{"display-name-column":!0},width:e,sortable:!this.props.search_query,render:function(e){var a=o.default({"u-mar-right-s":!0,"u-mar-left-xs":!t.props.isMaestroDesign,"u-mar-left-s":t.props.isMaestroDesign});return[s.default.createElement(m.default,{dimension:t.props.isMaestroDesign?32:24,photoUrl:e.photo_url,optionalClass:a,defaultAvatar:s.default.createElement(d.InitialsAvatarWithColorDerivedFromName,{dimension:t.props.isMaestroDesign?32:24,initials:R.getInitials(e.name||e.email),name:e.name,shape:"CIRCLE",optionalClass:a})}),n.span({className:t.props.isMaestroDesign?"user-info":"user-name"},n.span({className:o.default("user-name-part",{pending:e.is_pending,"user-info__text":t.props.isMaestroDesign})},e.name?e.name:"-"),t.props.isMaestroDesign?n.div({className:"user-info__subtext"},e.email):n.span({className:"user-status"},e.is_owner?" · "+w.intl.formatMessage({defaultMessage:"Manager"}):e.is_pending?" · "+w.intl.formatMessage({defaultMessage:"Pending"}):void 0))]}}},userEmail:function(e){return{field:"email",header:w.intl.formatMessage({defaultMessage:"Email"}),classes:{"email-column":!0},width:e,sortable:!this.props.search_query,render:function(e){return n.span({className:"user-email"},n.span({className:o.default({pending:e.is_pending})},e.email))}}},userStatus:function(e){return{field:"member_type",header:w.intl.formatMessage({defaultMessage:"Status"}),classes:{"user-status-column":!0},width:e,initialSortDir:v.default.DESC_DIR,sortable:!this.props.search_query,render:function(e){return e.is_owner?w.intl.formatMessage({defaultMessage:"Manager"}):e.is_pending?w.intl.formatMessage({defaultMessage:"Pending"}):w.intl.formatMessage({defaultMessage:"Member"})}}},joinedDate:function(e){var t=this;return{field:"localized_joined_ts",header:w.intl.formatMessage({defaultMessage:"Joined"}),width:e,sortable:!this.props.search_query,render:function(e){return t.props.isMaestroDesign&&e.is_pending?n.span({className:"pending-request-buttons"},s.default.createElement(M.Actionable,{handler:t.onClickApproveJoinReq.bind(t,e)},n.button({className:"button-secondary button-small action-button approve-join-req-button"},w.intl.formatMessage({defaultMessage:"Approve"})))):e.localized_joined_ts}}},settings:function(e){var t=this;return{width:e,classes:{"settings-column":!0},sortable:!1,render:function(e){return t.canManageGroup()?e.is_pending?t.renderSettingsForPendingMember(e):t.renderSettingsForMember(e):""}}}},componentWillMount:function(){return this.columnTypes=(function(e,t){var a={};for(var o in e){var r=e[o];a[o]=r.bind(t)}return a})(this.columnTypes,this)},tableRowClasses:function(e){return this.props.isMaestroDesign&&e.is_pending?{"pending-member-row":!0}:{}},getGroupMembers:function(e,t){var a=this;return u.WebRequest({url:"/groups_ajax/get_group_info",data:{group_id:this.props.group.id,offset:e.offset,limit:e.limit,sort_column:e.sortColumn,sort_direction:e.sortDir,search_query:this.props.search_query},subject_user:N.work_user,success:function(e){var o=(e=JSON.parse(e)).data.pending_req_users.concat(e.data.users);return t(null,{rows:o,total:e.data.user_count+e.data.pending_req_count}),a.props.onGroupChanged(!1,e.data)},error:function(e){return g.default.redirectToGroupsPage(a.props.insideAdminConsole)}})},renderMemberTable:function(){var e,t=this.props.group.pending_req_users.concat(this.props.group.users);return e=this.props.isMaestroDesign?this.canManageGroup?[this.columnTypes.displayName("50%"),this.columnTypes.userStatus("25%"),this.columnTypes.settings("25%")]:[this.columnTypes.displayName("50%"),this.columnTypes.userStatus("50%")]:this.canManageGroup?[this.columnTypes.displayName(300),this.columnTypes.userEmail(250),this.columnTypes.joinedDate(147),this.columnTypes.settings(103)]:[this.columnTypes.displayName(300),this.columnTypes.userEmail(250),this.columnTypes.joinedDate(250)],s.default.createElement(v.default,{ref:"members",columns:e,initialData:{rows:t,total:this.props.group.user_count+this.props.group.pending_req_count},initialSortColumn:0,emptyMessage:this.props.search_query?w.intl.formatMessage({defaultMessage:"No members found"}):w.intl.formatMessage({defaultMessage:"This group has no members."}),rowsPerPage:g.default.MAX_ROWS_PER_PAGE,paginatorClasses:this.props.isMaestroDesign?"u-mar-top-xs":"",infiniteScroll:this.props.isMaestroDesign,classes:{"grey-style":!0},rowClasses:this.tableRowClasses,rowsPerRequestForInfiniteScroll:g.default.MAX_ROWS_TO_FETCH_FROM_SERVER,onRequestData:this.getGroupMembers})},render:function(){return n.div({className:"member-list-container"},n.div({className:"group-user-info"},this.props.isMaestroDesign&&!this.props.insideAdminConsole||this.props.search_query?void 0:n.div({className:"member-count"},w.intl.formatMessage({defaultMessage:"{count, plural, one{{count} member} other{{count} members}}"},{count:this.props.group.user_count}))),this.renderMemberTable(),this.props.search_query&&this.props.group.has_more?n.div({className:"more-search-results"},w.intl.formatMessage({defaultMessage:"We found more members than we can display. Don’t see who you’re looking for? Try narrowing your search."})):void 0)}});t.MemberList=S})),define("modules/clean/teams/limited_team_tooltip_runner",["require","exports","tslib","immutable","react","react-dom","react-dom-factories","prop-types","external/lodash","jquery","modules/clean/ajax","modules/clean/react/bubble","modules/clean/react/css","modules/clean/static_urls","modules/core/exception"],(function(e,t,a,o,r,s,n,i,l,u,m,d,p,c,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importStar(o),r=a.__importDefault(r),s=a.__importStar(s),n=a.__importStar(n),i=a.__importStar(i),l=a.__importStar(l),u=a.__importDefault(u),m=a.__importStar(m),d=a.__importDefault(d);var f=r.default.createElement,_=o.Record({heading:"",body:"",buttonText:"",arrowDirection:null,cssSelector:"",imageHref:"",imageHrefHires:"",imageHeight:"",imageWidth:null,onButtonClick:null,onButtonClickImmediate:null});t.TooltipSpec=_;var h=function(e,t,a){var o,r=Object.keys(e.tooltipSpecs);if(l.difference(e[t],r).length&&(o="Invalid prop "+t+" supplied to "+a+". All "+t+" values must exist in tooltipSpecs"),e[t]||(o="Prop "+t+" must be supplied to "+a+"."),o)return new Error(o)},M=(function(e){function t(t){var a=e.call(this,t)||this;return a.state={currentStepNumber:a.props.initialServerStep-a.props.serverStepOffset,waitingForServerResponse:!1},a.BUBBLE_WIDTH=250,a._initBubbleTracking=function(){return a._setBubbleLocation(),u.default(window).resize(a._setBubbleLocation)},a._specForStepNumber=function(e){return a.props.tooltipSpecs[a.props.tooltipSpecOrder[e]]},a._recordStepSeen=function(e){return m.WebRequest({url:"/team/onboarding_event",data:{stage:a.state.currentStepNumber+a.props.serverStepOffset},success:e})},a._recordAndAdvance=function(){if(!a.state.waitingForServerResponse){a.setState({waitingForServerResponse:!0});var e=a._specForStepNumber(a.state.currentStepNumber);return"function"==typeof e.onButtonClickImmediate&&e.onButtonClickImmediate(),a._recordStepSeen((function(t){var o=parseInt(JSON.parse(t).next_state);if(a.state.currentStepNumber===a.props.tooltipSpecOrder.length-1)return a.props.lastTooltipDismissedCb(o);var r=function(){return a.setState({currentStepNumber:o-a.props.serverStepOffset,waitingForServerResponse:!1}),"function"==typeof a.props.onStepAdvancedCb?a.props.onStepAdvancedCb(o):void 0};return e.onButtonClick?e.onButtonClick(r):r()}))}},a._setBubbleLocation=a._setBubbleLocation.bind(a),a}return a.__extends(t,e),t.prototype.componentDidMount=function(){return"complete"===document.readyState?this._initBubbleTracking():u.default(window).load(this._initBubbleTracking)},t.prototype.componentDidUpdate=function(){return this._setBubbleLocation()},t.prototype.componentWillUnmount=function(){return u.default(window).off("resize",this._setBubbleLocation)},t.prototype._setBubbleLocation=function(){var e,t,a=this._specForStepNumber(this.state.currentStepNumber);g.assert([d.default.ARROW.TOP,d.default.ARROW.LEFT,d.default.ARROW.LEFT_TOP].includes(a.arrowDirection),"trying to setBubbleLocation with unsupported arrow direction. Please add code for computing bubble location");var o=u.default(".react-bubble-box__arrow-border"),r=u.default(a.cssSelector);if(r.length){var n=u.default(s.findDOMNode(this.refs.tooltipBubble)),i=r.offset(),l=n.offsetParent().offset(),m=i.left-l.left,p=i.top-l.top,c=function(e){return Math.floor(e.outerWidth()/2)},f=function(e){return Math.floor(e.outerHeight()/2)};switch(a.arrowDirection){case d.default.ARROW.TOP:var _=o.outerHeight();_>40&&(_=18),e=m-c(n)+c(r),t=p+r.outerHeight()+_;break;case d.default.ARROW.LEFT:var h=o.outerWidth();h>40&&(h=18),e=m+r.outerWidth()+h,t=p-f(n)+f(r);break;case d.default.ARROW.LEFT_TOP:(h=o.outerWidth())>40&&(h=18),e=m+r.outerWidth()+h,t=p-f(r)}return n.css({top:t,left:e,visibility:"visible"})}},t.prototype.render=function(){var e=this._specForStepNumber(this.state.currentStepNumber);return n.div({className:"limited-team-tooltips"},f(d.default,{ref:"tooltipBubble",arrow:e.arrowDirection,className:"limited-team-tooltips__bubble",style:{position:"absolute",width:this.BUBBLE_WIDTH,visibility:"hidden"}},n.div({className:"limited-team-tooltips__bubble-contents"},n.img({src:c.static_url(e.imageHref),srcHiRes:c.static_url(e.imageHrefHires||e.imageHref),className:"limited-team-tooltips__bubble-image",width:e.imageWidth||.84*this.BUBBLE_WIDTH,height:e.imageHeight,alt:""}),n.h2({},e.heading),n.p({},e.body),n.button({className:"button-primary limited-team-tooltips__bubble-button",onClick:this._recordAndAdvance},e.buttonText))))},t.displayName="LimitedTeamTooltipRunner",t.propTypes={initialServerStep:i.number.isRequired,serverStepOffset:i.number.isRequired,tooltipSpecs:i.objectOf(i.instanceOf(_)).isRequired,tooltipSpecOrder:h,lastTooltipDismissedCb:i.func,onStepAdvancedCb:i.func},t})(r.default.Component),b=p.requireCssWithComponent(M,["/static/css/react/bubble_box-vflhusCtq.css"]);t.LimitedTeamTooltipRunner=b})),define("modules/clean/teams/limited_team_tooltips",["require","exports","tslib","create-react-class","react","prop-types","modules/clean/react/bubble","modules/clean/teams/limited_team_tooltip_runner","modules/core/browser","modules/core/i18n"],(function(e,t,a,o,r,s,n,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),r=a.__importDefault(r),s=a.__importStar(s),n=a.__importDefault(n),l=a.__importStar(l);var m=r.default.createElement,d=o.default({displayName:"LimitedTeamTooltips",propTypes:{onboardingState:s.number.isRequired,lastTooltipDismissedCb:s.func},_getTooltipSpecs:function(){return{TEAM_TAB:new i.TooltipSpec({heading:u.intl.formatMessage({defaultMessage:"Manage membership"}),body:u.intl.formatMessage({defaultMessage:"Invite people, remove members, and customize your work Dropbox here."}),arrowDirection:n.default.ARROW.LEFT,buttonText:u.intl.formatMessage({defaultMessage:"Next"}),cssSelector:".team-nav-item",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_manage-vflXw6tGQ.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_manage@2x-vflS2wbhg.png",imageHeight:130,onButtonClick:function(){return l.redirect("/team")}}),INVITE_MEMBERS:new i.TooltipSpec({heading:u.intl.formatMessage({defaultMessage:"Invite more people"}),body:u.intl.formatMessage({defaultMessage:"Invite coworkers to join your work Dropbox here."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({defaultMessage:"Next"}),cssSelector:".invite-button",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_invite-vflwGI3rs.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_invite@2x-vflujxc7r.png",imageHeight:130}),GROUPS:new i.TooltipSpec({heading:u.intl.formatMessage({defaultMessage:"Create and view groups"}),body:u.intl.formatMessage({defaultMessage:"Keep things organized by adding people to groups."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({defaultMessage:"Next"}),cssSelector:"#tab_team-tab-groups",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_groups-vflUdtiBT.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_groups@2x-vflYWShtX.png",imageHeight:130}),SETTINGS:new i.TooltipSpec({heading:u.intl.formatMessage({defaultMessage:"Customize settings"}),body:u.intl.formatMessage({defaultMessage:"Update Paper sharing settings, change the name of your Dropbox, and more."}),arrowDirection:n.default.ARROW.TOP,buttonText:u.intl.formatMessage({defaultMessage:"Next"}),cssSelector:".settings-button",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_settings-vflTnLAOr.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_settings@2x-vflClprJl.png",imageHeight:130}),PAPER:new i.TooltipSpec({heading:u.intl.formatMessage({defaultMessage:"Dropbox Paper"}),body:u.intl.formatMessage({defaultMessage:"Check out the best way to create and build on ideas with your team."}),arrowDirection:n.default.ARROW.LEFT,buttonText:u.intl.formatMessage({defaultMessage:"Next"}),cssSelector:".composer-nav-item",imageHref:"/static/images/teams/fastrak-rainbow/illo_tooltips_paper-vflQyNMh5.png",imageHrefHires:"/static/images/teams/fastrak-rainbow/illo_tooltips_paper@2x-vfl7TJoJA.png",imageHeight:130,onButtonClickImmediate:function(){return l.open_tab("/paper")}})}},BUBBLE_INFO_ARRAY:["TEAM_TAB","INVITE_MEMBERS","GROUPS","SETTINGS","PAPER"],render:function(){return m(i.LimitedTeamTooltipRunner,{initialServerStep:this.props.onboardingState,lastTooltipDismissedCb:this.props.lastTooltipDismissedCb,serverStepOffset:2,tooltipSpecs:this._getTooltipSpecs(),tooltipSpecOrder:this.BUBBLE_INFO_ARRAY})}});t.default=d})),define("modules/clean/teams/modals/change_group_owner_modal",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/admin/modals/action_utility_modal","modules/clean/components/modals/show_modal","modules/clean/teams/admin/modals/modal_ajax","modules/clean/viewer"],(function(e,t,a,o,r,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),t.ChangeGroupOwnerModal=function(e){e.userId;var t=e.userDisplayName,a=(e.groupId,e.enableGroupOwnerPermissions),n=e.onRequestClose,i=void 0===n?function(){}:n,l=e.onPrimaryAction,u=void 0===l?function(){}:l,m=e.onSecondaryAction,d=void 0===m?function(){}:m,p=a?r.intl.formatMessage({defaultMessage:"<paragraph>{name} will be able to add and remove managers, and change group information.</paragraph> <paragraph>{name} will also be able to delete the group.</paragraph>"},{paragraph:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.default.createElement("p",null,e)},name:t}):r.intl.formatMessage({defaultMessage:"{name} will no longer be able to add and remove managers, change group information, or delete the group."},{name:t});return o.default.createElement(s.ActionUtilityModal,{title:a?r.intl.formatMessage({defaultMessage:"Make {name} a manager?"},{name:t}):r.intl.formatMessage({defaultMessage:"Remove manager permissions from {name}?"},{name:t}),primaryAction:a?r.intl.formatMessage({defaultMessage:"Make manager"}):r.intl.formatMessage({defaultMessage:"Remove manager permissions"}),onPrimaryAction:u,onSecondaryAction:d,onRequestClose:i},p)},t.CHANGE_GROUP_OWNER_URL="/groups_ajax/change_group_member_type",t.ChangeGroupOwnerModalAction=function(e){var o=e.userId,r=e.userDisplayName,s=e.groupId,n=e.enableGroupOwnerPermissions,u=a.__rest(e,["userId","userDisplayName","groupId","enableGroupOwnerPermissions"]);return i.modalAjax({modal:t.ChangeGroupOwnerModal,ajax:{url:t.CHANGE_GROUP_OWNER_URL,data:{group_id:s,user_id:o,is_owner:n},subject_user:l.Viewer.get_viewer().work_user}})(a.__assign({userId:o,userDisplayName:r,groupId:s,enableGroupOwnerPermissions:n},u))},t.showChangeGroupOwnerModal=function(e){return n.showModal(o.default.createElement(t.ChangeGroupOwnerModalAction,a.__assign({},e)))}}));
//# sourceMappingURL=pkg-team-deferred.min.js-vflrstMLz.map